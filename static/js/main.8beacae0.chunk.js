(this["webpackJsonpbookstore-frontend"]=this["webpackJsonpbookstore-frontend"]||[]).push([[0],{183:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(20),s=n.n(r),i=n(17),o=n(18),l=n(22),d=n(14),j=n.n(d),u=n(21),b=n(13),m=n(36),h=n(255),O=n(239),x=n(139),v=n(240),f=n(252),p=n(241),g=n(254),N=n(140),y=n(242),w=n(1),k=Object(c.createContext)(void 0);function S(){return Object(c.useContext)(k)}function C(e){var t=Object(c.useState)(!1),n=Object(b.a)(t,2),a=n[0],r=n[1];return Object(w.jsx)(k.Provider,{value:{signedOut:a,setSignedOut:r},children:e.children})}var P=n(146),F="/api";function A(e,t){var n=function(){var e=Object(u.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw n;case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=F+e;return Object(P.a)(c,n,t)}var I,T={"Content-type":"application/json; charset=UTF-8"};function E(e,t){return fetch(F+e,{method:"POST",body:t,headers:T})}function L(e,t){return fetch(F+e,{method:"PUT",body:t,headers:T})}function B(e,t){return fetch(F+e,{method:"DELETE",body:t,headers:T})}function D(e,t){return fetch(F+e,{method:"PATCH",body:t,headers:T})}function M(e){return E("/users/login",JSON.stringify(e))}function q(e){return E("/users/register",JSON.stringify(e))}function U(){var e=A("/users/check"),t=e.data&&!e.error?e.data.user_type===I.admin:void 0;return Object(i.a)({isAdmin:t},e)}!function(e){e.admin="admin",e.normal="normal"}(I||(I={}));var H=n(27),K=n.n(H);function R(){var e,t,n,c,a,r,s=A("/cart/"),o=s.data&&!s.error?K()(s.data.books).map((function(e){return e.count})).sum():0;return Object(i.a)({books:null!==(e=s.error||null===(t=s.data)||void 0===t?void 0:t.books)&&void 0!==e?e:[],discount:null!==(n=s.error||null===(c=s.data)||void 0===c?void 0:c.discount)&&void 0!==n?n:0,total:null!==(a=s.error||null===(r=s.data)||void 0===r?void 0:r.total)&&void 0!==a?a:0,cartCount:o},s)}function J(e){var t,n,c=e.active,a=R().cartCount,r=null!==(t=U().isAdmin)&&void 0!==t&&t,s=null!==(n=Object(o.h)().params.keyword)&&void 0!==n?n:"";return Object(w.jsx)(h.a,{bg:"white",expand:"lg",className:"shadow-sm fixed-top",children:Object(w.jsxs)(O.a,{children:[Object(w.jsx)(h.a.Brand,{className:"fw-bolder",as:l.b,to:"/home",children:"Book Store"}),Object(w.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(w.jsxs)(h.a.Collapse,{id:"basic-navbar-nav",children:[Object(w.jsxs)(x.a,{className:"me-auto",children:[Object(w.jsx)(x.a.Link,{as:l.b,to:"/home",active:"home"===c||"detail"===c||"search"===c,children:"Books"}),Object(w.jsx)(x.a.Link,{as:l.b,to:"/checkout",active:"cart"===c,children:Object(w.jsxs)("div",{className:"d-flex align-items-center",children:[Object(w.jsx)("span",{className:"me-1",children:"My Cart"}),Object(w.jsx)(m.a,{children:Object(w.jsx)(v.a,{bg:0===a?"secondary":"danger",pill:!0,children:a})})]})}),Object(w.jsx)(x.a.Link,{as:l.b,to:"/orders",active:"orders"===c,children:"My Orders"}),Object(w.jsx)(G,{})]}),Object(w.jsx)(Y,{initial:s}),r?Object(w.jsx)(z,{active:c}):null]})]})})}function G(){var e,t=S().setSignedOut,n=Object(o.g)(),c=U(),a=c.data,r=c.revalidate;return Object(w.jsx)(f.a,{overlay:Object(w.jsx)(p.a,{id:"signout-tooltip",children:"Click to sign out"}),placement:"auto",children:Object(w.jsxs)(x.a.Link,{onClick:Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/users/logout");case 2:return e.next=4,r();case 4:t(!0),n.push("/login");case 6:case"end":return e.stop()}}),e)}))),children:[Object(w.jsx)("span",{children:"Hi, "}),Object(w.jsx)("span",{className:"fw-bold",children:null!==(e=null===a||void 0===a?void 0:a.username)&&void 0!==e?e:"???"})]})})}function Y(e){var t=e.initial,n=void 0===t?"":t,a=Object(c.useRef)(null),r=Object(o.g)();return Object(w.jsxs)(g.a,{className:"d-flex mb-2 mb-lg-0",onSubmit:function(){var e=a.current.value;e.length>0&&r.push("/search/".concat(e))},children:[Object(w.jsx)(N.a,{className:"form-control me-2",type:"search",placeholder:"Search Books...",defaultValue:n,ref:a}),Object(w.jsx)(y.a,{variant:"outline-secondary",type:"submit",children:"Search"})]})}function z(e){var t=e.active;return Object(w.jsx)("div",{className:"ms-lg-2 d-flex",children:"dashboard"===t?Object(w.jsx)(y.a,{as:l.b,to:"/home",variant:"success",className:"w-100",children:"Book Store"}):Object(w.jsx)(y.a,{as:l.b,to:"/dashboard",variant:"primary",className:"w-100",children:"Dashboard"})})}function V(e){var t=e.py,n=void 0===t?4:t,c=e.children;return Object(w.jsx)("main",{className:"py-".concat(n," container"),children:c})}function Z(e){return Object(w.jsx)("div",{className:"store-home",children:e.children})}var W=n(258),_=n(243),$=n(141),Q=n(244);function X(e){var t=e.book,n=e.count,c="/detail/".concat(t.id),a=R().revalidate;return Object(w.jsx)(W.a.Item,{as:l.b,to:c,style:{color:"inherit",textDecoration:"inherit"},action:!0,children:Object(w.jsxs)(_.a,{className:"d-flex justify-content-between",children:[Object(w.jsx)($.a,{xs:3,children:Object(w.jsx)(Q.a,{src:t.image,fluid:!0})}),Object(w.jsxs)($.a,{className:"d-flex align-items-center",children:[Object(w.jsxs)("div",{className:"me-auto",children:[Object(w.jsx)("h6",{className:"mb-0",children:t.name}),Object(w.jsx)("small",{className:"text-muted",children:t.author})]}),Object(w.jsxs)("div",{className:"me-3",children:[Object(w.jsxs)("span",{className:"h5",children:["\xa5",t.price]}),n>1?Object(w.jsxs)("span",{className:"text-muted",children:[" x",n]}):null]}),Object(w.jsx)(v.a,{pill:!0,as:y.a,variant:"danger",onClick:function(){var e=Object(u.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,c=t.id.toString(),B("/cart/".concat(c));case 3:return e.next=5,a();case 5:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"\u2014"})]})]})})}function ee(e){var t=e.title,n=e.value,c="Discount"===t?"text-danger":"fw-bold",a="Discount"===t?"-\xa5":"\xa5";return Object(w.jsx)(W.a.Item,{children:Object(w.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(w.jsx)("div",{children:Object(w.jsx)("span",{className:"h6",children:t})}),Object(w.jsx)("div",{children:Object(w.jsxs)("span",{className:"h5 ".concat(c),children:[a,n.toFixed(2)]})})]})})}function te(){var e=R(),t=e.books,n=e.cartCount,c=e.discount,a=e.total,r=e.revalidate,s=K()(t).map((function(e){return Object(w.jsx)(X,{book:e.book,count:e.count},e.book.id)})).value();return Object(w.jsxs)("div",{children:[Object(w.jsxs)("h4",{className:"d-flex align-items-center mb-3",children:[Object(w.jsx)("span",{className:"text-muted me-2",children:"My cart"}),Object(w.jsx)(v.a,{pill:!0,bg:"secondary",className:"me-auto",children:n}),n>0?Object(w.jsx)(v.a,{pill:!0,as:y.a,variant:"danger",onClick:Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("/cart/");case 2:return e.next=4,r();case 4:case"end":return e.stop()}}),e)}))),children:"Clear"}):null]}),Object(w.jsxs)("ul",{className:"list-group mb-3",children:[s,Object(w.jsx)(ee,{title:"Discount",value:c}),Object(w.jsx)(ee,{title:"Total",value:a})]})]})}var ne=Object(c.createContext)(null);function ce(e){var t=e.name,n=e.children,a=Object(c.useContext)(ne),r=a.selected,s=a.setSelected;return Object(w.jsx)("button",{onClick:function(){return s(t)},className:"list-group-item list-group-item-action ".concat(r===t?"active":""),children:Object(w.jsxs)("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[Object(w.jsx)("span",{children:t}),n]})})}function ae(){return Object(w.jsx)("div",{className:"col",children:Object(w.jsxs)("div",{className:"row gy-2",children:[Object(w.jsxs)("div",{className:"col-md-6",children:[Object(w.jsx)("label",{htmlFor:"cc-name",className:"form-label",children:"Name on card"}),Object(w.jsx)("input",{type:"text",className:"form-control",id:"cc-name",placeholder:"",required:!0})]}),Object(w.jsxs)("div",{className:"col-md-6",children:[Object(w.jsx)("label",{htmlFor:"cc-number",className:"form-label",children:"Card number"}),Object(w.jsx)("input",{type:"text",className:"form-control",id:"cc-number",placeholder:"",required:!0})]}),Object(w.jsxs)("div",{className:"col-md-6",children:[Object(w.jsx)("label",{htmlFor:"cc-expiration",className:"form-label",children:"Expiration"}),Object(w.jsx)("input",{type:"text",className:"form-control",id:"cc-expiration",placeholder:"",required:!0})]}),Object(w.jsxs)("div",{className:"col-md-6",children:[Object(w.jsx)("label",{htmlFor:"cc-cvv",className:"form-label",children:"CVV"}),Object(w.jsx)("input",{type:"text",className:"form-control",id:"cc-cvv",placeholder:"",required:!0})]})]})})}function re(){var e=Object(c.useState)("Credit card"),t=Object(b.a)(e,2),n=t[0],a=t[1];return Object(w.jsx)(ne.Provider,{value:{selected:n,setSelected:a},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{className:"mb-3",children:"Payment"}),Object(w.jsxs)("div",{className:"row gy-2",children:[Object(w.jsx)("div",{className:"col-lg-5 col-xxl-4",children:Object(w.jsxs)("div",{className:"list-group",children:[Object(w.jsx)(ce,{name:"PayPal"}),Object(w.jsx)(ce,{name:"WeChat Pay",children:Object(w.jsx)("span",{className:"badge bg-success rounded-pill",children:"Recommended"})}),Object(w.jsx)(ce,{name:"Alipay"}),Object(w.jsx)(ce,{name:"Credit card",children:Object(w.jsx)("span",{className:"badge bg-secondary rounded-pill",children:"Last used"})})]})}),"Credit card"===n?Object(w.jsx)(ae,{}):Object(w.jsxs)("div",{className:"col",children:["You'll be redirected to ",n,' after clicking "Checkout".']})]})]})})}var se=n(253),ie=n(73),oe=Object(c.createContext)(void 0);function le(e){var t,n=e.address,a="Default"===n.tag?"bg-secondary":"bg-success",r=Object(c.useContext)(oe),s=r.selected,i=r.setSelected;return Object(w.jsxs)("button",{onClick:function(){return i(n)},className:"list-group-item list-group-item-action ".concat((null!==(t=null===s||void 0===s?void 0:s.id)&&void 0!==t?t:0)===n.id?"active":""),children:[Object(w.jsxs)("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[Object(w.jsx)("h5",{className:"mb-1",children:n.name}),Object(w.jsx)("span",{className:"badge ".concat(a," rounded-pill"),children:n.tag})]}),Object(w.jsx)("p",{className:"mb-0 small",children:n.phone}),Object(w.jsx)("p",{className:"mb-0",children:n.address})]})}function de(){var e=Object(c.useContext)(oe),t=e.modalShow,n=e.setModalShow,a=Object(ie.a)(),r=a.register,s=a.handleSubmit;return Object(w.jsxs)(se.a,{show:t,size:"lg",onHide:function(){return n(!1)},backdrop:"static",centered:!0,children:[Object(w.jsx)(se.a.Header,{closeButton:!0,children:Object(w.jsx)(se.a.Title,{children:"Add a New Address"})}),Object(w.jsx)(se.a.Body,{children:Object(w.jsxs)(g.a,{onSubmit:s((function(e){alert(JSON.stringify(e)),n(!1)})),id:"add-new-address-form",children:[Object(w.jsxs)(g.a.Group,{as:_.a,className:"mb-3",children:[Object(w.jsx)(g.a.Label,{column:!0,sm:3,children:"Name"}),Object(w.jsx)($.a,{sm:9,children:Object(w.jsx)(g.a.Control,Object(i.a)({placeholder:"Enter full name",required:!0},r("name")))})]}),Object(w.jsxs)(g.a.Group,{as:_.a,className:"mb-3",children:[Object(w.jsx)(g.a.Label,{column:!0,sm:3,children:"Phone Number"}),Object(w.jsx)($.a,{sm:9,children:Object(w.jsx)(g.a.Control,Object(i.a)({placeholder:"Enter phone number",required:!0},r("phone")))})]}),Object(w.jsxs)(g.a.Group,{as:_.a,className:"mb-3",children:[Object(w.jsx)(g.a.Label,{column:!0,sm:3,children:"Address"}),Object(w.jsx)($.a,{sm:9,children:Object(w.jsx)(g.a.Control,Object(i.a)({as:"textarea",placeholder:"Enter address",required:!0},r("address")))})]}),Object(w.jsx)(g.a.Group,{className:"mb-3",children:Object(w.jsx)(g.a.Check,{type:"checkbox",label:"Set as default",id:"set-as-default"})})]})}),Object(w.jsx)(se.a.Footer,{children:Object(w.jsx)(y.a,{variant:"primary",type:"submit",form:"add-new-address-form",children:"Confirm"})})]})}function je(){var e=Object(c.useContext)(oe).setModalShow;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("button",{className:"list-group-item list-group-item-action",onClick:function(){return e(!0)},children:Object(w.jsx)("span",{className:"text-muted",children:"Add a new address..."})})})}function ue(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(b.a)(r,2),i=s[0],o=s[1];return Object(w.jsx)(oe.Provider,{value:{selected:n,setSelected:a,modalShow:i,setModalShow:o},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{className:"mb-3",children:"Shipping Address"}),Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"list-group",children:[Object(w.jsx)(le,{address:{id:0,name:"Bugen Zhao",tag:"Default",phone:"+86 155 2121 2121",address:"1234 Main St., Minhang, Shanghai, China"}}),Object(w.jsx)(le,{address:{id:1,name:"Alice Cook",tag:"Home",phone:"+1 802 812 3456",address:"4321 Home St., Cupertino, CA, United States"}}),Object(w.jsx)(le,{address:{id:2,name:"Dave Jobs",tag:"School",phone:"+86 188 1234 5678",address:"9876 School St., Shanghai, China"}}),Object(w.jsx)(je,{}),Object(w.jsx)(de,{})]})})]})})}function be(){var e=R(),t=e.cartCount,n=e.revalidate,a=Object(c.useState)("no"),r=Object(b.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(!1),d=Object(b.a)(o,2),m=d[0],h=d[1],O=0===t;return Object(w.jsxs)("div",{children:[Object(w.jsxs)(se.a,{show:"no"!==s,onHide:function(){i("no"),h(!1)},children:[Object(w.jsx)(se.a.Header,{closeButton:!0,children:Object(w.jsx)(se.a.Title,{children:"success"===s?"Checkout Success":"Checkout Failed"})}),Object(w.jsx)(se.a.Body,{children:"success"===s?Object(w.jsxs)(w.Fragment,{children:["Go to ",Object(w.jsx)(l.b,{to:"/orders",children:"My Orders"})," to check the order."]}):"There is not enough stock of some books in your cart."})]}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col-md-6 col-lg-5 order-md-last",children:Object(w.jsx)(te,{})}),Object(w.jsxs)("div",{className:"col-md-6 col-lg-7",children:[Object(w.jsx)(ue,{}),Object(w.jsx)("hr",{className:"my-4"}),Object(w.jsx)(re,{}),Object(w.jsx)("hr",{className:"my-4"}),Object(w.jsx)("div",{className:"d-flex justify-content-end",children:Object(w.jsx)(f.a,{overlay:Object(w.jsx)(p.a,{id:"no-book-tooltip",children:"There's no book in the cart"}),placement:"bottom",show:O,children:Object(w.jsx)("button",{className:"btn btn-primary btn-lg col-12 col-lg-3",type:"submit",disabled:m||O,onClick:Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,E("/cart/checkout");case 3:return t=e.sent,e.next=6,n();case 6:t.ok?i("success"):i("failed"),h(!1);case 8:case"end":return e.stop()}}),e)}))),children:m?"Processing...":"Checkout"})})})]})]})]})}function me(){return Object(w.jsxs)(Z,{children:[Object(w.jsx)(J,{active:"cart"}),Object(w.jsx)(V,{py:5,children:Object(w.jsx)(m.b,{children:Object(w.jsx)(be,{})})})]})}var he=n(257);function Oe(e){var t=e.book,n=e.withLink,c=void 0===n||n,a="/detail/".concat(t.id);return Object(w.jsxs)(he.a,{children:[c?Object(w.jsx)(he.a.Link,{className:"stretched-link",as:l.b,to:a}):null,Object(w.jsx)(he.a.Img,{variant:"top",src:t.image}),Object(w.jsxs)(he.a.Body,{children:[Object(w.jsx)(he.a.Title,{className:"text-truncate",children:t.name}),Object(w.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(w.jsxs)(he.a.Subtitle,{className:"text-danger",as:"h6",children:["\xa5",t.price]}),Object(w.jsx)(he.a.Subtitle,{className:"text-muted",as:"small",children:t.inventory})]})]})]})}var xe=n(9),ve=n.n(xe),fe=n(245);function pe(e){var t=e.book,n=R().revalidate;return Object(w.jsxs)("div",{className:"d-flex flex-column justify-content-between",style:{height:"100%"},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{className:"h2 my-3",children:t.name}),Object(w.jsx)("div",{className:"mb-3",children:Object(w.jsxs)("dl",{className:"row",children:[Object(w.jsx)("dt",{className:"col-sm-3",children:"Author"}),Object(w.jsx)("dd",{className:"col-sm-9",children:t.author}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Press"}),Object(w.jsx)("dd",{className:"col-sm-9",children:"Unknown Press"}),Object(w.jsx)("dt",{className:"col-sm-3",children:"ISBN"}),Object(w.jsx)("dd",{className:"col-sm-9",children:t.isbn}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Category"}),Object(w.jsx)("dd",{className:"col-sm-9",children:t.type}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Stock"}),Object(w.jsx)("dd",{className:ve()("col-sm-9",{"text-danger":0===t.inventory}),children:t.inventory}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Price"}),Object(w.jsxs)("dd",{className:"col-sm-9 text-danger fw-bold",children:["\xa5",t.price]}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Introduction"}),Object(w.jsx)("dd",{className:"col-sm-9",children:t.description})]})})]}),Object(w.jsx)("div",{className:"my-3",children:Object(w.jsx)("div",{className:"d-flex justify-content-end",children:Object(w.jsxs)(fe.a,{className:"col-12 col-xl-6 col-lg-8",size:"lg",children:[Object(w.jsx)(y.a,{variant:"outline-danger",className:"w-100",disabled:0===t.inventory,onClick:Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=t.id.toString(),L("/cart/".concat(c));case 2:return e.next=4,n();case 4:case"end":return e.stop()}var c}),e)}))),children:"Add to Cart"}),Object(w.jsx)(y.a,{variant:"outline-danger",className:"w-100",as:l.b,to:"/checkout",children:"Checkout"})]})})})]})}var ge=n(246);function Ne(){var e=A("/books/");return Object(i.a)({books:e.error?void 0:e.data},e)}function ye(e){var t=e.match.params.id;return Object(w.jsxs)(Z,{children:[Object(w.jsx)(J,{active:"detail"}),Object(w.jsx)(V,{py:5,children:Object(w.jsx)(we,{id:t})})]})}function we(e){var t=function(e){var t=A("/books/".concat(e));return Object(i.a)({book:t.error?void 0:t.data},t)}(e.id).book;return t?Object(w.jsxs)("div",{children:[Object(w.jsx)(ke,{name:t.name}),Object(w.jsx)(m.b,{children:Object(w.jsxs)(_.a,{children:[Object(w.jsx)("div",{className:"col-md-5 col-lg-4 align-self-center",children:Object(w.jsx)(Oe,{book:t,withLink:!1})}),Object(w.jsx)("div",{className:"col-md-7 col-lg-8",children:Object(w.jsx)(pe,{book:t})})]})})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)(ke,{}),Object(w.jsx)(_.a,{className:"justify-content-center mt-5",children:Object(w.jsx)(ge.a,{animation:"border",variant:"primary"})})]})}function ke(e){var t=e.name,n=Object(o.g)();return Object(w.jsx)("nav",{children:Object(w.jsxs)("ol",{className:"breadcrumb h6",children:[Object(w.jsx)("li",{className:"breadcrumb-item",children:Object(w.jsx)(l.b,{to:"#",className:"",onClick:function(){return n.goBack()},children:"\u2b05 Go Back"})}),t?Object(w.jsx)("li",{className:"breadcrumb-item active",children:t}):Object(w.jsx)("li",{className:"breadcrumb-item",children:"..."})]})})}var Se=n(256);function Ce(){var e=function(){var e,t=A("/carousels/");return Object(i.a)({carousels:null!==(e=t.error?void 0:t.data)&&void 0!==e?e:[]},t)}().carousels.map((function(e){return function(e){return Object(w.jsx)(Se.a.Item,{children:Object(w.jsx)("img",{className:"d-block w-100",src:e,alt:e})},e)}(e)}));return Object(w.jsx)(m.b,{triggerOnce:!0,children:Object(w.jsx)(Se.a,{className:"mb-4",fade:!0,children:e})})}function Pe(){var e=Object(c.useContext)(Ae),t=e.total,n=e.page,a=e.setPage,r=Math.ceil(t/12),s=K()(K.a.range(1,r+1)).map((function(e){return Object(w.jsx)("li",{className:"page-item ".concat(e===n?"active":""),children:Object(w.jsx)("button",{className:"page-link",onClick:function(){return a(e)},children:e})},e)})).value();return Object(w.jsx)("div",{className:"py-5",id:"footer",children:Object(w.jsx)("nav",{children:Object(w.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(w.jsx)("li",{className:"page-item ".concat(1===n?"disabled":""),children:Object(w.jsx)("button",{className:"page-link",onClick:function(){return a(n-1)},children:"Previous"})}),s,Object(w.jsx)("li",{className:"page-item ".concat(n===r?"disabled":""),children:Object(w.jsx)("button",{className:"page-link",onClick:function(){return a(n+1)},children:"Next"})})]})})})}function Fe(){var e,t=Object(c.useContext)(Ae),n=t.setTotal,a=t.page,r=null!==(e=Object(o.h)().params.keyword)&&void 0!==e?e:"",s=Ne().books,i=K()(s).filter((function(e){return K()(e).values().join().includes(r)}));if(Object(c.useEffect)((function(){return n(i.size())})),!s)return Object(w.jsx)(_.a,{className:"justify-content-center mt-5",children:Object(w.jsx)(ge.a,{animation:"border",variant:"primary"})});var l=i.map((function(e){return Object(w.jsx)("div",{className:"col",children:Object(w.jsx)(Oe,{book:e,withLink:!0})},"book".concat(e.id))})).drop(12*(a-1)).take(12).value();return Object(w.jsx)("div",{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3",id:"books",children:Object(w.jsx)(m.b,{cascade:!0,damping:.025,triggerOnce:!0,children:l})})}var Ae=Object(c.createContext)(null);function Ie(){var e=Object(c.useState)(0),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(1),s=Object(b.a)(r,2),i=s[0],o=s[1];return Object(w.jsx)(Ae.Provider,{value:{total:n,setTotal:a,page:i,setPage:o},children:Object(w.jsxs)("div",{children:[Object(w.jsx)(Fe,{}),Object(w.jsx)(Pe,{})]})})}function Te(){return Object(w.jsxs)(Z,{children:[Object(w.jsx)(J,{active:"home"}),Object(w.jsx)(V,{children:Object(w.jsx)(Ee,{})})]})}function Ee(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(Ce,{}),Object(w.jsx)(Ie,{})]})}var Le=n(247);function Be(e){var t=e.isSignIn,n=function(e){return e?"Sign in":"Sign up"},c=n(t),a=n(!t),r=t?"/register":"/login";return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("h1",{className:"mb-3",children:[Object(w.jsx)("span",{className:"h1 fw-bold",children:c}),Object(w.jsx)("span",{className:"h4",children:" / "}),Object(w.jsx)(l.b,{className:"h5 fw-bold text-muted",to:r,children:a})]})})}function De(e){var t=e.isSignIn,n=e.children,c=e.onSubmit,a=e.isProcessing;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("main",{className:"form-signin",children:Object(w.jsxs)(m.b,{children:[Object(w.jsx)(Be,{isSignIn:t}),Object(w.jsxs)("form",{onSubmit:c,children:[n,Object(w.jsxs)(y.a,{className:"w-100 mt-3",variant:"dark",size:"lg",type:"submit",disabled:a,children:[a?"Signing ":"Sign ",t?"in":"up",a?"...":""]})]})]})})})}function Me(){var e=S(),t=e.signedOut,n=e.setSignedOut,a=U().revalidate,r=Object(o.g)(),s=Object(c.useState)(!1),l=Object(b.a)(s,2),d=l[0],m=l[1],h=Object(c.useState)(!1),O=Object(b.a)(h,2),x=O[0],v=O[1],p=Object(c.useState)(!1),N=Object(b.a)(p,2),y=N[0],k=N[1],C=Object(ie.a)({defaultValues:{username:"thunderboy",password:"reins1409"}}),P=C.register,F=C.handleSubmit;return Object(c.useEffect)((function(){var e=setTimeout((function(){n(!1),m(!1)}),5e3);return function(){clearTimeout(e),n(!1)}}),[n,d]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Le.a,{show:t,variant:"primary",className:"text-center h5",children:"You have signed out."}),Object(w.jsx)(Le.a,{show:d,variant:"danger",className:"text-center h5",children:"Your account has been banned by administrators."}),Object(w.jsxs)(De,{isSignIn:!0,onSubmit:F(function(){var e=Object(u.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),k(!1),e.next=4,M(t);case 4:return c=e.sent,e.next=7,a();case 7:v(!1),c.ok?(n(!1),r.push("/home")):403===c.status?m(!0):k(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),isProcessing:x,children:[Object(w.jsx)(f.a,{placement:"bottom-end",trigger:"focus",delay:300,overlay:Object(w.jsx)("div",{}),children:Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-first",placeholder:"Username",autoComplete:"username",required:!0,autoFocus:!0,isInvalid:y},P("username")))}),Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-last",placeholder:"Password",type:"password",required:!0,isInvalid:y},P("password"))),y?Object(w.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please try again."}):null,Object(w.jsx)(g.a.Switch,{className:"mt-3",label:"Remember me",defaultChecked:!0})]})]})}function qe(){return Object(w.jsxs)(Z,{children:[Object(w.jsx)(J,{active:"search"}),Object(w.jsx)(V,{children:Object(w.jsx)(Ue,{})})]})}function Ue(){var e,t=null!==(e=Object(o.h)().params.keyword)&&void 0!==e?e:"";return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"py-5",children:Object(w.jsxs)("span",{className:"h1",children:['Search Results for "',t,'"']})}),Object(w.jsx)(Ie,{})]})}var He=n(26),Ke=(n(163),n(142)),Re=n.n(Ke);function Je(e){var t=e.modalShow,n=e.setModalShow,c=e.title,a=void 0===c?"Error":c,r=e.children;return Object(w.jsxs)(se.a,{show:t,onHide:function(){return n(!1)},backdrop:"static",centered:!0,children:[Object(w.jsx)(se.a.Header,{closeButton:!0,children:Object(w.jsx)(se.a.Title,{children:a})}),Object(w.jsx)(se.a.Body,{children:r}),Object(w.jsx)(se.a.Footer,{children:Object(w.jsx)(y.a,{variant:"primary",onClick:function(){return n(!1)},children:"OK"})})]})}var Ge=n(39),Ye=n.n(Ge);function ze(e){return Object.entries(e).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&")}var Ve=function(){return Ye()().subtract(Object(Ge.duration)(7,"days"))},Ze=function(){return Ye()()};function We(e,t){return D("/admin/users/".concat(e),JSON.stringify(t))}function _e(e,t){return D("/admin/books/".concat(e),JSON.stringify(t))}function $e(e){return B("/admin/books/".concat(e))}var Qe=n(12),Xe=n(30),et=n(248),tt=n(249),nt=function(e){return"asc"===e.direction?Object(w.jsx)(et.a,{}):Object(w.jsx)(tt.a,{})},ct=function(e){var t=e.onSort,n=e.children,c=e.direction;return Object(w.jsxs)(y.a,{variant:"light",onClick:function(){return t({})},children:[Object(w.jsx)("span",{className:"fw-bold",children:n}),c&&Object(w.jsx)(nt,{direction:c})]})};function at(e){var t=e.rows,n=e.cols,a=e.onCommitChanges,r=e.booleanCols,s=e.disableEditingCols,i=void 0===s?["id"]:s,o=e.showAddCommand,l=void 0!==o&&o,d=e.showEditCommand,j=void 0!==d&&d,u=e.showDeleteCommand,b=void 0!==u&&u,m=Object(c.useRef)(i.map((function(e){return{columnName:e,editingEnabled:!1}})));return Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)(Xe.a,{rows:t,columns:n,getRowId:function(e){return e.id},children:[Object(w.jsx)(Qe.p,{}),Object(w.jsx)(Qe.j,{}),Object(w.jsx)(Qe.n,{defaultCurrentPage:0,pageSize:50}),Object(w.jsx)(Qe.k,{}),Object(w.jsx)(Qe.q,{defaultSorting:[{columnName:"id",direction:"asc"}]}),Object(w.jsx)(Qe.l,{}),Object(w.jsx)(it,{for:null!==r&&void 0!==r?r:[]}),Object(w.jsx)(Qe.d,{onCommitChanges:a,columnExtensions:m.current}),Object(w.jsx)(Xe.d,{}),Object(w.jsx)(Xe.i,{showSortingControls:!0,sortLabelComponent:ct}),Object(w.jsx)(Xe.g,{}),Object(w.jsx)(Xe.f,{showAddCommand:l,showEditCommand:j,showDeleteCommand:b}),Object(w.jsx)(Xe.j,{}),Object(w.jsx)(Xe.c,{}),Object(w.jsx)(Xe.b,{})]})})}var rt=function(e){var t=e.value;return Object(w.jsx)(g.a.Check,{type:"checkbox",checked:t,disabled:!0})},st=function(e){var t=e.value,n=e.onValueChange;return Object(w.jsx)(g.a.Check,{type:"checkbox",defaultChecked:t,onChange:function(e){return n(e.target.checked)}})},it=function(e){var t=e.for;return Object(w.jsx)(Qe.b,{formatterComponent:rt,editorComponent:st,for:t})};function ot(){var e=Ne(),t=e.books,n=e.revalidate,a=R().revalidate,r=K.a.values(t),s=["id","isbn","name","type","author","price","description","inventory","image"].map((function(e){return{name:e,title:Re()(e)}})),i=Object(c.useState)(!1),o=Object(b.a)(i,2),l=o[0],d=o[1],m=Object(c.useState)(),h=Object(b.a)(m,2),O=h[0],x=h[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Je,{modalShow:l,setModalShow:d,children:O?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h5",{children:'Error occurred while processing "'.concat(O.url,'":')}),Object(w.jsx)("p",{children:"".concat(O.status," ").concat(O.statusText)})]}):null}),Object(w.jsx)(at,{showAddCommand:!0,showDeleteCommand:!0,showEditCommand:!0,rows:r,cols:s,onCommitChanges:function(){var e=Object(u.a)(j.a.mark((function e(t){var c,r,s,i,o,l,u,m,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.added,r=t.changed,s=t.deleted,i=[],c&&(o=K()(c).map((function(e){return t=e,L("/admin/books/",JSON.stringify(t));var t})).value(),i.push.apply(i,Object(He.a)(o))),r&&(l=K()(r).entries().filter((function(e){var t=Object(b.a)(e,2);t[0];return!!t[1]})).map((function(e){var t=Object(b.a)(e,2);return _e(t[0],t[1])})).value(),i.push.apply(i,Object(He.a)(l))),s&&(u=K()(s).map((function(e){return $e(e.toString())})).value(),i.push.apply(i,Object(He.a)(u))),e.next=7,Promise.all(i);case 7:return m=e.sent,h=m.find((function(e){return!e.ok})),x(h),d(!!h),e.next=13,Promise.all([n(),a()]);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}function lt(){var e=function(){var e=A("/admin/users/");return Object(i.a)({users:e.error?void 0:e.data},e)}(),t=e.users,n=e.revalidate,a=K.a.values(t).map((function(e){return Object(i.a)({admin:e.type===I.admin},e)})),r=Object(c.useState)(!1),s=Object(b.a)(r,2),o=s[0],l=s[1],d=Object(c.useState)(),m=Object(b.a)(d,2),h=m[0],O=m[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Je,{modalShow:o,setModalShow:l,children:h?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h5",{children:'Error occurred while processing "'.concat(h.url,'":')}),Object(w.jsx)("p",{children:"".concat(h.status," ").concat(h.statusText)})]}):null}),Object(w.jsx)(at,{showEditCommand:!0,rows:a,cols:[{name:"id",title:"User ID"},{name:"username",title:"Username"},{name:"email",title:"Email"},{name:"admin",title:"Is Admin"},{name:"banned",title:"Is Banned"}],booleanCols:["admin","banned"],onCommitChanges:function(){var e=Object(u.a)(j.a.mark((function e(t){var c,a,r,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.changed,a=[],c&&(r=K()(c).entries().filter((function(e){var t=Object(b.a)(e,2);t[0];return!!t[1]})).map((function(e){var t=Object(b.a)(e,2),n=t[0],c=t[1];return We(n,Object(i.a)({type:void 0!==c.admin?c.admin?I.admin:I.normal:void 0},c))})).value(),a.push.apply(a,Object(He.a)(r))),e.next=5,Promise.all(a);case 5:return s=e.sent,o=s.find((function(e){return!e.ok})),O(o),l(!!o),e.next=11,n();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}function dt(e){var t=e.value,n=Ye()(t);return Object(w.jsx)(w.Fragment,{children:n.format("YYYY-MM-DD HH:mm:ss")})}function jt(e){var t=e.orders,n=e.showUser,c=void 0!==n&&n,a=t.map((function(e){var t,n;return Object(i.a)({userShow:"".concat(null===(t=e.user)||void 0===t?void 0:t.username," [").concat(null===(n=e.user)||void 0===n?void 0:n.id,"]")},e)})),r=[{name:"id",title:"Order ID"},{name:"createdAt",title:"Created At"},{name:"items",title:"Items"},{name:"totalPrice",title:"Total"},{name:"consignee",title:"Consignee"},{name:"status",title:"Status"}];c&&r.splice(1,0,{name:"userShow",title:"User"});var s=[{columnName:"createdAt",predicate:function(e,t){if(!t.value)return!0;var n=t.value.split(/,|~/).map((function(e){return e.trim()})),c=Ye()(e);return 1===n.length?c.isSameOrAfter(n[0]):c.isSameOrAfter(n[0])&&c.isBefore(n[1])}},{columnName:"items",predicate:function(e,t){return!t.value||e.map((function(e){return e.book.name})).filter((function(e){return e.indexOf(t.value)>=0})).length>0}}];return Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)(Xe.a,{rows:a,columns:r,getRowId:function(e){return e.id},children:[Object(w.jsx)(Qe.f,{}),Object(w.jsx)(Qe.j,{columnExtensions:s}),Object(w.jsx)(Qe.n,{defaultCurrentPage:0,pageSize:20}),Object(w.jsx)(Qe.k,{}),Object(w.jsx)(Qe.q,{defaultSorting:[{columnName:"id",direction:"asc"}]}),Object(w.jsx)(Qe.l,{}),Object(w.jsx)(Qe.b,{formatterComponent:function(e){var t=e.value.map((function(e){var t=e.book,n=e.quantity;return Object(w.jsx)(_.a,{children:Object(w.jsxs)(l.b,{to:"/detail/".concat(t.id),className:"d-flex nav-link",children:[Object(w.jsx)("span",{className:"me-auto",children:t.name}),Object(w.jsxs)("span",{className:"text-muted",children:["x",n]})]})},t.id)}));return Object(w.jsx)(w.Fragment,{children:t})},for:["items"]}),Object(w.jsx)(Qe.b,{formatterComponent:dt,for:["createdAt"]}),Object(w.jsx)(Xe.d,{}),Object(w.jsx)(Xe.e,{defaultColumnWidths:[{columnName:"id",width:120},{columnName:"userShow",width:150},{columnName:"createdAt",width:280},{columnName:"items",width:350},{columnName:"totalPrice",width:100},{columnName:"consignee",width:150},{columnName:"status",width:100}]}),Object(w.jsx)(Xe.i,{showSortingControls:!0,sortLabelComponent:ct}),Object(w.jsx)(Xe.h,{}),Object(w.jsx)(Xe.b,{})]})})}function ut(){var e=function(){var e,t=A("/admin/orders/");return Object(i.a)({orders:null!==(e=t.error?void 0:t.data)&&void 0!==e?e:[]},t)}().orders;return Object(w.jsx)(jt,{orders:e,showUser:!0})}var bt,mt=n(250),ht=n(251),Ot=n(72),xt=n(145),vt=n.n(xt);n(182),n(183);function ft(e){var t=e.initial,n=e.onChange,a=Object(c.useState)(t),r=Object(b.a)(a,2),s=r[0],i=r[1];return Object(w.jsx)(vt.a,{selected:s.toDate(),onChange:function(e){i(Ye()(null===e||void 0===e?void 0:e.toString())),n(Ye()(null===e||void 0===e?void 0:e.toString()))},showTimeInput:!0,showTimeSelect:!0,dateFormat:"Pp"})}function pt(e){var t=e.onChange,n=Object(c.useRef)(Ve()),a=Object(c.useRef)(Ze()),r=function(){return t({from:n.current,to:a.current})};return Object(c.useEffect)((function(){r()})),Object(w.jsxs)(g.a,{className:"mx-4 my-4",children:[Object(w.jsxs)(g.a.Group,{as:_.a,className:"mb-2",controlId:"formFrom",children:[Object(w.jsx)(g.a.Label,{column:!0,md:"1",xs:"2",children:"From"}),Object(w.jsx)($.a,{lg:"3",sm:"7",xs:"10",children:Object(w.jsx)(ft,{initial:n.current,onChange:function(e){n.current=e,r()}})})]}),Object(w.jsxs)(g.a.Group,{as:_.a,className:"mb-2",controlId:"formTo",children:[Object(w.jsx)(g.a.Label,{column:!0,md:"1",xs:"2",children:"To"}),Object(w.jsx)($.a,{lg:"3",sm:"7",xs:"10",children:Object(w.jsx)(ft,{initial:a.current,onChange:function(e){a.current=e,r()}})})]})]})}function gt(){var e,t,n=Object(c.useState)(Ve()),a=Object(b.a)(n,2),r=a[0],s=a[1],l=Object(c.useState)(Ze()),d=Object(b.a)(l,2),j=d[0],u=d[1],m=function(e,t){var n=A("/admin/stat/sales?"+ze({from:null===e||void 0===e?void 0:e.toISOString(),to:null===t||void 0===t?void 0:t.toISOString()}));return Object(i.a)({sales:n.error?void 0:n.data},n)}(r,j).sales,h=Object(o.g)(),O=null!==(e=null===m||void 0===m?void 0:m.map((function(e){return e.book})))&&void 0!==e?e:[],x=null!==(t=null===m||void 0===m?void 0:m.map((function(e){return e.count})))&&void 0!==t?t:[],v={title:{text:"Sales Summary"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:O.map((function(e){return e.name})).reverse()},series:[{type:"bar",data:x.reverse()}]};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(pt,{onChange:function(e){s(e.from),u(e.to)}}),Object(w.jsx)(Ot.a,{style:{height:60*O.length+80},option:v,onEvents:{click:function(e){var t=e.name,n=O.find((function(e){return e.name===t}));n&&h.push("/detail/".concat(n.id))}}})]})}function Nt(){var e,t,n=Object(c.useState)(Ve()),a=Object(b.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(Ze()),l=Object(b.a)(o,2),d=l[0],j=l[1],u=function(e,t){var n=A("/admin/stat/spendings?"+ze({from:null===e||void 0===e?void 0:e.toISOString(),to:null===t||void 0===t?void 0:t.toISOString()}));return Object(i.a)({userSpendings:n.error?void 0:n.data},n)}(r,d).userSpendings,m=null!==(e=null===u||void 0===u?void 0:u.map((function(e){return e.user})))&&void 0!==e?e:[],h=null!==(t=null===u||void 0===u?void 0:u.map((function(e){return e.spending})))&&void 0!==t?t:[],O={title:{text:"User Spendings Summary"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:m.map((function(e){return"".concat(e.username," [").concat(e.id,"]")})).reverse()},series:[{type:"bar",data:h.reverse()}],responsive:!0};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(pt,{onChange:function(e){s(e.from),j(e.to)}}),Object(w.jsx)(Ot.a,{style:{height:60*m.length+80},option:O})]})}function yt(){return Object(w.jsxs)(Z,{children:[Object(w.jsx)(J,{active:"dashboard"}),Object(w.jsx)(V,{children:Object(w.jsx)(wt,{})})]})}function wt(){var e,t=null!==(e=Object(o.h)().params.tab)&&void 0!==e?e:"books",n=Object(o.g)();return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"h1 mb-4",children:"Dashboard"}),Object(w.jsxs)(mt.a,{activeKey:t,onSelect:function(e){var t=null!==e&&void 0!==e?e:"books";n.replace("/dashboard/".concat(t))},className:"mb-3",children:[Object(w.jsx)(ht.a,{eventKey:"books",title:"Books",children:Object(w.jsx)(ot,{})}),Object(w.jsx)(ht.a,{eventKey:"users",title:"Users",children:Object(w.jsx)(lt,{})}),Object(w.jsx)(ht.a,{eventKey:"orders",title:"Orders",children:Object(w.jsx)(ut,{})}),Object(w.jsx)(ht.a,{eventKey:"sales",title:"Sales",children:Object(w.jsx)(gt,{})}),Object(w.jsx)(ht.a,{eventKey:"spendings",title:"User Spendings",children:Object(w.jsx)(Nt,{})})]})]})}function kt(){var e,t,n,a=S().setSignedOut,r=U().revalidate,s=Object(o.g)(),l=Object(c.useState)(!1),d=Object(b.a)(l,2),m=d[0],h=d[1],O=Object(c.useState)(!1),x=Object(b.a)(O,2),v=x[0],f=x[1],p=Object(ie.a)(),N=p.register,y=p.handleSubmit,k=p.watch,C=p.formState.errors,P=k("password");return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(De,{isSignIn:!1,onSubmit:y(function(){var e=Object(u.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,q({username:t.username,email:t.email,password:t.password});case 3:return n=e.sent,e.next=6,r();case 6:h(!1),n.ok?(a(!1),s.push("/home")):f(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),isProcessing:m,children:[Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-first",placeholder:"Username",autoComplete:"username",required:!0,isInvalid:v},N("username"))),Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-mid",placeholder:"Email",autoComplete:"email",required:!0,isInvalid:!!C.email},N("email",{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Please provide a valid email address."}}))),Object(w.jsx)(g.a.Control.Feedback,{type:"invalid",children:null===(e=C.email)||void 0===e?void 0:e.message}),Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-mid",placeholder:"Password",type:"password",autoComplete:"new-password",required:!0,isInvalid:!!C.password},N("password",{minLength:{value:4,message:"Password must have at least 4 characters."}}))),Object(w.jsx)(g.a.Control.Feedback,{type:"invalid",children:null===(t=C.password)||void 0===t?void 0:t.message}),Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-last",placeholder:"Confirm Password",type:"password",autoComplete:"new-password",required:!0,isInvalid:!!C.confirmPassword},N("confirmPassword",{validate:function(e){return e===P||"The passwords do not match."}}))),Object(w.jsx)(g.a.Control.Feedback,{type:"invalid",children:null===(n=C.confirmPassword)||void 0===n?void 0:n.message}),v?Object(w.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please try again."}):null,Object(w.jsx)(g.a.Check,{type:"checkbox",className:"mt-3",label:"Agree to terms and privacy policy",id:"accept-privacy-policy",defaultChecked:!0})]})})}function St(){var e,t,n=Object(c.useState)(Ve()),a=Object(b.a)(n,2),r=a[0],s=a[1],l=Object(c.useState)(Ze()),d=Object(b.a)(l,2),j=d[0],u=d[1],m=function(e,t){var n=A("/stat/summary?"+ze({from:null===e||void 0===e?void 0:e.toISOString(),to:null===t||void 0===t?void 0:t.toISOString()}));return Object(i.a)({summary:n.error?void 0:n.data},n)}(r,j).summary,h=Object(o.g)(),O=null!==(e=null===m||void 0===m?void 0:m.books)&&void 0!==e?e:[],x=K()(O).map((function(e){return e.count})).sum(),v=null!==(t=null===m||void 0===m?void 0:m.total)&&void 0!==t?t:0,f={title:{text:"".concat(x," books, \xa5").concat(v," in total")},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:O.map((function(e){return e.book.name})).reverse()},series:[{type:"bar",data:O.map((function(e){return e.count})).reverse()}]};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(pt,{onChange:function(e){s(e.from),u(e.to)}}),Object(w.jsx)(Ot.a,{style:{height:60*O.length+80},option:f,onEvents:{click:function(e){var t,n=e.name,c=null===(t=O.find((function(e){return e.book.name===n})))||void 0===t?void 0:t.book;c&&h.push("/detail/".concat(c.id))}}})]})}function Ct(){return Object(w.jsxs)(Z,{children:[Object(w.jsx)(J,{active:"orders"}),Object(w.jsx)(V,{children:Object(w.jsx)(Pt,{})})]})}function Pt(){var e,t=null!==(e=Object(o.h)().params.tab)&&void 0!==e?e:"all",n=Object(o.g)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"h1 mb-4",children:"My Orders"}),Object(w.jsxs)(mt.a,{activeKey:t,onSelect:function(e){var t=null!==e&&void 0!==e?e:"books";n.replace("/orders/".concat(t))},className:"mb-3",children:[Object(w.jsx)(ht.a,{eventKey:"all",title:"All Orders",children:Object(w.jsx)(Ft,{})}),Object(w.jsx)(ht.a,{eventKey:"summary",title:"Summary",children:Object(w.jsx)(St,{})})]})]})}function Ft(){var e=function(){var e,t=A("/orders/");return Object(i.a)({orders:null!==(e=t.error?void 0:t.data)&&void 0!==e?e:[]},t)}().orders;return Object(w.jsx)(jt,{orders:e})}function At(e){return U().error?Object(w.jsx)(o.a,{to:"/login"}):Object(w.jsx)(o.b,Object(i.a)(Object(i.a)({},e),{},{children:e.children}))}function It(e){var t=U(),n=t.isAdmin;return t.error||!1===n?Object(w.jsx)(o.a,{to:"/home"}):Object(w.jsx)(o.b,Object(i.a)(Object(i.a)({},e),{},{children:e.children}))}function Tt(){return Object(w.jsx)(l.a,{children:Object(w.jsxs)(o.d,{children:[Object(w.jsx)(o.b,{exact:!0,path:"/",children:Object(w.jsx)(o.a,{to:"/home"})}),Object(w.jsx)(o.b,{path:"/login",component:Me}),Object(w.jsx)(o.b,{path:"/register",component:kt}),Object(w.jsx)(At,{path:"/checkout",component:me}),Object(w.jsx)(At,{path:"/detail/:id",component:ye}),Object(w.jsx)(At,{path:"/home",component:Te}),Object(w.jsx)(At,{path:"/search/:keyword?",component:qe}),Object(w.jsx)(At,{path:"/orders/:tab?",component:Ct}),Object(w.jsx)(It,{path:"/dashboard/:tab?",component:yt})]})})}!function(e){e.submitted="submitted",e.shipped="shipped",e.delivered="delivered",e.cancelled="cancelled"}(bt||(bt={}));var Et=function(){return Object(w.jsx)(C,{children:Object(w.jsx)(Tt,{})})},Lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,259)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};n(226);s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(Et,{})}),document.getElementById("root")),Lt()}},[[227,1,2]]]);
//# sourceMappingURL=main.8beacae0.chunk.js.map