(this["webpackJsonpbookstore-frontend"]=this["webpackJsonpbookstore-frontend"]||[]).push([[0],{140:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c.n(s),n=c(17),r=c.n(n),i=c(14),l=c(19),o=c(16),d=c(10),j=c.n(d),b=c(18),u=c(13),m=c(31),h=c(161),O=c(146),x=c(101),v=c(147),p=c(158),f=c(148),g=c(160),N=c(102),k=c(149),w=c(1),y=Object(s.createContext)(void 0);function C(){return Object(s.useContext)(y)}function S(e){var t=Object(s.useState)(!1),c=Object(u.a)(t,2),a=c[0],n=c[1];return Object(w.jsx)(y.Provider,{value:{signedOut:a,setSignedOut:n},children:e.children})}var P=c(107),F="/api";function I(e){var t=function(){var e=Object(b.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((c=e.sent).ok){e.next=5;break}throw c;case 5:return e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=F+e;return Object(P.a)(c,t)}var T,B={"Content-type":"application/json; charset=UTF-8"};function L(e,t){return fetch(F+e,{method:"POST",body:t,headers:B})}function A(e,t){return fetch(F+e,{method:"DELETE",body:t,headers:B})}function D(e){return L("/users/login",JSON.stringify(e))}function q(e){return L("/users/register",JSON.stringify(e))}function M(){var e=I("/users/check"),t=e.data&&!e.error?e.data.user_type===T.admin:void 0;return Object(i.a)({isAdmin:t},e)}!function(e){e[e.admin=0]="admin",e[e.normal=1]="normal"}(T||(T={}));var E=c(24),U=c.n(E);function H(){var e,t,c,s,a,n,r=I("/cart/"),l=r.data&&!r.error?U()(r.data.books).map((function(e){return e.count})).sum():0;return Object(i.a)({books:null!==(e=r.error||null===(t=r.data)||void 0===t?void 0:t.books)&&void 0!==e?e:[],discount:null!==(c=r.error||null===(s=r.data)||void 0===s?void 0:s.discount)&&void 0!==c?c:0,total:null!==(a=r.error||null===(n=r.data)||void 0===n?void 0:n.total)&&void 0!==a?a:0,cartCount:l},r)}function z(e){return t="/cart/".concat(e),fetch(F+t,{method:"PUT",body:c,headers:B});var t,c}function J(e){var t,c,s=e.active,a=H().cartCount,n=null!==(t=M().isAdmin)&&void 0!==t&&t,r=null!==(c=Object(l.h)().params.keyword)&&void 0!==c?c:"";return Object(w.jsx)(h.a,{bg:"white",expand:"lg",className:"shadow-sm fixed-top",children:Object(w.jsxs)(O.a,{children:[Object(w.jsx)(h.a.Brand,{className:"fw-bolder",as:o.b,to:"/home",children:"Book Store"}),Object(w.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(w.jsxs)(h.a.Collapse,{id:"basic-navbar-nav",children:[Object(w.jsxs)(x.a,{className:"me-auto",children:[Object(w.jsx)(x.a.Link,{as:o.b,to:"/home",active:"home"===s||"detail"===s||"search"===s,children:"Books"}),Object(w.jsx)(x.a.Link,{as:o.b,to:"/checkout",active:"cart"===s,children:Object(w.jsxs)("div",{className:"d-flex align-items-center",children:[Object(w.jsx)("span",{className:"me-1",children:"My Cart"}),Object(w.jsx)(m.a,{children:Object(w.jsx)(v.a,{bg:0===a?"secondary":"danger",pill:!0,children:a})})]})}),Object(w.jsx)(x.a.Link,{as:o.b,to:"/orders",active:"orders"===s,children:"My Orders"}),Object(w.jsx)(R,{})]}),Object(w.jsx)(G,{initial:r}),n?Object(w.jsx)(V,{active:s}):null]})]})})}function R(){var e,t=C().setSignedOut,c=Object(l.g)(),s=M(),a=s.data,n=s.revalidate;return Object(w.jsx)(p.a,{overlay:Object(w.jsx)(f.a,{id:"signout-tooltip",children:"Click to sign out"}),placement:"auto",children:Object(w.jsxs)(x.a.Link,{onClick:Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/users/logout");case 2:return e.next=4,n();case 4:t(!0),c.push("/login");case 6:case"end":return e.stop()}}),e)}))),children:[Object(w.jsx)("span",{children:"Hi, "}),Object(w.jsx)("span",{className:"fw-bold",children:null!==(e=null===a||void 0===a?void 0:a.username)&&void 0!==e?e:"???"})]})})}function G(e){var t=e.initial,c=void 0===t?"":t,a=Object(s.useRef)(null),n=Object(l.g)();return Object(w.jsxs)(g.a,{className:"d-flex mb-2 mb-lg-0",onSubmit:function(){var e=a.current.value;e.length>0&&n.push("/search/".concat(e))},children:[Object(w.jsx)(N.a,{className:"form-control me-2",type:"search",placeholder:"Search Books...",defaultValue:c,ref:a}),Object(w.jsx)(k.a,{variant:"outline-secondary",type:"submit",children:"Search"})]})}function V(e){var t=e.active;return Object(w.jsx)("div",{className:"ms-lg-2 d-flex",children:"dashboard"===t?Object(w.jsx)(k.a,{as:o.b,to:"/home",variant:"success",className:"w-100",children:"Book Store"}):Object(w.jsx)(k.a,{as:o.b,to:"/dashboard",variant:"primary",className:"w-100",children:"Dashboard"})})}function _(e){var t=e.py,c=void 0===t?4:t,s=e.children;return Object(w.jsx)("main",{className:"py-".concat(c," container"),children:s})}function K(e){return Object(w.jsx)("div",{className:"store-home",children:e.children})}var Y=c(164),W=c(150),Z=c(103),Q=c(151);function X(e){var t=e.book,c=e.count,s="/detail/".concat(t.id),a=H().revalidate;return Object(w.jsx)(Y.a.Item,{as:o.b,to:s,style:{color:"inherit",textDecoration:"inherit"},action:!0,children:Object(w.jsxs)(W.a,{className:"d-flex justify-content-between",children:[Object(w.jsx)(Z.a,{xs:3,children:Object(w.jsx)(Q.a,{src:t.image,fluid:!0})}),Object(w.jsxs)(Z.a,{className:"d-flex align-items-center",children:[Object(w.jsxs)("div",{className:"me-auto",children:[Object(w.jsx)("h6",{className:"mb-0",children:t.name}),Object(w.jsx)("small",{className:"text-muted",children:t.author})]}),Object(w.jsxs)("div",{className:"me-3",children:[Object(w.jsxs)("span",{className:"h5",children:["\xa5",t.price]}),c>1?Object(w.jsxs)("span",{className:"text-muted",children:[" x",c]}):null]}),Object(w.jsx)(v.a,{pill:!0,as:k.a,variant:"danger",onClick:function(){var e=Object(b.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,s=t.id.toString(),A("/cart/".concat(s));case 3:return e.next=5,a();case 5:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"\u2014"})]})]})})}function $(e){var t=e.title,c=e.value,s="Discount"===t?"text-danger":"fw-bold",a="Discount"===t?"-\xa5":"\xa5";return Object(w.jsx)(Y.a.Item,{children:Object(w.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(w.jsx)("div",{children:Object(w.jsx)("span",{className:"h6",children:t})}),Object(w.jsx)("div",{children:Object(w.jsxs)("span",{className:"h5 ".concat(s),children:[a,c.toFixed(2)]})})]})})}function ee(){var e=H(),t=e.books,c=e.cartCount,s=e.discount,a=e.total,n=e.revalidate,r=U()(t).map((function(e){return Object(w.jsx)(X,{book:e.book,count:e.count},e.book.id)})).value();return Object(w.jsxs)("div",{children:[Object(w.jsxs)("h4",{className:"d-flex align-items-center mb-3",children:[Object(w.jsx)("span",{className:"text-muted me-2",children:"My cart"}),Object(w.jsx)(v.a,{pill:!0,bg:"secondary",className:"me-auto",children:c}),c>0?Object(w.jsx)(v.a,{pill:!0,as:k.a,variant:"danger",onClick:Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("/cart/");case 2:return e.next=4,n();case 4:case"end":return e.stop()}}),e)}))),children:"Clear"}):null]}),Object(w.jsxs)("ul",{className:"list-group mb-3",children:[r,Object(w.jsx)($,{title:"Discount",value:s}),Object(w.jsx)($,{title:"Total",value:a})]})]})}var te=Object(s.createContext)(null);function ce(e){var t=e.name,c=e.children,a=Object(s.useContext)(te),n=a.selected,r=a.setSelected;return Object(w.jsx)("button",{onClick:function(){return r(t)},className:"list-group-item list-group-item-action ".concat(n===t?"active":""),children:Object(w.jsxs)("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[Object(w.jsx)("span",{children:t}),c]})})}function se(){return Object(w.jsx)("div",{className:"col",children:Object(w.jsxs)("div",{className:"row gy-2",children:[Object(w.jsxs)("div",{className:"col-md-6",children:[Object(w.jsx)("label",{htmlFor:"cc-name",className:"form-label",children:"Name on card"}),Object(w.jsx)("input",{type:"text",className:"form-control",id:"cc-name",placeholder:"",required:!0})]}),Object(w.jsxs)("div",{className:"col-md-6",children:[Object(w.jsx)("label",{htmlFor:"cc-number",className:"form-label",children:"Card number"}),Object(w.jsx)("input",{type:"text",className:"form-control",id:"cc-number",placeholder:"",required:!0})]}),Object(w.jsxs)("div",{className:"col-md-6",children:[Object(w.jsx)("label",{htmlFor:"cc-expiration",className:"form-label",children:"Expiration"}),Object(w.jsx)("input",{type:"text",className:"form-control",id:"cc-expiration",placeholder:"",required:!0})]}),Object(w.jsxs)("div",{className:"col-md-6",children:[Object(w.jsx)("label",{htmlFor:"cc-cvv",className:"form-label",children:"CVV"}),Object(w.jsx)("input",{type:"text",className:"form-control",id:"cc-cvv",placeholder:"",required:!0})]})]})})}function ae(){var e=Object(s.useState)("Credit card"),t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(w.jsx)(te.Provider,{value:{selected:c,setSelected:a},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{className:"mb-3",children:"Payment"}),Object(w.jsxs)("div",{className:"row gy-2",children:[Object(w.jsx)("div",{className:"col-lg-5 col-xxl-4",children:Object(w.jsxs)("div",{className:"list-group",children:[Object(w.jsx)(ce,{name:"PayPal"}),Object(w.jsx)(ce,{name:"WeChat Pay",children:Object(w.jsx)("span",{className:"badge bg-success rounded-pill",children:"Recommended"})}),Object(w.jsx)(ce,{name:"Alipay"}),Object(w.jsx)(ce,{name:"Credit card",children:Object(w.jsx)("span",{className:"badge bg-secondary rounded-pill",children:"Last used"})})]})}),"Credit card"===c?Object(w.jsx)(se,{}):Object(w.jsxs)("div",{className:"col",children:["You'll be redirected to ",c,' after clicking "Checkout".']})]})]})})}var ne=c(159),re=c(55),ie=Object(s.createContext)(void 0);function le(e){var t,c=e.address,a="Default"===c.tag?"bg-secondary":"bg-success",n=Object(s.useContext)(ie),r=n.selected,i=n.setSelected;return Object(w.jsxs)("button",{onClick:function(){return i(c)},className:"list-group-item list-group-item-action ".concat((null!==(t=null===r||void 0===r?void 0:r.id)&&void 0!==t?t:0)===c.id?"active":""),children:[Object(w.jsxs)("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[Object(w.jsx)("h5",{className:"mb-1",children:c.name}),Object(w.jsx)("span",{className:"badge ".concat(a," rounded-pill"),children:c.tag})]}),Object(w.jsx)("p",{className:"mb-0 small",children:c.phone}),Object(w.jsx)("p",{className:"mb-0",children:c.address})]})}function oe(){var e=Object(s.useContext)(ie),t=e.modalShow,c=e.setModalShow,a=Object(re.a)(),n=a.register,r=a.handleSubmit;return Object(w.jsxs)(ne.a,{show:t,size:"lg",onHide:function(){return c(!1)},backdrop:"static",centered:!0,children:[Object(w.jsx)(ne.a.Header,{closeButton:!0,children:Object(w.jsx)(ne.a.Title,{children:"Add a New Address"})}),Object(w.jsx)(ne.a.Body,{children:Object(w.jsxs)(g.a,{onSubmit:r((function(e){alert(JSON.stringify(e)),c(!1)})),id:"add-new-address-form",children:[Object(w.jsxs)(g.a.Group,{as:W.a,className:"mb-3",children:[Object(w.jsx)(g.a.Label,{column:!0,sm:3,children:"Name"}),Object(w.jsx)(Z.a,{sm:9,children:Object(w.jsx)(g.a.Control,Object(i.a)({placeholder:"Enter full name",required:!0},n("name")))})]}),Object(w.jsxs)(g.a.Group,{as:W.a,className:"mb-3",children:[Object(w.jsx)(g.a.Label,{column:!0,sm:3,children:"Phone Number"}),Object(w.jsx)(Z.a,{sm:9,children:Object(w.jsx)(g.a.Control,Object(i.a)({placeholder:"Enter phone number",required:!0},n("phone")))})]}),Object(w.jsxs)(g.a.Group,{as:W.a,className:"mb-3",children:[Object(w.jsx)(g.a.Label,{column:!0,sm:3,children:"Address"}),Object(w.jsx)(Z.a,{sm:9,children:Object(w.jsx)(g.a.Control,Object(i.a)({as:"textarea",placeholder:"Enter address",required:!0},n("address")))})]}),Object(w.jsx)(g.a.Group,{className:"mb-3",children:Object(w.jsx)(g.a.Check,{type:"checkbox",label:"Set as default",id:"set-as-default"})})]})}),Object(w.jsx)(ne.a.Footer,{children:Object(w.jsx)(k.a,{variant:"primary",type:"submit",form:"add-new-address-form",children:"Confirm"})})]})}function de(){var e=Object(s.useContext)(ie).setModalShow;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("button",{className:"list-group-item list-group-item-action",onClick:function(){return e(!0)},children:Object(w.jsx)("span",{className:"text-muted",children:"Add a new address..."})})})}function je(){var e=Object(s.useState)(),t=Object(u.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)(!1),r=Object(u.a)(n,2),i=r[0],l=r[1];return Object(w.jsx)(ie.Provider,{value:{selected:c,setSelected:a,modalShow:i,setModalShow:l},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{className:"mb-3",children:"Shipping Address"}),Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"list-group",children:[Object(w.jsx)(le,{address:{id:0,name:"Bugen Zhao",tag:"Default",phone:"+86 155 2121 2121",address:"1234 Main St., Minhang, Shanghai, China"}}),Object(w.jsx)(le,{address:{id:1,name:"Alice Cook",tag:"Home",phone:"+1 802 812 3456",address:"4321 Home St., Cupertino, CA, United States"}}),Object(w.jsx)(le,{address:{id:2,name:"Dave Jobs",tag:"School",phone:"+86 188 1234 5678",address:"9876 School St., Shanghai, China"}}),Object(w.jsx)(de,{}),Object(w.jsx)(oe,{})]})})]})})}function be(){var e=H(),t=e.cartCount,c=e.revalidate,a=Object(s.useState)(!1),n=Object(u.a)(a,2),r=n[0],i=n[1],l=Object(s.useState)(!1),d=Object(u.a)(l,2),m=d[0],h=d[1],O=0===t;return Object(w.jsxs)("div",{children:[Object(w.jsxs)(ne.a,{show:r,onHide:function(){i(!1),h(!1)},children:[Object(w.jsx)(ne.a.Header,{closeButton:!0,children:Object(w.jsx)(ne.a.Title,{children:"Checkout Success"})}),Object(w.jsxs)(ne.a.Body,{children:["Go to ",Object(w.jsx)(o.b,{to:"/orders",children:"My Orders"})," to check the order."]})]}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col-md-6 col-lg-5 order-md-last",children:Object(w.jsx)(ee,{})}),Object(w.jsxs)("div",{className:"col-md-6 col-lg-7",children:[Object(w.jsx)(je,{}),Object(w.jsx)("hr",{className:"my-4"}),Object(w.jsx)(ae,{}),Object(w.jsx)("hr",{className:"my-4"}),Object(w.jsx)("div",{className:"d-flex justify-content-end",children:Object(w.jsx)(p.a,{overlay:Object(w.jsx)(f.a,{id:"no-book-tooltip",children:"There's no book in the cart"}),placement:"bottom",show:O,children:Object(w.jsx)("button",{className:"btn btn-primary btn-lg col-12 col-lg-3",type:"submit",disabled:m||O,onClick:Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,L("/cart/checkout");case 3:return t=e.sent,e.next=6,c();case 6:t.ok&&i(!0),h(!1);case 8:case"end":return e.stop()}}),e)}))),children:m?"Processing...":"Checkout"})})})]})]})]})}function ue(){return Object(w.jsxs)(K,{children:[Object(w.jsx)(J,{active:"cart"}),Object(w.jsx)(_,{py:5,children:Object(w.jsx)(m.b,{children:Object(w.jsx)(be,{})})})]})}var me=c(163);function he(e){var t=e.book,c=e.withLink,s=void 0===c||c,a="/detail/".concat(t.id);return Object(w.jsxs)(me.a,{children:[s?Object(w.jsx)(me.a.Link,{className:"stretched-link",as:o.b,to:a}):null,Object(w.jsx)(me.a.Img,{variant:"top",src:t.image}),Object(w.jsxs)(me.a.Body,{children:[Object(w.jsx)(me.a.Title,{className:"text-truncate",children:t.name}),Object(w.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(w.jsxs)(me.a.Subtitle,{className:"text-danger",as:"h6",children:["\xa5",t.price]}),Object(w.jsxs)(me.a.Subtitle,{className:"text-muted",as:"small",children:[t.inventory,"+"]})]})]})]})}var Oe=c(152);function xe(e){var t=e.book,c=H().revalidate;return Object(w.jsxs)("div",{className:"d-flex flex-column justify-content-between",style:{height:"100%"},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{className:"h2 my-3",children:t.name}),Object(w.jsx)("div",{className:"mb-3",children:Object(w.jsxs)("dl",{className:"row",children:[Object(w.jsx)("dt",{className:"col-sm-3",children:"Author"}),Object(w.jsx)("dd",{className:"col-sm-9",children:t.author}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Press"}),Object(w.jsx)("dd",{className:"col-sm-9",children:"Unknown Press"}),Object(w.jsx)("dt",{className:"col-sm-3",children:"ISBN"}),Object(w.jsx)("dd",{className:"col-sm-9",children:t.isbn}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Category"}),Object(w.jsx)("dd",{className:"col-sm-9",children:t.type}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Stock"}),Object(w.jsxs)("dd",{className:"col-sm-9",children:[t.inventory,"+"]}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Price"}),Object(w.jsxs)("dd",{className:"col-sm-9 text-danger fw-bold",children:["\xa5",t.price]}),Object(w.jsx)("dt",{className:"col-sm-3",children:"Introduction"}),Object(w.jsx)("dd",{className:"col-sm-9",children:t.description})]})})]}),Object(w.jsx)("div",{className:"my-3",children:Object(w.jsx)("div",{className:"d-flex justify-content-end",children:Object(w.jsxs)(Oe.a,{className:"col-12 col-xl-6 col-lg-8",size:"lg",children:[Object(w.jsx)(k.a,{variant:"outline-danger",className:"w-100",onClick:Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t.id.toString());case 2:return e.next=4,c();case 4:case"end":return e.stop()}}),e)}))),children:"Add to Cart"}),Object(w.jsx)(k.a,{variant:"outline-danger",className:"w-100",as:o.b,to:"/checkout",children:"Checkout"})]})})})]})}var ve=c(153);function pe(){var e=I("/books/");return Object(i.a)({books:e.error?void 0:e.data},e)}function fe(e){var t=e.match.params.id;return Object(w.jsxs)(K,{children:[Object(w.jsx)(J,{active:"detail"}),Object(w.jsx)(_,{py:5,children:Object(w.jsx)(ge,{id:t})})]})}function ge(e){var t=function(e){var t=I("/books/".concat(e));return Object(i.a)({book:t.error?void 0:t.data},t)}(e.id).book;return t?Object(w.jsxs)("div",{children:[Object(w.jsx)(Ne,{name:t.name}),Object(w.jsx)(m.b,{children:Object(w.jsxs)(W.a,{children:[Object(w.jsx)("div",{className:"col-md-5 col-lg-4 align-self-center",children:Object(w.jsx)(he,{book:t,withLink:!1})}),Object(w.jsx)("div",{className:"col-md-7 col-lg-8",children:Object(w.jsx)(xe,{book:t})})]})})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)(Ne,{}),Object(w.jsx)(W.a,{className:"justify-content-center mt-5",children:Object(w.jsx)(ve.a,{animation:"border",variant:"primary"})})]})}function Ne(e){var t=e.name,c=Object(l.g)();return Object(w.jsx)("nav",{children:Object(w.jsxs)("ol",{className:"breadcrumb h6",children:[Object(w.jsx)("li",{className:"breadcrumb-item",children:Object(w.jsx)(o.b,{to:"#",className:"",onClick:function(){return c.goBack()},children:"Books"})}),t?Object(w.jsx)("li",{className:"breadcrumb-item active",children:t}):Object(w.jsx)("li",{className:"breadcrumb-item",children:"..."})]})})}var ke=c(162);function we(){var e=function(){var e,t=I("/carousels/");return Object(i.a)({carousels:null!==(e=t.error?void 0:t.data)&&void 0!==e?e:[]},t)}().carousels.map((function(e){return function(e){return Object(w.jsx)(ke.a.Item,{children:Object(w.jsx)("img",{className:"d-block w-100",src:e,alt:e})},e)}(e)}));return Object(w.jsx)(m.b,{triggerOnce:!0,children:Object(w.jsx)(ke.a,{className:"mb-4",fade:!0,children:e})})}function ye(){var e=Object(s.useContext)(Se),t=e.total,c=e.page,a=e.setPage,n=Math.ceil(t/12),r=U()(U.a.range(1,n+1)).map((function(e){return Object(w.jsx)("li",{className:"page-item ".concat(e===c?"active":""),children:Object(w.jsx)("button",{className:"page-link",onClick:function(){return a(e)},children:e})},e)})).value();return Object(w.jsx)("div",{className:"py-5",id:"footer",children:Object(w.jsx)("nav",{children:Object(w.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(w.jsx)("li",{className:"page-item ".concat(1===c?"disabled":""),children:Object(w.jsx)("button",{className:"page-link",onClick:function(){return a(c-1)},children:"Previous"})}),r,Object(w.jsx)("li",{className:"page-item ".concat(c===n?"disabled":""),children:Object(w.jsx)("button",{className:"page-link",onClick:function(){return a(c+1)},children:"Next"})})]})})})}function Ce(){var e,t=Object(s.useContext)(Se),c=t.setTotal,a=t.page,n=null!==(e=Object(l.h)().params.keyword)&&void 0!==e?e:"",r=pe().books,i=U()(r).filter((function(e){return U()(e).values().join().includes(n)}));if(Object(s.useEffect)((function(){return c(i.size())})),!r)return Object(w.jsx)(W.a,{className:"justify-content-center mt-5",children:Object(w.jsx)(ve.a,{animation:"border",variant:"primary"})});var o=i.map((function(e){return Object(w.jsx)("div",{className:"col",children:Object(w.jsx)(he,{book:e,withLink:!0})},"book".concat(e.id))})).drop(12*(a-1)).take(12).value();return Object(w.jsx)("div",{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3",id:"books",children:Object(w.jsx)(m.b,{cascade:!0,damping:.025,triggerOnce:!0,children:o})})}var Se=Object(s.createContext)(null);function Pe(){var e=Object(s.useState)(0),t=Object(u.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)(1),r=Object(u.a)(n,2),i=r[0],l=r[1];return Object(w.jsx)(Se.Provider,{value:{total:c,setTotal:a,page:i,setPage:l},children:Object(w.jsxs)("div",{children:[Object(w.jsx)(Ce,{}),Object(w.jsx)(ye,{})]})})}function Fe(){return Object(w.jsxs)(K,{children:[Object(w.jsx)(J,{active:"home"}),Object(w.jsx)(_,{children:Object(w.jsx)(Ie,{})})]})}function Ie(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(we,{}),Object(w.jsx)(Pe,{})]})}var Te=c(154);function Be(e){var t=e.isSignIn,c=function(e){return e?"Sign in":"Sign up"},s=c(t),a=c(!t),n=t?"/register":"/login";return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("h1",{className:"mb-3",children:[Object(w.jsx)("span",{className:"h1 fw-bold",children:s}),Object(w.jsx)("span",{className:"h4",children:" / "}),Object(w.jsx)(o.b,{className:"h5 fw-bold text-muted",to:n,children:a})]})})}function Le(e){var t=e.isSignIn,c=e.children,s=e.onSubmit,a=e.isProcessing;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("main",{className:"form-signin",children:Object(w.jsxs)(m.b,{children:[Object(w.jsx)(Be,{isSignIn:t}),Object(w.jsxs)("form",{onSubmit:s,children:[c,Object(w.jsxs)(k.a,{className:"w-100 mt-3",variant:"dark",size:"lg",type:"submit",disabled:a,children:[a?"Signing ":"Sign ",t?"in":"up",a?"...":""]})]})]})})})}function Ae(){var e=C(),t=e.signedOut,c=e.setSignedOut,a=M().revalidate,n=Object(l.g)(),r=Object(s.useState)(!1),o=Object(u.a)(r,2),d=o[0],m=o[1],h=Object(s.useState)(!1),O=Object(u.a)(h,2),x=O[0],v=O[1],f=Object(s.useState)(!1),N=Object(u.a)(f,2),k=N[0],y=N[1],S=Object(re.a)({defaultValues:{username:"thunderboy",password:"reins1409"}}),P=S.register,F=S.handleSubmit;return Object(s.useEffect)((function(){var e=setTimeout((function(){c(!1),m(!1)}),3e3);return function(){clearTimeout(e),c(!1)}}),[c,d]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Te.a,{show:t,variant:"primary",className:"text-center h5",children:"You have signed out."}),Object(w.jsx)(Te.a,{show:d,variant:"danger",className:"text-center h5",children:"Your account has been banned by administrators."}),Object(w.jsxs)(Le,{isSignIn:!0,onSubmit:F(function(){var e=Object(b.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("banned"!==t.username.toLowerCase()){e.next=4;break}m(!0),e.next=12;break;case 4:return v(!0),e.next=7,D(t);case 7:return s=e.sent,e.next=10,a();case 10:v(!1),s.ok?(c(!1),n.push("/home")):y(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),isProcessing:x,children:[Object(w.jsx)(p.a,{placement:"bottom-end",trigger:"focus",delay:300,overlay:Object(w.jsx)("div",{}),children:Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-first",placeholder:"Username",autoComplete:"username",required:!0,autoFocus:!0,isInvalid:k},P("username")))}),Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-last",placeholder:"Password",type:"password",required:!0,isInvalid:k},P("password"))),k?Object(w.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please try again."}):null,Object(w.jsx)(g.a.Switch,{className:"mt-3",label:"Remember me",defaultChecked:!0})]})]})}function De(){return Object(w.jsxs)(K,{children:[Object(w.jsx)(J,{active:"search"}),Object(w.jsx)(_,{children:Object(w.jsx)(qe,{})})]})}function qe(){var e,t=null!==(e=Object(l.h)().params.keyword)&&void 0!==e?e:"";return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"py-5",children:Object(w.jsxs)("span",{className:"h1",children:['Search Results for "',t,'"']})}),Object(w.jsx)(Pe,{})]})}c(125);var Me=c(9),Ee=c(40);function Ue(e){var t=e.rows,c=e.cols,s=e.onCommitChanges,a=e.booleanCols,n=e.children;return Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)(Ee.a,{rows:t,columns:c,getRowId:function(e){return e.id},children:[Object(w.jsx)(Me.n,{}),Object(w.jsx)(Me.i,{}),Object(w.jsx)(Me.l,{defaultCurrentPage:0,pageSize:20}),Object(w.jsx)(Me.j,{}),a?Object(w.jsx)(Je,{for:a}):null,n,Object(w.jsx)(Me.d,{onCommitChanges:s}),Object(w.jsx)(Ee.d,{}),Object(w.jsx)(Ee.g,{}),Object(w.jsx)(Ee.f,{}),Object(w.jsx)(Ee.e,{showAddCommand:!0,showEditCommand:!0,showDeleteCommand:!0}),Object(w.jsx)(Ee.h,{}),Object(w.jsx)(Ee.c,{}),Object(w.jsx)(Ee.b,{})]})})}var He=function(e){var t=e.value;return Object(w.jsx)(g.a.Check,{type:"checkbox",defaultChecked:t,disabled:!0})},ze=function(e){var t=e.value,c=e.onValueChange;return Object(w.jsx)(g.a.Check,{type:"checkbox",defaultChecked:t,onChange:function(e){return c(e.target.checked)}})},Je=function(e){var t=e.for;return Object(w.jsx)(Me.b,{formatterComponent:He,editorComponent:ze,for:t})},Re=c(106),Ge=c.n(Re);function Ve(){var e=pe().books,t=U.a.values(e),c=U()(U.a.first(t)).keys().map((function(e){return{name:e,title:Ge()(e)}})).value();return Object(w.jsx)(Ue,{rows:t,cols:c,onCommitChanges:function(e){e.added,e.changed,e.deleted}})}function _e(){var e=function(){var e=I("/users/");return Object(i.a)({users:e.error?void 0:e.data},e)}().users,t=U.a.values(e).map((function(e){return Object(i.a)({id:e.user_id,admin:e.user_type===T.admin},e)}));return Object(w.jsx)(Ue,{rows:t,cols:[{name:"user_id",title:"User ID"},{name:"username",title:"Username"},{name:"admin",title:"Admin"}],booleanCols:["admin"],onCommitChanges:function(){}})}var Ke=c(155),Ye=c(156);function We(){return Object(w.jsxs)(K,{children:[Object(w.jsx)(J,{active:"dashboard"}),Object(w.jsx)(_,{children:Object(w.jsx)(Qe,{})})]})}function Ze(){var e=Object(s.useState)(!1),t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(w.jsx)(k.a,{size:"lg",variant:"outline-danger",className:"align-self-center",onClick:function(){a(!c)},children:c?"Click again to reset":"Reset all books"})}function Qe(){var e=Object(s.useState)("books"),t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(w.jsx)("span",{className:"h1",children:"Dashboard"}),"books"===c?Object(w.jsx)(Ze,{}):null]}),Object(w.jsx)("div",{className:"py-4",children:Object(w.jsxs)(Ke.a,{activeKey:c,onSelect:function(e){return a(null!==e&&void 0!==e?e:void 0)},className:"mb-3",children:[Object(w.jsx)(Ye.a,{eventKey:"books",title:"Books",children:Object(w.jsx)(Ve,{})}),Object(w.jsx)(Ye.a,{eventKey:"users",title:"Users",children:Object(w.jsx)(_e,{})})]})})]})}function Xe(){var e,t,c=C().setSignedOut,a=M().revalidate,n=Object(l.g)(),r=Object(s.useState)(!1),o=Object(u.a)(r,2),d=o[0],m=o[1],h=Object(s.useState)(!1),O=Object(u.a)(h,2),x=O[0],v=O[1],p=Object(re.a)(),f=p.register,N=p.handleSubmit,k=p.watch,y=p.formState.errors,S=k("password");return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(Le,{isSignIn:!1,onSubmit:N(function(){var e=Object(b.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,q({username:t.username,password:t.password});case 3:return s=e.sent,e.next=6,a();case 6:m(!1),s.ok?(c(!1),n.push("/home")):v(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),isProcessing:d,children:[Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-first",placeholder:"Username",autoComplete:"username",required:!0,isInvalid:x},f("username"))),Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-mid",placeholder:"Password",type:"password",autoComplete:"new-password",required:!0,isInvalid:!!y.password},f("password",{minLength:{value:4,message:"Password must have at least 4 characters."}}))),Object(w.jsx)(g.a.Control,Object(i.a)({className:"input-last",placeholder:"Confirm Password",type:"password",autoComplete:"new-password",required:!0,isInvalid:!!y.confirmPassword},f("confirmPassword",{validate:function(e){return e===S||"The passwords do not match."}}))),Object(w.jsx)(g.a.Control.Feedback,{type:"invalid",children:null===(e=y.password)||void 0===e?void 0:e.message}),Object(w.jsx)(g.a.Control.Feedback,{type:"invalid",children:null===(t=y.confirmPassword)||void 0===t?void 0:t.message}),x?Object(w.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please try again."}):null,Object(w.jsx)(g.a.Check,{type:"checkbox",className:"mt-3",label:"Agree to terms and privacy policy",id:"accept-privacy-policy",defaultChecked:!0})]})})}var $e,et=c(157);function tt(){return Object(w.jsxs)(K,{children:[Object(w.jsx)(J,{active:"orders"}),Object(w.jsx)(_,{children:Object(w.jsx)(st,{})})]})}function ct(e){var t=e.order,c=t.cart.books.map((function(e){return Object(w.jsx)(W.a,{children:Object(w.jsxs)(o.b,{to:"/detail/".concat(e.book.id),className:"d-flex nav-link",children:[Object(w.jsx)("span",{className:"me-auto",children:e.book.name}),Object(w.jsxs)("span",{className:"text-muted",children:["x",e.count]})]})},e.book.id)}));return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{className:"align-middle",children:t.id}),Object(w.jsx)("td",{className:"align-middle",children:t.datetime}),Object(w.jsx)("td",{className:"align-middle w-25",children:c}),Object(w.jsxs)("td",{className:"align-middle",children:["\xa5",t.cart.total.toFixed(2)]}),Object(w.jsx)("td",{className:"align-middle",children:t.consignee}),Object(w.jsx)("td",{className:"align-middle",children:t.status})]})}function st(){var e=function(){var e,t=I("/orders/");return Object(i.a)({orders:null!==(e=t.error?void 0:t.data)&&void 0!==e?e:[]},t)}().orders.map((function(e){return Object(w.jsx)(ct,{order:e},e.id)}));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"h1 mb-4",children:"My Orders"}),Object(w.jsxs)(et.a,{responsive:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"#"}),Object(w.jsx)("th",{children:"Datetime"}),Object(w.jsx)("th",{children:"Items"}),Object(w.jsx)("th",{children:"Total Price"}),Object(w.jsx)("th",{children:"Consignee"}),Object(w.jsx)("th",{children:"Status"})]})}),Object(w.jsx)("tbody",{children:e})]})]})}function at(e){return M().error?Object(w.jsx)(l.a,{to:"/login"}):Object(w.jsx)(l.b,Object(i.a)(Object(i.a)({},e),{},{children:e.children}))}function nt(e){var t;return null===(t=M().isAdmin)||void 0===t||t?Object(w.jsx)(l.b,Object(i.a)(Object(i.a)({},e),{},{children:e.children})):Object(w.jsx)(l.a,{to:"/home"})}function rt(){return Object(w.jsx)(o.a,{children:Object(w.jsxs)(l.d,{children:[Object(w.jsx)(l.b,{exact:!0,path:"/",children:Object(w.jsx)(l.a,{to:"/home"})}),Object(w.jsx)(l.b,{path:"/login",component:Ae}),Object(w.jsx)(l.b,{path:"/register",component:Xe}),Object(w.jsx)(at,{path:"/checkout",component:ue}),Object(w.jsx)(at,{path:"/detail/:id",component:fe}),Object(w.jsx)(at,{path:"/home",component:Fe}),Object(w.jsx)(at,{path:"/search/:keyword?",component:De}),Object(w.jsx)(at,{path:"/orders",component:tt}),Object(w.jsx)(nt,{path:"/dashboard",component:We})]})})}!function(e){e[e.submitted=0]="submitted",e[e.shipped=1]="shipped",e[e.delivered=2]="delivered",e[e.cancelled=3]="cancelled"}($e||($e={}));var it=function(){return Object(w.jsx)(S,{children:Object(w.jsx)(rt,{})})},lt=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,165)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),s(e),a(e),n(e),r(e)}))};c(139);r.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(it,{})}),document.getElementById("root")),lt()}},[[140,1,2]]]);
//# sourceMappingURL=main.6c9ee1d4.chunk.js.map