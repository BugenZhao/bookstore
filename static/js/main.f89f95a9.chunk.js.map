{"version":3,"sources":["services/index.tsx","components/Header.tsx","pages/common/Main.tsx","pages/common/Body.tsx","views/CartView.tsx","views/PaymentView.tsx","views/AddressView.tsx","pages/CheckoutPage.tsx","components/BookCard.tsx","views/BookDetailView.tsx","pages/DetailPage.tsx","views/CarouselView.tsx","views/BooksView.tsx","pages/HomePage.tsx","pages/LoginPage.tsx","pages/SearchPage.tsx","views/BookEditorView.tsx","pages/DashboardPage.tsx","routes.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["StoreContext","createContext","useStore","useContext","ALL_BOOKS","_","_BOOKS","keyBy","value","BooksContext","SearchBox","initial","useState","input","setInput","history","useHistory","className","onSubmit","length","push","type","placeholder","onChange","e","target","Header","active","cartCount","cart","keyword","useRouteMatch","params","to","data-bs-toggle","data-bs-target","id","tabIndex","Main","py","children","Body","props","CartItem","book","count","name","author","price","CartView","BOOKS","booksMap","countBy","i","toPairs","map","c","sumPrice","b","sum","discount","Math","min","totalPrice","cartItems","toFixed","PaymentContext","PaymentMethod","selected","setSelected","onClick","CreditCardForm","htmlFor","required","PaymentView","Provider","AddressContext","AddressItem","address","bgClass","tag","phone","AddressView","noValidate","CheckoutMain","CheckoutPage","BookCard","withLink","path","src","image","alt","inventory","BookDetailView","addToCart","description","role","toString","DetailPage","match","DetailMain","goBack","CarouselItem","url","CarouselView","data-bs-ride","data-bs-slide","Pagination","GalleryContext","total","page","setPage","totalPage","ceil","pages","range","p","Books","setTotal","allBooksIter","filter","values","join","includes","books","drop","take","useEffect","size","BooksView","HomePage","HomeMain","LoginPage","autoFocus","defaultValue","defaultChecked","SearchPage","SearchMain","BookEditorView","updateBOOKS","setCart","rows","cols","first","keys","k","title","columns","getRowId","row","defaultCurrentPage","pageSize","onCommitChanges","added","changed","deleted","bs","forEach","rowAdded","newId","max","rowChanged","showAddCommand","showEditCommand","showDeleteCommand","DashboardPage","DashboardMain","BSRoutes","component","exact","App","useImmer","concat","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f89f95a9.chunk.js","sourcesContent":["import { createContext, useContext } from 'react';\nimport _ from 'lodash';\nimport _BOOKS from '../resources/books.json';\n\ntype StoreContextType = {\n  cart: string[],\n  addToCart: (id: string) => void,\n  setCart: (newCart: string[]) => void,\n}\nexport const StoreContext = createContext<StoreContextType>(null!);\nexport function useStore() {\n  return useContext(StoreContext);\n}\n\n\nexport const ALL_BOOKS = _(_BOOKS).keyBy(\"id\").value();\ntype BooksContextType = {\n  BOOKS: typeof ALL_BOOKS,\n  updateBOOKS: (c: (d: typeof ALL_BOOKS) => void) => void,\n}\nexport const BooksContext = createContext<BooksContextType>(null!);\n\nexport type Book = typeof _BOOKS[0];\n\n\nexport type SelectContextType<T> = {\n  selected: T,\n  setSelected: (n: T) => void,\n};\n\n","import { useState } from 'react';\nimport { Link, useHistory, useRouteMatch } from 'react-router-dom';\nimport { SearchPageParams } from '../routes';\nimport { useStore } from \"../services\";\n\nfunction SearchBox({\n  initial = \"\",\n}) {\n  const [input, setInput] = useState(initial);\n  const history = useHistory();\n\n  return (\n    <form className=\"d-flex mb-2 mb-lg-0\" onSubmit={() => {\n      if (input.length > 0) { history.push(`/search/${input}`); }\n    }}>\n      <input className=\"form-control me-2\" type=\"search\" placeholder=\"Search Books...\"\n        value={input} onChange={e => setInput(e.target.value)} />\n      <button className=\"btn btn-outline-secondary\" type=\"submit\">Search</button>\n    </form>\n  );\n}\n\nexport function Header({ active }: {\n  active: string,\n}) {\n  const { cart } = useStore();\n  const cartCount = cart.length;\n  const keyword = useRouteMatch<SearchPageParams>().params.keyword ?? \"\";\n\n  return (\n    <header>\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-white fixed-top shadow-sm\">\n        <div className=\"container\">\n          <Link className=\"navbar-brand fw-bolder\" to=\"/home\">Book Store</Link>\n          <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\"\n            data-bs-target=\"#navbarSupportedContent\"\n          >\n            <span className=\"navbar-toggler-icon\"></span>\n          </button>\n          <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n              <li className=\"nav-item\">\n                <Link className={`nav-link ${active === \"home\" || active === \"detail\" || active === \"search\" ? \"active\" : \"\"}`} to=\"/home\">Books</Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link className={`nav-link d-flex align-items-center ${active === \"cart\" ? \"active\" : \"\"}`} to=\"/checkout\">\n                  <span className=\"me-1\">My Cart</span>\n                  <span className={`badge bg-${cartCount === 0 ? \"secondary\" : \"danger\"} rounded-pill`}>{cartCount}</span>\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link className={`nav-link ${active === \"orders\" ? \"active\" : \"\"}`} to=\"#\">My Orders</Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link className=\"nav-link fw-bold\" to=\"/login\" tabIndex={-1}>Hi, Bugen</Link>\n              </li>\n            </ul>\n            <SearchBox initial={keyword}></SearchBox>\n            <div className=\"ms-2 d-flex\">\n              {\n                active === \"dashboard\" ?\n                  <Link className=\"btn btn-success w-100\" to=\"/home\" >Book Store</Link> :\n                  <Link className=\"btn btn-primary w-100\" to=\"/dashboard\" >Dashboard</Link>\n              }\n            </div>\n          </div>\n        </div>\n      </nav>\n    </header>\n  );\n}\n\n","import { PropsWithChildren } from \"react\";\n\nexport function Main({ py = 4, children }: PropsWithChildren<{\n  py?: number\n}>) {\n  return (\n    <main className={`py-${py} container`}>\n      {children}\n    </main>\n  );\n}\n","import { PropsWithChildren } from \"react\";\n\nexport function Body(props: PropsWithChildren<{}>) {\n  return (\n    <div className=\"store-home\">\n      {props.children}\n    </div>\n  );\n}\n","import { useContext } from 'react';\nimport _ from 'lodash';\nimport { Book, BooksContext, useStore } from \"../services\";\n\nfunction CartItem({ book, count }: {\n  book: Book,\n  count: number,\n}) {\n  return (\n    <li className=\"list-group-item d-flex justify-content-between lh-sm\" >\n      <div>\n        <h6 className=\"my-0\">{book.name}</h6>\n        <small className=\"text-muted\">{book.author}</small>\n      </div>\n      <div>\n        <span className=\"text-muted\">¥{book.price}</span>\n        {count > 1 ? (<span> x{count}</span>) : null}\n      </div>\n    </li>\n  );\n}\n\nexport function CartView() {\n  const { cart } = useStore();\n  const { BOOKS } = useContext(BooksContext);\n\n  const booksMap: _.Collection<[Book, number]> =\n    _(cart).countBy((i) => i).toPairs().map(([i, c]) => [BOOKS[i], c]);\n\n  const sumPrice = booksMap.map(([b, c]) => b.price * c).sum();\n  const discount = Math.min(100.0, sumPrice * 0.3);\n  const totalPrice = sumPrice - discount;\n\n  const cartItems = booksMap.map(([b, c]) => <CartItem book={b} count={c} key={b.id} />).value();\n\n  return (\n    <div>\n      <h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n        <span className=\"text-muted\">Your cart</span>\n        <span className=\"badge bg-secondary rounded-pill\">{cart.length}</span>\n      </h4>\n      <ul className=\"list-group mb-3\">\n        {cartItems}\n        <li className=\"list-group-item d-flex justify-content-between lh-sm\">\n          <span>Discount</span>\n          <span className=\"text-danger fw-bold\"> -¥{discount.toFixed(2)}</span>\n        </li>\n        <li className=\"list-group-item d-flex justify-content-between\">\n          <span>Total</span>\n          <span className=\"fw-bold\">¥{totalPrice.toFixed(2)}</span>\n        </li>\n      </ul>\n    </div>\n  );\n}\n","import { createContext, PropsWithChildren, useContext, useState } from 'react';\nimport { SelectContextType } from '../services';\n\nconst PaymentContext = createContext<SelectContextType<string>>(null!);\n\nfunction PaymentMethod({name, children}: PropsWithChildren<{\n  name: string,\n}>) {\n  const {selected, setSelected} = useContext(PaymentContext);\n\n  return (\n    <button\n      onClick={() => setSelected(name)}\n      className={`list-group-item list-group-item-action ${selected === name ? \"active\" : \"\"}`}>\n      <div className=\"d-flex w-100 justify-content-between align-items-center\">\n        <span>{name}</span>\n        {children}\n      </div>\n    </button>\n  );\n}\n\n\nfunction CreditCardForm() {\n  return (\n    <div className=\"col\">\n      <div className=\"row gy-2\">\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-name\" className=\"form-label\">Name on card</label>\n          <input type=\"text\" className=\"form-control\" id=\"cc-name\" placeholder=\"\" required={true} />\n        </div>\n\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-number\" className=\"form-label\">Card number</label>\n          <input type=\"text\" className=\"form-control\" id=\"cc-number\" placeholder=\"\"\n            required={true} />\n        </div>\n\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-expiration\" className=\"form-label\">Expiration</label>\n          <input type=\"text\" className=\"form-control\" id=\"cc-expiration\" placeholder=\"\"\n            required={true} />\n        </div>\n\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-cvv\" className=\"form-label\">CVV</label>\n          <input type=\"text\" className=\"form-control\" id=\"cc-cvv\" placeholder=\"\" required={true} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function PaymentView() {\n  const [selected, setSelected] = useState(\"Credit card\");\n\n  return (\n    <PaymentContext.Provider value={{selected, setSelected}}>\n      <div>\n        <h4 className=\"mb-3\">Payment</h4>\n        <div className=\"row gy-2\">\n          <div className=\"col-lg-5 col-xxl-4\">\n            <div className=\"list-group\">\n              <PaymentMethod name=\"PayPal\" />\n              <PaymentMethod name=\"WeChat Pay\" >\n                <span className=\"badge bg-success rounded-pill\">Recommended</span>\n              </PaymentMethod>\n              <PaymentMethod name=\"Alipay\" />\n              <PaymentMethod name=\"Credit card\" >\n                <span className=\"badge bg-secondary rounded-pill\">Last used</span>\n              </PaymentMethod>\n            </div>\n          </div>\n\n          {selected === \"Credit card\" ? <CreditCardForm /> : (\n            <div className=\"col\">You'll be redirected to {selected} after clicking \"Checkout\".</div>\n          )}\n\n        </div>\n      </div>\n    </PaymentContext.Provider>\n  );\n}\n","import { createContext, useContext, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { SelectContextType } from '../services';\n\nconst AddressContext = createContext<SelectContextType<number>>(null!);\n\ntype Address = {\n  id: number,\n  name: string,\n  tag: string,\n  phone: string,\n  address: string,\n};\n\nfunction AddressItem({ address }: {\n  address: Address,\n}) {\n  const bgClass = address.tag === \"Default\" ? \"bg-secondary\" : \"bg-success\";\n  const { selected, setSelected } = useContext(AddressContext);\n\n  return (\n    <button\n      onClick={() => setSelected(address.id)}\n      className={`list-group-item list-group-item-action ${selected === address.id ? \"active\" : \"\"}`}>\n      <div className=\"d-flex w-100 justify-content-between align-items-center\">\n        <h5 className=\"mb-1\">{address.name}</h5>\n        <span className={`badge ${bgClass} rounded-pill`}>{address.tag}</span>\n      </div>\n      <p className=\"mb-0 small\">{address.phone}</p>\n      <p className=\"mb-0\">{address.address}</p>\n    </button>\n  );\n}\n\nexport function AddressView() {\n  const [selected, setSelected] = useState(0);\n\n  return (\n    <AddressContext.Provider value={{ selected, setSelected }}>\n      <div>\n        <h4 className=\"mb-3\">Shipping Address</h4>\n        <form className=\"needs-validation\" noValidate={true}>\n\n          <div className=\"list-group\">\n            <AddressItem address={{\n              id: 0,\n              name: \"Bugen Zhao\",\n              tag: \"Default\",\n              phone: \"+86 155 2121 2121\",\n              address: \"1234 Main St., Shanghai, China\"\n            }} />\n            <AddressItem address={{\n              id: 1,\n              name: \"Bugen Zhao\",\n              tag: \"Home\",\n              phone: \"+86 155 2121 2121\",\n              address: \"4321 Home St., Shanghai, China\"\n            }} />\n            <AddressItem address={{\n              id: 2,\n              name: \"Fuken Chao\",\n              tag: \"School\",\n              phone: \"+86 188 1234 5678\",\n              address: \"9876 School St., Shanghai, China\"\n            }} />\n\n            <Link to=\"#\" className=\"list-group-item list-group-item-action\">\n              <span className=\"text-muted\">Add a new address...</span>\n            </Link>\n          </div>\n\n        </form>\n      </div>\n    </AddressContext.Provider >\n\n  );\n}\n","import { Header } from '../components/Header';\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { CartView } from '../views/CartView';\nimport { PaymentView } from '../views/PaymentView';\nimport { AddressView } from '../views/AddressView';\n\nfunction CheckoutMain() {\n  return (\n    <div>\n      <div className=\"row\">\n        <div className=\"col-md-5 col-lg-4 order-md-last\">\n          <CartView />\n        </div>\n        <div className=\"col-md-7 col-lg-8\">\n          <AddressView />\n          <hr className=\"my-4\" />\n          <PaymentView />\n          <hr className=\"my-4\" />\n          <div className=\"d-flex justify-content-end\">\n            <button className=\"btn btn-primary btn-lg col-12 col-lg-3\" type=\"submit\">Checkout</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\nexport function CheckoutPage() {\n  return (\n    <Body>\n      <Header active=\"cart\" />\n      <Main py={5}>\n        <CheckoutMain />\n      </Main>\n    </Body>\n  );\n}\n","import { Link } from 'react-router-dom';\nimport { Book } from '../services';\n\nexport function BookCard({ book, withLink }: {\n  book: Book,\n  withLink: boolean,\n}) {\n  const path = `/detail/${book.id}`;\n\n  return (\n    <div className=\"card shadow-sm\">\n      <img src={book.image} alt=\"\" className=\"card-img-top\" />\n      {withLink ?\n        <Link to={path} className=\"stretched-link\">\n          <span className=\"visually-hidden\">Details</span>\n        </Link>\n        : null}\n      <div className=\"card-body\">\n        <h5 className=\"card-title text-truncate\">{book.name}</h5>\n        <div className=\"d-flex justify-content-between align-items-center\">\n          <h6 className=\"card-subtitle text-danger\">¥{book.price}</h6>\n          <small className=\"card-subtitle text-muted\">{book.inventory}+</small>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Link } from 'react-router-dom';\nimport { Book, useStore } from \"../services\";\n\nexport function BookDetailView({ book }: {\n  book: Book,\n}) {\n  const { addToCart } = useStore();\n\n  return (\n    <div>\n      <h1 className=\"h4 my-3\">{book.name}</h1>\n      <div className=\"mb-3\">\n        <dl className=\"row\">\n          <dt className=\"col-sm-3\">Author</dt>\n          <dd className=\"col-sm-9\">{book.author}</dd>\n\n          <dt className=\"col-sm-3\">Press</dt>\n          <dd className=\"col-sm-9\">Unknown Press</dd>\n\n          <dt className=\"col-sm-3\">Category</dt>\n          <dd className=\"col-sm-9\">{book.type}</dd>\n\n          <dt className=\"col-sm-3\">Stock</dt>\n          <dd className=\"col-sm-9\">{book.inventory}+</dd>\n\n          <dt className=\"col-sm-3\">Price</dt>\n          <dd className=\"col-sm-9 text-danger fw-bold\">¥{book.price}</dd>\n\n          <dt className=\"col-sm-3\">Introduction</dt>\n          <dd className=\"col-sm-9\">{book.description}</dd>\n        </dl>\n        <div className=\"my-3\">\n          <div className=\"d-flex justify-content-end\">\n            <div className=\"btn-group btn-group-lg col-12 col-xl-6 col-lg-8\" role=\"group\">\n              <button type=\"button\" className=\"btn btn-outline-danger w-100\" onClick={() => { addToCart(book.id.toString()); }}>Add to Cart</button>\n              <Link className=\"btn btn-danger w-100\" to=\"/checkout\">Checkout</Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Link, RouteComponentProps, useHistory } from 'react-router-dom';\nimport { BookCard } from '../components/BookCard';\nimport { Header } from '../components/Header';\nimport { BookDetailView } from '../views/BookDetailView';\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { useContext } from 'react';\nimport { BooksContext } from '../services';\n\nexport function DetailPage(props: RouteComponentProps<{\n  id: string\n}>) {\n  const id = props.match.params.id;\n\n  return (\n    <Body>\n      <Header active=\"detail\" />\n      <Main py={5}>\n        <DetailMain id={id} />\n      </Main>\n    </Body>\n  );\n}\n\nfunction DetailMain({ id }: {\n  id: string\n}) {\n  const { BOOKS } = useContext(BooksContext);\n  const book = BOOKS[id];\n  const history = useHistory();\n\n  return (\n    <div>\n      <nav>\n        <ol className=\"breadcrumb h6\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"#\" className=\"\" onClick={() => history.goBack()}>Books</Link>\n          </li>\n          <li className=\"breadcrumb-item active\">{book.name}</li>\n        </ol>\n      </nav>\n      <div className=\"row\">\n        <div className=\"col-md-4\">\n          <BookCard book={book} withLink={false} />\n        </div>\n        <div className=\"col-md-8\">\n          <BookDetailView book={book} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","function CarouselItem({ active = false, url }: {\n  active?: boolean,\n  url: string,\n}) {\n  return (\n    <div className={`carousel-item ${active ? \"active\" : \"\"}`}>\n      <img src={url} className=\"d-block w-100\" alt={`carousel ${url}`} />\n    </div>\n  );\n}\nexport function CarouselView() {\n  return (\n    <div id=\"carouselExampleControls\" className=\"carousel slide mb-4 shadow-sm\" data-bs-ride=\"carousel\">\n      <div className=\"carousel-inner\">\n        <CarouselItem url=\"static/book1.jpg\" />\n        <CarouselItem url=\"static/book2.jpg\" active={true} />\n        <CarouselItem url=\"static/book3.jpg\" />\n        <CarouselItem url=\"static/book4.jpg\" />\n      </div>\n      <button className=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#carouselExampleControls\"\n        data-bs-slide=\"prev\">\n        <span className=\"carousel-control-prev-icon\"></span>\n        <span className=\"visually-hidden\">Previous</span>\n      </button>\n      <button className=\"carousel-control-next\" type=\"button\" data-bs-target=\"#carouselExampleControls\"\n        data-bs-slide=\"next\">\n        <span className=\"carousel-control-next-icon\"></span>\n        <span className=\"visually-hidden\">Next</span>\n      </button>\n    </div>\n  );\n}\n","import { createContext, useContext, useState, useEffect } from 'react';\nimport { useRouteMatch } from 'react-router-dom';\nimport _ from 'lodash';\nimport { BookCard } from '../components/BookCard';\nimport { BooksContext } from \"../services\";\nimport { SearchPageParams } from '../routes';\n\nconst PER_PAGE = 12;\n\nfunction Pagination() {\n  const { total, page, setPage } = useContext(GalleryContext);\n  const totalPage = Math.ceil(total / PER_PAGE);\n\n  const pages = _(_.range(1, totalPage + 1))\n    .map((p) => (\n      <li className={`page-item ${p === page ? \"active\" : \"\"}`} key={p}>\n        <button className=\"page-link\" onClick={() => setPage(p)}>{p}</button>\n      </li>\n    ))\n    .value();\n\n  return (\n    <div className=\"py-5\" id=\"footer\">\n      <nav>\n        <ul className=\"pagination justify-content-center\">\n          <li className={`page-item ${page === 1 ? \"disabled\" : \"\"}`}>\n            <button className=\"page-link\" onClick={() => setPage(page - 1)}>Previous</button>\n          </li>\n          {pages}\n          <li className={`page-item ${page === totalPage ? \"disabled\" : \"\"}`}>\n            <button className=\"page-link\" onClick={() => setPage(page + 1)}>Next</button>\n          </li>\n        </ul>\n      </nav>\n    </div>\n  );\n}\n\nfunction Books() {\n  const { BOOKS } = useContext(BooksContext);\n  const { setTotal, page } = useContext(GalleryContext);\n  const keyword = useRouteMatch<SearchPageParams>().params.keyword ?? \"\";\n\n  const allBooksIter =\n    _(BOOKS)\n      .filter((book) => _(book).values().join().includes(keyword))\n      .map((book) => (\n        <div key={`book${book.id}`} className=\"col\">\n          <BookCard book={book} withLink={true} />\n        </div>\n      ));\n\n  const books = allBooksIter\n    .drop((page - 1) * PER_PAGE)\n    .take(PER_PAGE)\n    .value();\n\n  useEffect(() => setTotal(allBooksIter.size()));\n\n  return (\n    <div className=\"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3\" id=\"books\">\n      {books}\n    </div>\n  );\n}\n\n\ntype GalleryContextType = {\n  total: number,\n  setTotal: (n: number) => void,\n  page: number,\n  setPage: (n: number) => void,\n};\n\nconst GalleryContext = createContext<GalleryContextType>(null!);\n\nexport function BooksView() {\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n\n  return (\n    <GalleryContext.Provider value={{ total, setTotal, page, setPage }}>\n      <div>\n        <Books></Books>\n        <Pagination />\n      </div>\n    </GalleryContext.Provider>\n  );\n}\n","import { Header } from '../components/Header';\nimport { CarouselView } from '../views/CarouselView';\nimport { BooksView } from '../views/BooksView';\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\n\nexport function HomePage() {\n  return (\n    <Body>\n      <Header active=\"home\" />\n      <Main>\n        <HomeMain />\n      </Main>\n    </Body>\n  );\n}\n\nfunction HomeMain() {\n  return (\n    <div>\n      <CarouselView />\n      <BooksView />\n    </div>\n  );\n}\n","import { Link } from 'react-router-dom';\n\nexport function LoginPage() {\n  return (\n    <main className=\"form-signin\">\n      <form>\n        <h1 className=\"h1 mb-3 fw-bold\">Sign in</h1>\n        <input type=\"email\" id=\"inputEmail\" className=\"form-control\" placeholder=\"Email address\" required={true}\n          autoFocus={true} defaultValue=\"Bugen\" />\n        <input type=\"password\" id=\"inputPassword\" className=\"form-control\" placeholder=\"Password\" required={true}\n          defaultValue=\"password\" />\n        <div className=\"mb-3 form-check form-switch\">\n          <label>\n            <input type=\"checkbox\" id=\"rememberMeCheck\" className=\"form-check-input\" defaultChecked={true} />\n            <label htmlFor=\"rememberMeCheck\" className=\"form-check-label\">Remember me</label>\n          </label>\n        </div>\n        <Link className=\"btn btn-dark w-100 btn-lg\" to=\"/home\">Sign in</Link>\n      </form>\n    </main>\n  );\n}\n","import { Header } from '../components/Header';\nimport { BooksView } from '../views/BooksView';\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { useRouteMatch } from 'react-router';\nimport { SearchPageParams } from '../routes';\n\nexport function SearchPage() {\n  return (\n    <Body>\n      <Header active=\"search\" />\n      <Main>\n        <SearchMain />\n      </Main>\n    </Body>\n  );\n}\n\nfunction SearchMain() {\n  const keyword = useRouteMatch<SearchPageParams>().params.keyword ?? \"\";\n\n  return (\n    <div>\n      <div className=\"py-5\">\n        <span className=\"h1\">\n          Search Results for \"{keyword}\"\n        </span>\n      </div>\n      <BooksView />\n    </div>\n  );\n}\n","import _ from \"lodash\";\nimport {\n  EditingState,\n  PagingState,\n  IntegratedPaging,\n  ChangeSet,\n} from '@devexpress/dx-react-grid';\nimport {\n  Grid,\n  Table,\n  TableHeaderRow,\n  TableEditRow,\n  TableEditColumn,\n  PagingPanel,\n} from '@devexpress/dx-react-grid-bootstrap4';\nimport '@devexpress/dx-react-grid-bootstrap4/dist/dx-react-grid-bootstrap4.css';\n\nimport { useContext } from 'react';\nimport { BooksContext, useStore } from '../services';\n\n\nexport function BookEditorView() {\n  const { BOOKS, updateBOOKS } = useContext(BooksContext);\n  const { cart, setCart } = useStore();\n\n  const rows = _.values(BOOKS);\n  const cols = _(_.first(rows))\n    .keys()\n    .filter((k) => k !== \"id\")\n    .map((k) => { return { name: k, title: k }; })\n    .value();\n\n  function onCommitChanges({ added, changed, deleted }: ChangeSet) {\n    if (added) { // [row]\n      updateBOOKS((bs) => {\n        _(added)\n          .forEach((rowAdded) => {\n            const newId = _(BOOKS).keys().max() ?? 0 + 1;\n            bs[newId] = { ...rowAdded, id: newId };\n          });\n      });\n    }\n\n    if (changed) { // {id: row}\n      updateBOOKS((bs) => {\n        _(changed)\n          .toPairs()\n          .forEach(([id, rowChanged]) => {\n            bs[id] = { ...bs[id], ...rowChanged };\n          });\n      });\n    }\n\n    if (deleted) { // [rowIdx]\n      updateBOOKS((bs) => {\n        _(deleted)\n          .forEach((id) => { delete bs[id]; });\n      });\n\n      // cleanup the cart\n      setCart(_(cart).filter((id) => !deleted.includes(id)).value());\n    }\n  }\n\n  return (\n    <div className=\"card\">\n      <Grid\n        rows={rows}\n        columns={cols}\n        getRowId={(row) => row.id}\n      >\n        <PagingState\n          defaultCurrentPage={0}\n          pageSize={20}\n        />\n        <IntegratedPaging />\n        <EditingState\n          onCommitChanges={onCommitChanges} />\n        <Table />\n        <TableHeaderRow />\n        <TableEditRow />\n        <TableEditColumn\n          showAddCommand\n          showEditCommand\n          showDeleteCommand />\n        <PagingPanel />\n      </Grid>\n    </div>\n  );\n}\n","import { Header } from '../components/Header';\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { BookEditorView } from '../views/BookEditorView';\n\n\nexport function DashboardPage() {\n  return (\n    <Body>\n      <Header active=\"dashboard\" />\n      <Main>\n        <DashboardMain />\n      </Main>\n    </Body>\n  );\n}\n\nfunction DashboardMain() {\n  return (\n    <div>\n      <span className=\"h1\">Dashboard</span>\n      <div className=\"py-4\"><BookEditorView /></div>\n    </div>\n  );\n}\n\n","import { Route, Switch, HashRouter as Router, Redirect } from 'react-router-dom';\nimport { CheckoutPage, DetailPage, HomePage, SearchPage, LoginPage, DashboardPage } from \"./pages\";\n\n\nexport function BSRoutes() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/checkout\" component={CheckoutPage} />\n        <Route path=\"/detail/:id\" component={DetailPage} />\n        <Route path=\"/home\" component={HomePage} />\n        <Route path=\"/search/:keyword?\" component={SearchPage} />\n        <Route path=\"/login\" component={LoginPage} />\n        <Route path=\"/dashboard\" component={DashboardPage} />\n        <Route exact path=\"/\"><Redirect to=\"/login\" /></Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport type DetailPageParams = {\n  id: string\n};\n\nexport type SearchPageParams = {\n  keyword?: string\n};\n","import { useState } from 'react';\nimport { useImmer } from \"use-immer\";\nimport { BSRoutes } from './routes';\n\nimport { ALL_BOOKS, BooksContext, StoreContext } from './services';\n\n\nfunction App() {\n  const [cart, setCart] = useState([] as string[]);\n  const addToCart = (id: string) => { setCart(cart.concat([id])); };\n\n  const [BOOKS, updateBOOKS] = useImmer(ALL_BOOKS);\n\n  return (\n    <BooksContext.Provider value={{ BOOKS, updateBOOKS }}>\n      <StoreContext.Provider value={{ cart, addToCart, setCart }}>\n        <BSRoutes />\n      </StoreContext.Provider>\n    </BooksContext.Provider>\n  )\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'jquery'\nimport 'bootstrap/dist/js/bootstrap.bundle'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}