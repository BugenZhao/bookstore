{"version":3,"sources":["services/StoreContext.tsx","components/Header.tsx","pages/common/Main.tsx","pages/common/Body.tsx","services/BooksContext.tsx","views/CartView.tsx","views/PaymentView.tsx","views/AddressView.tsx","pages/CheckoutPage.tsx","components/BookCard.tsx","views/BookDetailView.tsx","pages/DetailPage.tsx","views/CarouselView.tsx","views/BooksView.tsx","pages/HomePage.tsx","views/LoginRegView.tsx","pages/LoginPage.tsx","pages/SearchPage.tsx","views/ManagementView.tsx","views/BookManagementView.tsx","views/UserManagementView.tsx","pages/DashboardPage.tsx","pages/RegisterPage.tsx","routes.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ADMINS","StoreContext","createContext","useStore","useContext","StoreProvider","props","useState","cart","setCart","useLocalStorage","user","setUser","isSignedIn","isAdmin","includes","signedOut","setSignedOut","Provider","value","addToCart","id","produce","count","clearCart","getCartCount","_","values","sum","children","Header","active","keyword","useRouteMatch","params","cartCount","Navbar","bg","expand","className","Container","Brand","as","Link","to","Toggle","aria-controls","Collapse","Nav","Badge","pill","NavUserItem","SearchBox","initial","DashboardButton","history","useHistory","OverlayTrigger","overlay","Tooltip","placement","onClick","push","inputRef","useRef","Form","onSubmit","input","current","length","FormControl","type","placeholder","defaultValue","ref","Button","variant","Main","py","Body","ALL_BOOKS","_BOOKS","keyBy","BooksContext","BooksProvider","BOOKS","setBOOKS","CartItem","book","link","ListGroup","Item","style","color","textDecoration","action","Row","Col","sm","Image","src","image","fluid","name","author","price","Summary","title","textStyle","valuePrefix","toFixed","CartView","cartPairs","toPairs","map","i","c","sumPrice","b","discount","Math","min","totalPrice","cartItems","PaymentContext","PaymentMethodItem","selected","setSelected","CreditCardForm","htmlFor","required","PaymentView","AddressContext","AddressItem","address","bgClass","tag","phone","AddNewAddressModal","modalShow","setModalShow","useForm","register","handleSubmit","Modal","show","size","onHide","backdrop","centered","closeButton","Title","data","alert","JSON","stringify","console","log","Group","Label","column","Control","Check","label","Footer","form","AddNewAddressItem","AddressView","CheckoutMain","CheckoutPage","BookCard","withLink","path","Card","Img","Subtitle","inventory","BookDetailView","height","description","ButtonGroup","toString","DetailPage","match","DetailMain","goBack","CarouselView","items","url","Carousel","alt","CarouselItem","triggerOnce","fade","Pagination","GalleryContext","total","page","setPage","totalPage","ceil","pages","range","p","Books","setTotal","allBooksIter","filter","join","books","drop","take","useEffect","cascade","damping","BooksView","HomePage","HomeMain","LoginRegTitle","isSignIn","select","primary","secondary","LoginRegView","LoginPage","banned","setBanned","timeout","setTimeout","clearTimeout","Alert","newUser","username","toLowerCase","trigger","delay","autoFocus","defaultChecked","SearchPage","SearchMain","ManagementView","rows","cols","onCommitChanges","booleanCols","columns","getRowId","row","defaultCurrentPage","pageSize","for","showAddCommand","showEditCommand","showDeleteCommand","BooleanFormatter","disabled","BooleanEditor","onValueChange","onChange","e","target","checked","BooleanTypeProvider","formatterComponent","editorComponent","BookManagementView","first","keys","k","titleize","added","changed","deleted","bs","forEach","rowAdded","newId","max","rowChanged","UserManagementView","currentUser","DashboardPage","DashboardMain","ResetBooksButton","rep","setRep","key","setKey","Tabs","activeKey","onSelect","Tab","eventKey","RegisterPage","autoComplete","SignedInRoute","AdminRoute","BSRoutes","exact","component","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e36347c7.chunk.js","sourcesContent":["import { createContext, PropsWithChildren, useContext, useState } from \"react\";\nimport useLocalStorage from \"use-local-storage\";\nimport _ from \"lodash\";\nimport produce from \"immer\";\n\nexport const ADMINS = [\"Bugen\", \"Admin\"];\n\nexport type Cart = Record<string, number>;\ntype StoreContextType = {\n  cart: Cart;\n  addToCart: (id: string) => void;\n  setCart: (c: Cart) => void;\n  clearCart: () => void;\n  getCartCount: () => number;\n  user: string;\n  setUser: (u: string) => void;\n  isSignedIn: boolean;\n  isAdmin: boolean;\n  signedOut: boolean;\n  setSignedOut: (s: boolean) => void;\n};\nexport const StoreContext = createContext<StoreContextType>(null!);\nexport function useStore() {\n  return useContext(StoreContext);\n}\n\nexport function StoreProvider(props: PropsWithChildren<{}>) {\n  const [cart, setCart] = useState({} as _.Dictionary<number>);\n  const addToCart = (id: string) => {\n    setCart(\n      produce(cart, (cart) => {\n        const count = cart[id] ?? 0;\n        cart[id] = count + 1;\n      })\n    );\n  };\n  const clearCart = () => setCart({});\n  const getCartCount = () => _(cart).values().sum();\n\n  const [user, setUser] = useLocalStorage(\"bz-user\", \"\");\n  const isSignedIn = user !== \"\";\n  const isAdmin = ADMINS.includes(user);\n\n  const [signedOut, setSignedOut] = useState(false);\n\n  return (\n    <StoreContext.Provider\n      value={{\n        cart,\n        addToCart,\n        setCart,\n        clearCart,\n        getCartCount,\n        user,\n        setUser,\n        isSignedIn,\n        isAdmin,\n        signedOut,\n        setSignedOut,\n      }}\n    >\n      {props.children}\n    </StoreContext.Provider>\n  );\n}\n","import { useRef } from \"react\";\nimport { Bounce } from \"react-awesome-reveal\";\nimport {\n  Button,\n  OverlayTrigger,\n  Tooltip,\n  Nav,\n  Navbar,\n  Form,\n  FormControl,\n  Container,\n  Badge,\n} from \"react-bootstrap\";\nimport { Link, useHistory, useRouteMatch } from \"react-router-dom\";\nimport { SearchPageParams } from \"../routes\";\nimport { useStore } from \"../services/StoreContext\";\nimport _ from \"lodash\";\n\nexport function Header({\n  active,\n}: {\n  active: \"home\" | \"detail\" | \"search\" | \"cart\" | \"orders\" | \"dashboard\";\n}) {\n  const { getCartCount, isAdmin } = useStore();\n  const keyword = useRouteMatch<SearchPageParams>().params.keyword ?? \"\";\n\n  const cartCount = getCartCount();\n\n  return (\n    <Navbar bg=\"white\" expand=\"lg\" className=\"shadow-sm fixed-top\">\n      <Container>\n        <Navbar.Brand className=\"fw-bolder\" as={Link} to=\"/home\">\n          Book Store\n        </Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"me-auto\">\n            <Nav.Link\n              as={Link}\n              to=\"/home\"\n              active={\n                active === \"home\" || active === \"detail\" || active === \"search\"\n              }\n            >\n              Books\n            </Nav.Link>\n            <Nav.Link as={Link} to=\"/checkout\" active={active === \"orders\"}>\n              <div className={`d-flex align-items-center`}>\n                <span className=\"me-1\">My Cart</span>\n                <Bounce>\n                  <Badge bg={cartCount === 0 ? \"secondary\" : \"danger\"} pill>\n                    {cartCount}\n                  </Badge>\n                </Bounce>\n              </div>\n            </Nav.Link>\n            <Nav.Link as={Link} to=\"#\" active={active === \"orders\"}>\n              My Orders\n            </Nav.Link>\n\n            <NavUserItem />\n          </Nav>\n\n          <SearchBox initial={keyword}></SearchBox>\n          {isAdmin ? <DashboardButton active={active} /> : null}\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n}\n\nfunction NavUserItem() {\n  const { user, setUser, setSignedOut } = useStore();\n  const history = useHistory();\n\n  return (\n    <OverlayTrigger\n      overlay={<Tooltip id=\"signout-tooltip\">Sign out</Tooltip>}\n      placement=\"auto\"\n    >\n      <Nav.Link\n        onClick={() => {\n          setUser(\"\");\n          setSignedOut(true);\n          history.push(\"/login\");\n        }}\n      >\n        <span>Hi, </span>\n        <span className=\"fw-bold\">{user}</span>\n      </Nav.Link>\n    </OverlayTrigger>\n  );\n}\n\nfunction SearchBox({ initial = \"\" }) {\n  const inputRef = useRef<HTMLInputElement>(null!);\n  const history = useHistory();\n\n  return (\n    <Form\n      className=\"d-flex mb-2 mb-lg-0\"\n      onSubmit={() => {\n        const input = inputRef.current.value;\n        if (input.length > 0) {\n          history.push(`/search/${input}`);\n        }\n      }}\n    >\n      <FormControl\n        className=\"form-control me-2\"\n        type=\"search\"\n        placeholder=\"Search Books...\"\n        defaultValue={initial}\n        ref={inputRef}\n      />\n      <Button variant=\"outline-secondary\" type=\"submit\">\n        Search\n      </Button>\n    </Form>\n  );\n}\n\nfunction DashboardButton({ active }: { active: string }) {\n  return (\n    <div className=\"ms-md-2 d-flex\">\n      {active === \"dashboard\" ? (\n        <Button as={Link} to=\"/home\" variant=\"success\" className=\"w-100\">\n          Book Store\n        </Button>\n      ) : (\n        <Button as={Link} to=\"/dashboard\" variant=\"primary\" className=\"w-100\">\n          Dashboard\n        </Button>\n      )}\n    </div>\n  );\n}\n","import { PropsWithChildren } from \"react\";\n\nexport function Main({\n  py = 4,\n  children,\n}: PropsWithChildren<{\n  py?: number;\n}>) {\n  return <main className={`py-${py} container`}>{children}</main>;\n}\n","import { PropsWithChildren } from \"react\";\n\nexport function Body(props: PropsWithChildren<{}>) {\n  return <div className=\"store-home\">{props.children}</div>;\n}\n","import { createContext, PropsWithChildren } from \"react\";\nimport _ from \"lodash\";\nimport _BOOKS from \"../resources/books.json\";\nimport useLocalStorage from \"use-local-storage\";\n\nexport const ALL_BOOKS = _(_BOOKS).keyBy(\"id\").value();\ntype BooksContextType = {\n  BOOKS: typeof ALL_BOOKS;\n  setBOOKS: (d: typeof ALL_BOOKS) => void;\n};\nexport const BooksContext = createContext<BooksContextType>(null!);\n\nexport type Book = typeof _BOOKS[0];\n\nexport function BooksProvider(props: PropsWithChildren<{}>) {\n  const [BOOKS, setBOOKS] = useLocalStorage(\"bz-books\", ALL_BOOKS);\n\n  return (\n    <BooksContext.Provider value={{ BOOKS, setBOOKS }}>\n      {props.children}\n    </BooksContext.Provider>\n  );\n}\n\n","import { PropsWithChildren, useContext } from \"react\";\nimport _ from \"lodash\";\nimport { Book, BooksContext } from \"../services/BooksContext\";\nimport { useStore } from \"../services/StoreContext\";\nimport { Link } from \"react-router-dom\";\nimport { Badge, Col, Image, ListGroup, Row } from \"react-bootstrap\";\n\nfunction CartItem({ book, count }: { book: Book; count: number }) {\n  const link = `/detail/${book.id}`;\n\n  return (\n    <ListGroup.Item\n      as={Link}\n      to={link}\n      style={{ color: \"inherit\", textDecoration: \"inherit\" }}\n      action\n    >\n      <Row className=\"justify-content-between\">\n        <Col sm={3}>\n          <Image src={book.image} fluid></Image>\n        </Col>\n        <Col className=\"d-flex justify-content-between align-items-center\">\n          <div>\n            <h6 className=\"my-0\">{book.name}</h6>\n            <small className=\"text-muted\">{book.author}</small>\n          </div>\n          <div>\n            <span className=\"h5\">¥{book.price}</span>\n            {count > 1 ? <span className=\"text-muted\"> x{count}</span> : null}\n          </div>\n        </Col>\n      </Row>\n    </ListGroup.Item>\n  );\n}\n\nfunction Summary({\n  title,\n  value,\n}: PropsWithChildren<{\n  title: \"Discount\" | \"Total\";\n  value: number;\n}>) {\n  const textStyle = title === \"Discount\" ? \"text-danger\" : \"fw-bold\";\n  const valuePrefix = title === \"Discount\" ? \"-¥\" : \"¥\";\n\n  return (\n    <ListGroup.Item>\n      <div className=\"d-flex justify-content-between align-items-center\">\n        <div>\n          <span className=\"h6\">{title}</span>\n        </div>\n        <div>\n          <span className={`h5 ${textStyle}`}>\n            {valuePrefix}\n            {value.toFixed(2)}\n          </span>\n        </div>\n      </div>\n    </ListGroup.Item>\n  );\n}\n\nexport function CartView() {\n  const { cart, getCartCount } = useStore();\n  const { BOOKS } = useContext(BooksContext);\n\n  const cartPairs = _(cart)\n    .toPairs()\n    .map(([i, c]) => [BOOKS[i], c] as const);\n\n  const sumPrice = cartPairs.map(([b, c]) => b.price * c).sum();\n  const discount = Math.min(100.0, sumPrice * 0.3);\n  const totalPrice = sumPrice - discount;\n\n  const cartItems = cartPairs\n    .map(([b, c]) => <CartItem book={b} count={c} key={b.id} />)\n    .value();\n\n  return (\n    <div>\n      <h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n        <span className=\"text-muted\">Your cart</span>\n        <Badge pill bg=\"secondary\">\n          {getCartCount()}\n        </Badge>\n      </h4>\n      <ul className=\"list-group mb-3\">\n        {cartItems}\n        <Summary title=\"Discount\" value={discount} />\n        <Summary title=\"Total\" value={totalPrice} />\n      </ul>\n    </div>\n  );\n}\n","import { createContext, PropsWithChildren, useContext, useState } from \"react\";\nimport { SelectContextType } from \"../services\";\n\nconst PaymentContext = createContext<SelectContextType<string>>(null!);\n\ntype PaymentMethod = \"PayPal\" | \"WeChat Pay\" | \"Alipay\" | \"Credit card\";\n\nfunction PaymentMethodItem({\n  name,\n  children,\n}: PropsWithChildren<{\n  name: PaymentMethod;\n}>) {\n  const { selected, setSelected } = useContext(PaymentContext);\n\n  return (\n    <button\n      onClick={() => setSelected(name)}\n      className={`list-group-item list-group-item-action ${\n        selected === name ? \"active\" : \"\"\n      }`}\n    >\n      <div className=\"d-flex w-100 justify-content-between align-items-center\">\n        <span>{name}</span>\n        {children}\n      </div>\n    </button>\n  );\n}\n\nfunction CreditCardForm() {\n  return (\n    <div className=\"col\">\n      <div className=\"row gy-2\">\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-name\" className=\"form-label\">\n            Name on card\n          </label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"cc-name\"\n            placeholder=\"\"\n            required\n          />\n        </div>\n\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-number\" className=\"form-label\">\n            Card number\n          </label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"cc-number\"\n            placeholder=\"\"\n            required\n          />\n        </div>\n\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-expiration\" className=\"form-label\">\n            Expiration\n          </label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"cc-expiration\"\n            placeholder=\"\"\n            required\n          />\n        </div>\n\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-cvv\" className=\"form-label\">\n            CVV\n          </label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"cc-cvv\"\n            placeholder=\"\"\n            required\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function PaymentView() {\n  const [selected, setSelected] = useState(\"Credit card\");\n\n  return (\n    <PaymentContext.Provider value={{ selected, setSelected }}>\n      <div>\n        <h4 className=\"mb-3\">Payment</h4>\n        <div className=\"row gy-2\">\n          <div className=\"col-lg-5 col-xxl-4\">\n            <div className=\"list-group\">\n              <PaymentMethodItem name=\"PayPal\" />\n              <PaymentMethodItem name=\"WeChat Pay\">\n                <span className=\"badge bg-success rounded-pill\">\n                  Recommended\n                </span>\n              </PaymentMethodItem>\n              <PaymentMethodItem name=\"Alipay\" />\n              <PaymentMethodItem name=\"Credit card\">\n                <span className=\"badge bg-secondary rounded-pill\">\n                  Last used\n                </span>\n              </PaymentMethodItem>\n            </div>\n          </div>\n\n          {selected === \"Credit card\" ? (\n            <CreditCardForm />\n          ) : (\n            <div className=\"col\">\n              You'll be redirected to {selected} after clicking \"Checkout\".\n            </div>\n          )}\n        </div>\n      </div>\n    </PaymentContext.Provider>\n  );\n}\n","import { createContext, useContext, useState } from \"react\";\nimport { Modal, Button, Form, Row, Col } from \"react-bootstrap\";\nimport { useForm } from \"react-hook-form\";\nimport { SelectContextType } from \"../services\";\n\ntype AddressContextType = SelectContextType<number> & {\n  modalShow: boolean;\n  setModalShow: (b: boolean) => void;\n};\nconst AddressContext = createContext<AddressContextType>(null!);\n\nexport type NewAddressData = {\n  name: string;\n  phone: string;\n  address: string;\n};\n\nexport type Address = NewAddressData & {\n  id: number;\n  tag: string;\n};\n\nfunction AddressItem({ address }: { address: Address }) {\n  const bgClass = address.tag === \"Default\" ? \"bg-secondary\" : \"bg-success\";\n  const { selected, setSelected } = useContext(AddressContext);\n\n  return (\n    <button\n      onClick={() => setSelected(address.id)}\n      className={`list-group-item list-group-item-action ${\n        selected === address.id ? \"active\" : \"\"\n      }`}\n    >\n      <div className=\"d-flex w-100 justify-content-between align-items-center\">\n        <h5 className=\"mb-1\">{address.name}</h5>\n        <span className={`badge ${bgClass} rounded-pill`}>{address.tag}</span>\n      </div>\n      <p className=\"mb-0 small\">{address.phone}</p>\n      <p className=\"mb-0\">{address.address}</p>\n    </button>\n  );\n}\n\nfunction AddNewAddressModal() {\n  const { modalShow, setModalShow } = useContext(AddressContext);\n  const { register, handleSubmit } = useForm<NewAddressData>();\n\n  return (\n    <Modal\n      show={modalShow}\n      size=\"lg\"\n      onHide={() => setModalShow(false)}\n      backdrop=\"static\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title>Add a New Address</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Form\n          onSubmit={handleSubmit((data) => {\n            alert(JSON.stringify(data));\n            console.log(data);\n            setModalShow(false);\n          })}\n          id=\"add-new-address-form\"\n        >\n          <Form.Group as={Row} className=\"mb-3\">\n            <Form.Label column sm={3}>\n              Name\n            </Form.Label>\n            <Col sm={9}>\n              <Form.Control\n                placeholder=\"Enter full name\"\n                required\n                {...register(\"name\")}\n              />\n            </Col>\n          </Form.Group>\n\n          <Form.Group as={Row} className=\"mb-3\">\n            <Form.Label column sm={3}>\n              Phone Number\n            </Form.Label>\n            <Col sm={9}>\n              <Form.Control\n                placeholder=\"Enter phone number\"\n                required\n                {...register(\"phone\")}\n              />\n            </Col>\n          </Form.Group>\n\n          <Form.Group as={Row} className=\"mb-3\">\n            <Form.Label column sm={3}>\n              Address\n            </Form.Label>\n            <Col sm={9}>\n              <Form.Control\n                as=\"textarea\"\n                placeholder=\"Enter address\"\n                required\n                {...register(\"address\")}\n              />\n            </Col>\n          </Form.Group>\n\n          <Form.Group className=\"mb-3\">\n            <Form.Check\n              type=\"checkbox\"\n              label=\"Set as default\"\n              id=\"set-as-default\"\n            />\n          </Form.Group>\n        </Form>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"primary\" type=\"submit\" form=\"add-new-address-form\">\n          Confirm\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n\nfunction AddNewAddressItem() {\n  const { setModalShow } = useContext(AddressContext);\n  return (\n    <>\n      <button\n        className=\"list-group-item list-group-item-action\"\n        onClick={() => setModalShow(true)}\n      >\n        <span className=\"text-muted\">Add a new address...</span>\n      </button>\n    </>\n  );\n}\n\nexport function AddressView() {\n  const [selected, setSelected] = useState(0);\n  const [modalShow, setModalShow] = useState(false);\n\n  return (\n    <AddressContext.Provider\n      value={{ selected, setSelected, modalShow, setModalShow }}\n    >\n      <div>\n        <h4 className=\"mb-3\">Shipping Address</h4>\n        <div>\n          <div className=\"list-group\">\n            <AddressItem\n              address={{\n                id: 0,\n                name: \"Bugen Zhao\",\n                tag: \"Default\",\n                phone: \"+86 155 2121 2121\",\n                address: \"1234 Main St., Minhang, Shanghai, China\",\n              }}\n            />\n            <AddressItem\n              address={{\n                id: 1,\n                name: \"Alice Cook\",\n                tag: \"Home\",\n                phone: \"+1 802 812 3456\",\n                address: \"4321 Home St., Cupertino, CA, United States\",\n              }}\n            />\n            <AddressItem\n              address={{\n                id: 2,\n                name: \"Dave Jobs\",\n                tag: \"School\",\n                phone: \"+86 188 1234 5678\",\n                address: \"9876 School St., Shanghai, China\",\n              }}\n            />\n            <AddNewAddressItem />\n            <AddNewAddressModal />\n          </div>\n        </div>\n      </div>\n    </AddressContext.Provider>\n  );\n}\n","import { Header } from \"../components/Header\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { CartView } from \"../views/CartView\";\nimport { PaymentView } from \"../views/PaymentView\";\nimport { AddressView } from \"../views/AddressView\";\nimport { Fade } from \"react-awesome-reveal\";\n\nfunction CheckoutMain() {\n  return (\n    <div>\n      <div className=\"row\">\n        <div className=\"col-md-6 col-lg-5 order-md-last\">\n          <CartView />\n        </div>\n        <div className=\"col-md-6 col-lg-7\">\n          <AddressView />\n          <hr className=\"my-4\" />\n          <PaymentView />\n          <hr className=\"my-4\" />\n          <div className=\"d-flex justify-content-end\">\n            <button\n              className=\"btn btn-primary btn-lg col-12 col-lg-3\"\n              type=\"submit\"\n            >\n              Checkout\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function CheckoutPage() {\n  return (\n    <Body>\n      <Header active=\"cart\" />\n      <Main py={5}>\n        <Fade>\n          <CheckoutMain />\n        </Fade>\n      </Main>\n    </Body>\n  );\n}\n","import { Card } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { Book } from \"../services/BooksContext\";\n\nexport function BookCard({\n  book,\n  withLink = true,\n}: {\n  book: Book;\n  withLink: boolean;\n}) {\n  const path = `/detail/${book.id}`;\n\n  return (\n    <Card>\n      {withLink ? (\n        <Card.Link className=\"stretched-link\" as={Link} to={path} />\n      ) : null}\n      <Card.Img variant=\"top\" src={book.image} />\n      <Card.Body>\n        <Card.Title className=\"text-truncate\">{book.name}</Card.Title>\n        <div className=\"d-flex justify-content-between align-items-center\">\n          <Card.Subtitle className=\"text-danger\" as=\"h6\">\n            ¥{book.price}\n          </Card.Subtitle>\n          <Card.Subtitle className=\"text-muted\" as=\"small\">\n            {book.inventory}+\n          </Card.Subtitle>\n        </div>\n      </Card.Body>\n    </Card>\n  );\n}\n","import { ButtonGroup, Button } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { Book } from \"../services/BooksContext\";\nimport { useStore } from \"../services/StoreContext\";\n\nexport function BookDetailView({ book }: { book: Book }) {\n  const { addToCart } = useStore();\n\n  return (\n    <div\n      className=\"d-flex flex-column justify-content-between\"\n      style={{ height: \"100%\" }}\n    >\n      <div>\n        <h1 className=\"h2 my-3\">{book.name}</h1>\n        <div className=\"mb-3\">\n          <dl className=\"row\">\n            <dt className=\"col-sm-3\">Author</dt>\n            <dd className=\"col-sm-9\">{book.author}</dd>\n\n            <dt className=\"col-sm-3\">Press</dt>\n            <dd className=\"col-sm-9\">Unknown Press</dd>\n\n            <dt className=\"col-sm-3\">Category</dt>\n            <dd className=\"col-sm-9\">{book.type}</dd>\n\n            <dt className=\"col-sm-3\">Stock</dt>\n            <dd className=\"col-sm-9\">{book.inventory}+</dd>\n\n            <dt className=\"col-sm-3\">Price</dt>\n            <dd className=\"col-sm-9 text-danger fw-bold\">¥{book.price}</dd>\n\n            <dt className=\"col-sm-3\">Introduction</dt>\n            <dd className=\"col-sm-9\">{book.description}</dd>\n          </dl>\n        </div>\n      </div>\n      <div className=\"my-3\">\n        <div className=\"d-flex justify-content-end\">\n          <ButtonGroup className=\"col-12 col-xl-6 col-lg-8\" size=\"lg\">\n            <Button\n              variant=\"outline-danger\"\n              className=\"w-100\"\n              onClick={() => {\n                addToCart(book.id.toString());\n              }}\n            >\n              Add to Cart\n            </Button>\n            <Button\n              variant=\"outline-danger\"\n              className=\"w-100\"\n              as={Link}\n              to=\"/checkout\"\n            >\n              Checkout\n            </Button>\n          </ButtonGroup>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Link, RouteComponentProps, useHistory } from \"react-router-dom\";\nimport { BookCard } from \"../components/BookCard\";\nimport { Header } from \"../components/Header\";\nimport { BookDetailView } from \"../views/BookDetailView\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { useContext } from \"react\";\nimport { BooksContext } from \"../services/BooksContext\";\nimport { Fade } from \"react-awesome-reveal\";\nimport { Row } from \"react-bootstrap\";\n\nexport function DetailPage(\n  props: RouteComponentProps<{\n    id: string;\n  }>\n) {\n  const id = props.match.params.id;\n\n  return (\n    <Body>\n      <Header active=\"detail\" />\n      <Main py={5}>\n        <DetailMain id={id} />\n      </Main>\n    </Body>\n  );\n}\n\nfunction DetailMain({ id }: { id: string }) {\n  const { BOOKS } = useContext(BooksContext);\n  const book = BOOKS[id];\n  const history = useHistory();\n\n  return (\n    <div>\n      <nav>\n        <ol className=\"breadcrumb h6\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"#\" className=\"\" onClick={() => history.goBack()}>\n              Books\n            </Link>\n          </li>\n          <li className=\"breadcrumb-item active\">{book.name}</li>\n        </ol>\n      </nav>\n      <Fade>\n        <Row>\n          <div className=\"col-md-6 col-lg-4 align-self-center\">\n            <BookCard book={book} withLink={false} />\n          </div>\n          <div className=\"col-md-6 col-lg-8\">\n            <BookDetailView book={book} />\n          </div>\n        </Row>\n      </Fade>\n    </div>\n  );\n}\n","import { Fade } from \"react-awesome-reveal\";\nimport { Carousel } from \"react-bootstrap\";\n\nfunction CarouselItem(url: string) {\n  return (\n    <Carousel.Item key={url}>\n      <img className=\"d-block w-100\" src={url} alt={url} />\n    </Carousel.Item>\n  );\n}\n\nexport function CarouselView() {\n  const items = [\n    \"static/book1.jpg\",\n    \"static/book2.jpg\",\n    \"static/book3.jpg\",\n    \"static/book4.jpg\",\n  ].map((url) => CarouselItem(url));\n\n  return (\n    <Fade triggerOnce>\n      <Carousel className=\"mb-4\" fade>\n        {items}\n      </Carousel>\n    </Fade>\n  );\n}\n","import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useRouteMatch } from \"react-router-dom\";\nimport _ from \"lodash\";\nimport { BookCard } from \"../components/BookCard\";\nimport { BooksContext } from \"../services/BooksContext\";\nimport { SearchPageParams } from \"../routes\";\nimport { Fade } from \"react-awesome-reveal\";\n\nconst PER_PAGE = 12;\n\nfunction Pagination() {\n  const { total, page, setPage } = useContext(GalleryContext);\n  const totalPage = Math.ceil(total / PER_PAGE);\n\n  const pages = _(_.range(1, totalPage + 1))\n    .map((p) => (\n      <li className={`page-item ${p === page ? \"active\" : \"\"}`} key={p}>\n        <button className=\"page-link\" onClick={() => setPage(p)}>\n          {p}\n        </button>\n      </li>\n    ))\n    .value();\n\n  return (\n    <div className=\"py-5\" id=\"footer\">\n      <nav>\n        <ul className=\"pagination justify-content-center\">\n          <li className={`page-item ${page === 1 ? \"disabled\" : \"\"}`}>\n            <button className=\"page-link\" onClick={() => setPage(page - 1)}>\n              Previous\n            </button>\n          </li>\n          {pages}\n          <li className={`page-item ${page === totalPage ? \"disabled\" : \"\"}`}>\n            <button className=\"page-link\" onClick={() => setPage(page + 1)}>\n              Next\n            </button>\n          </li>\n        </ul>\n      </nav>\n    </div>\n  );\n}\n\nfunction Books() {\n  const { BOOKS } = useContext(BooksContext);\n  const { setTotal, page } = useContext(GalleryContext);\n  const keyword = useRouteMatch<SearchPageParams>().params.keyword ?? \"\";\n\n  const allBooksIter = _(BOOKS)\n    .filter((book) => _(book).values().join().includes(keyword))\n    .map((book) => (\n      <div key={`book${book.id}`} className=\"col\">\n        <BookCard book={book} withLink />\n      </div>\n    ));\n\n  const books = allBooksIter\n    .drop((page - 1) * PER_PAGE)\n    .take(PER_PAGE)\n    .value();\n\n  useEffect(() => setTotal(allBooksIter.size()));\n\n  return (\n    <div\n      className=\"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3\"\n      id=\"books\"\n    >\n      <Fade cascade damping={0.025} triggerOnce>{books}</Fade>\n    </div>\n  );\n}\n\ntype GalleryContextType = {\n  total: number;\n  setTotal: (n: number) => void;\n  page: number;\n  setPage: (n: number) => void;\n};\n\nconst GalleryContext = createContext<GalleryContextType>(null!);\n\nexport function BooksView() {\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n\n  return (\n    <GalleryContext.Provider value={{ total, setTotal, page, setPage }}>\n      <div>\n        <Books></Books>\n        <Pagination />\n      </div>\n    </GalleryContext.Provider>\n  );\n}\n","import { Header } from \"../components/Header\";\nimport { CarouselView } from \"../views/CarouselView\";\nimport { BooksView } from \"../views/BooksView\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\n\nexport function HomePage() {\n  return (\n    <Body>\n      <Header active=\"home\" />\n      <Main>\n        <HomeMain />\n      </Main>\n    </Body>\n  );\n}\n\nfunction HomeMain() {\n  return (\n    <div>\n      <CarouselView />\n      <BooksView />\n    </div>\n  );\n}\n","import { PropsWithChildren } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Fade } from \"react-awesome-reveal\";\n\nfunction LoginRegTitle({\n  isSignIn,\n}: PropsWithChildren<{\n  isSignIn: boolean;\n}>) {\n  const select = (b: boolean) => (b ? \"Sign in\" : \"Sign up\");\n  const primary = select(isSignIn);\n  const secondary = select(!isSignIn);\n  const link = isSignIn ? \"/register\" : \"/login\";\n\n  return (\n    <>\n      <h1 className=\"mb-3\">\n        <span className=\"h1 fw-bold\">{primary}</span>\n        <span className=\"h4\"> / </span>\n        <Link className=\"h5 fw-bold text-muted\" to={link}>\n          {secondary}\n        </Link>\n      </h1>\n    </>\n  );\n}\n\nexport function LoginRegView({\n  isSignIn,\n  children,\n  onSubmit,\n}: PropsWithChildren<{\n  isSignIn: boolean;\n  onSubmit: () => void;\n}>) {\n  return (\n    <>\n      <main className=\"form-signin\">\n        <Fade>\n          <LoginRegTitle isSignIn={isSignIn} />\n          <form onSubmit={onSubmit}>\n            {children}\n            <button className=\"btn btn-dark w-100 btn-lg\" type=\"submit\">\n              {isSignIn ? \"Sign in\" : \"Sign up\"}\n            </button>\n          </form>\n        </Fade>\n      </main>\n    </>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { ADMINS } from \"../services/StoreContext\";\nimport { useStore } from \"../services/StoreContext\";\nimport { Alert, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport { LoginRegView } from \"../views/LoginRegView\";\nimport { useForm } from \"react-hook-form\";\n\nexport type LoginData = {\n  username: string;\n  password: string;\n};\n\nexport function LoginPage() {\n  const { user, setUser, clearCart, signedOut, setSignedOut } = useStore();\n  const history = useHistory();\n  const [banned, setBanned] = useState(false);\n\n  const { register, handleSubmit } = useForm<LoginData>();\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setSignedOut(false);\n      setBanned(false);\n    }, 3000);\n\n    return () => {\n      clearTimeout(timeout);\n      setSignedOut(false);\n    };\n  }, [setSignedOut, banned]);\n\n  return (\n    <>\n      <Alert show={signedOut} variant=\"primary\" className=\"text-center h5\">\n        You have signed out.\n      </Alert>\n      <Alert show={banned} variant=\"danger\" className=\"text-center h5\">\n        Your account has been banned by administrators.\n      </Alert>\n      <LoginRegView\n        isSignIn\n        onSubmit={handleSubmit((data) => {\n          console.log(data);\n          const newUser = data.username;\n          if (newUser.toLowerCase() === \"banned\") {\n            setBanned(true);\n          } else {\n            if (user !== newUser) {\n              clearCart();\n            }\n            setUser(newUser);\n            setSignedOut(false);\n            history.push(\"/home\");\n          }\n        })}\n      >\n        <OverlayTrigger\n          placement=\"bottom-end\"\n          trigger=\"focus\"\n          delay={300}\n          overlay={\n            <Tooltip id=\"user-tooltip\">\n              Sign in as <strong>{ADMINS.join(\" or \")}</strong> to obtain the\n              admin permissions.\n            </Tooltip>\n          }\n        >\n          <input\n            className=\"form-control input-first\"\n            placeholder=\"Username\"\n            type=\"username\"\n            required\n            autoFocus\n            defaultValue={user === \"\" ? \"Guest\" : user}\n            {...register(\"username\")}\n          />\n        </OverlayTrigger>\n\n        <input\n          className=\"form-control input-last\"\n          placeholder=\"Password\"\n          type=\"password\"\n          required\n          defaultValue=\"password\"\n          {...register(\"password\")}\n        />\n        <div className=\"mb-3 form-check form-switch\">\n          <label>\n            <input\n              type=\"checkbox\"\n              id=\"rememberMeCheck\"\n              className=\"form-check-input\"\n              defaultChecked\n            />\n            <label htmlFor=\"rememberMeCheck\" className=\"form-check-label\">\n              Remember me\n            </label>\n          </label>\n        </div>\n      </LoginRegView>\n    </>\n  );\n}\n","import { Header } from \"../components/Header\";\nimport { BooksView } from \"../views/BooksView\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { useRouteMatch } from \"react-router\";\nimport { SearchPageParams } from \"../routes\";\n\nexport function SearchPage() {\n  return (\n    <Body>\n      <Header active=\"search\" />\n      <Main>\n        <SearchMain />\n      </Main>\n    </Body>\n  );\n}\n\nfunction SearchMain() {\n  const keyword = useRouteMatch<SearchPageParams>().params.keyword ?? \"\";\n\n  return (\n    <div>\n      <div className=\"py-5\">\n        <span className=\"h1\">Search Results for \"{keyword}\"</span>\n      </div>\n      <BooksView />\n    </div>\n  );\n}\n","import {\n  EditingState,\n  PagingState,\n  IntegratedPaging,\n  ChangeSet,\n  SearchState,\n  IntegratedFiltering,\n  DataTypeProvider,\n  DataTypeProviderProps,\n} from \"@devexpress/dx-react-grid\";\nimport {\n  Grid,\n  Table,\n  TableHeaderRow,\n  TableEditRow,\n  TableEditColumn,\n  PagingPanel,\n  SearchPanel,\n  Toolbar,\n} from \"@devexpress/dx-react-grid-bootstrap4\";\nimport { PropsWithChildren } from \"react\";\nimport { Form } from \"react-bootstrap\";\n\nexport function ManagementView<T>({\n  rows,\n  cols,\n  onCommitChanges,\n  booleanCols,\n  children,\n}: PropsWithChildren<{\n  rows: T[];\n  cols: { name: string; title: string }[];\n  onCommitChanges: ({ added, changed, deleted }: ChangeSet) => void;\n  booleanCols?: string[];\n}>) {\n  return (\n    <div className=\"card\">\n      <Grid rows={rows} columns={cols} getRowId={(row) => row.id}>\n        <SearchState />\n        <IntegratedFiltering />\n        <PagingState defaultCurrentPage={0} pageSize={20} />\n        <IntegratedPaging />\n        {booleanCols ? <BooleanTypeProvider for={booleanCols} /> : null}\n        {children}\n        <EditingState onCommitChanges={onCommitChanges} />\n        <Table />\n        <TableHeaderRow />\n        <TableEditRow />\n        <TableEditColumn showAddCommand showEditCommand showDeleteCommand />\n        <Toolbar />\n        <SearchPanel />\n        <PagingPanel />\n      </Grid>\n    </div>\n  );\n}\n\nconst BooleanFormatter = ({ value }: { value: boolean }) => (\n  <Form.Check type=\"checkbox\" defaultChecked={value} disabled />\n);\n\nconst BooleanEditor = ({\n  value,\n  onValueChange,\n}: {\n  value: boolean;\n  onValueChange: (b: boolean) => void;\n}) => (\n  <Form.Check\n    type=\"checkbox\"\n    defaultChecked={value}\n    onChange={(e) => onValueChange(e.target.checked)}\n  />\n);\n\nconst BooleanTypeProvider = ({ for: booleanCols }: DataTypeProviderProps) => (\n  <DataTypeProvider\n    formatterComponent={BooleanFormatter}\n    editorComponent={BooleanEditor}\n    for={booleanCols}\n  />\n);\n","import _ from \"lodash\";\nimport { ChangeSet } from \"@devexpress/dx-react-grid\";\nimport \"@devexpress/dx-react-grid-bootstrap4/dist/dx-react-grid-bootstrap4.css\";\n\nimport { useContext } from \"react\";\nimport { BooksContext } from \"../services/BooksContext\";\nimport { useStore } from \"../services/StoreContext\";\nimport produce from \"immer\";\nimport { ManagementView } from \"./ManagementView\";\nimport titleize from \"titleize\";\n\nexport function BookManagementView() {\n  const { BOOKS, setBOOKS } = useContext(BooksContext);\n  const { clearCart } = useStore();\n\n  const rows = _.values(BOOKS);\n  const cols = _(_.first(rows))\n    .keys()\n    .filter((k) => k !== \"id\")\n    .map((k) => {\n      return { name: k, title: titleize(k) };\n    })\n    .value();\n\n  function onCommitChanges({ added, changed, deleted }: ChangeSet) {\n    if (added) {\n      // [row]\n      setBOOKS(\n        produce(BOOKS, (bs) => {\n          _(added).forEach((rowAdded) => {\n            const newId = _(BOOKS).keys().max() ?? 0 + 1;\n            bs[newId] = { ...rowAdded, id: newId };\n          });\n        })\n      );\n    }\n\n    if (changed) {\n      // {id: row}\n      setBOOKS(\n        produce(BOOKS, (bs) => {\n          _(changed)\n            .toPairs()\n            .forEach(([id, rowChanged]) => {\n              bs[id] = { ...bs[id], ...rowChanged };\n            });\n        })\n      );\n    }\n\n    if (deleted) {\n      // [rowIdx]\n      if (_.size(BOOKS) <= deleted.length) {\n        return;\n      }\n\n      setBOOKS(\n        produce(BOOKS, (bs) => {\n          _(deleted).forEach((id) => {\n            delete bs[id];\n          });\n        })\n      );\n\n      clearCart();\n    }\n  }\n\n  return (\n    <ManagementView rows={rows} cols={cols} onCommitChanges={onCommitChanges} />\n  );\n}\n","import _ from \"lodash\";\nimport { useState } from \"react\";\nimport { useStore } from \"../services/StoreContext\";\nimport { ManagementView } from \"./ManagementView\";\n\nexport function UserManagementView() {\n  const { user: currentUser } = useStore();\n  const [user, setUser] = useState(currentUser);\n\n  const rows = [{ id: \"0\", user: user, active: true }];\n  const cols = [\n    { name: \"user\", title: \"User\" },\n    { name: \"active\", title: \"Active\" },\n  ];\n\n  return (\n    <ManagementView\n      rows={rows}\n      cols={cols}\n      booleanCols={[\"active\"]}\n      onCommitChanges={({ changed }) => {\n        if (changed && _.size(changed) > 0) {\n          const newUser: string | undefined = _(changed).values().first().user;\n          if (newUser) {\n            setUser(newUser);\n          }\n        }\n      }}\n    ></ManagementView>\n  );\n}\n","import { Header } from \"../components/Header\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { BookManagementView } from \"../views/BookManagementView\";\nimport { UserManagementView } from \"../views/UserManagementView\";\nimport { Badge, Button, Tab, Tabs } from \"react-bootstrap\";\nimport { useContext, useState } from \"react\";\nimport { ALL_BOOKS, BooksContext } from \"../services/BooksContext\";\n\nexport function DashboardPage() {\n  return (\n    <Body>\n      <Header active=\"dashboard\" />\n      <Main>\n        <DashboardMain />\n      </Main>\n    </Body>\n  );\n}\n\nfunction ResetBooksButton() {\n  const { setBOOKS } = useContext(BooksContext);\n  const [rep, setRep] = useState(false);\n\n  return (\n    <Button\n      size=\"lg\"\n      variant=\"outline-danger\"\n      className=\"align-self-center\"\n      onClick={() => {\n        if (rep) {\n          setBOOKS(ALL_BOOKS);\n        }\n        setRep(!rep);\n      }}\n    >\n      {rep ? \"Click again to reset\" : \"Reset all books\"}\n    </Button>\n  );\n}\n\nfunction DashboardMain() {\n  const [key, setKey] = useState<String | null>(\"books\");\n\n  return (\n    <div>\n      <div className=\"d-flex justify-content-between\">\n        <span className=\"h1\">Dashboard</span>\n        {key === \"books\" ? (\n          <ResetBooksButton />\n        ) : (\n          <h4 className=\"align-self-center\">\n            <Badge bg=\"info\">Demo</Badge>\n          </h4>\n        )}\n      </div>\n      <div className=\"py-4\">\n        <Tabs activeKey={key} onSelect={(k) => setKey(k)} className=\"mb-3\">\n          <Tab eventKey=\"books\" title=\"Books\">\n            <BookManagementView />\n          </Tab>\n          <Tab eventKey=\"users\" title=\"Users\">\n            <UserManagementView />\n          </Tab>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","import { useHistory } from \"react-router-dom\";\nimport { useStore } from \"../services/StoreContext\";\nimport { Form } from \"react-bootstrap\";\nimport { LoginRegView } from \"../views/LoginRegView\";\nimport { useForm } from \"react-hook-form\";\n\nexport type RegisterData = {\n  username: string;\n  email: string;\n  password: string;\n};\n\nexport function RegisterPage() {\n  const { user, setUser, clearCart, setSignedOut } = useStore();\n  const history = useHistory();\n\n  const { register, handleSubmit } = useForm<RegisterData>();\n\n  return (\n    <>\n      <LoginRegView\n        isSignIn={false}\n        onSubmit={handleSubmit((data) => {\n          console.log(data);\n          const newUser = data.username;\n          if (user !== newUser) {\n            clearCart();\n          }\n          setUser(newUser);\n          setSignedOut(false);\n          history.push(\"/home\");\n        })}\n      >\n        <Form.Control\n          className=\"input-first\"\n          placeholder=\"Email\"\n          type=\"email\"\n          required\n          autoFocus\n          {...register(\"email\")}\n        ></Form.Control>\n        <Form.Control\n          className=\"input-mid\"\n          placeholder=\"Username\"\n          autoComplete=\"username\"\n          required\n          {...register(\"username\")}\n        ></Form.Control>\n        <Form.Control\n          className=\"input-mid\"\n          placeholder=\"Password\"\n          type=\"password\"\n          autoComplete=\"new-password\"\n          required\n          {...register(\"password\")}\n        ></Form.Control>\n        <Form.Control\n          className=\"input-last\"\n          placeholder=\"Confirm Password\"\n          type=\"password\"\n          autoComplete=\"new-password\"\n          required\n        ></Form.Control>\n        <Form.Check\n          className=\"mb-3\"\n          type=\"checkbox\"\n          label=\"Agree to terms and privacy policy\"\n          id=\"accept-privacy-policy\"\n          defaultChecked\n        />\n      </LoginRegView>\n    </>\n  );\n}\n","import { PropsWithChildren } from \"react\";\nimport {\n  Route,\n  Switch,\n  HashRouter as Router,\n  Redirect,\n  RouteProps,\n} from \"react-router-dom\";\nimport {\n  CheckoutPage,\n  DetailPage,\n  HomePage,\n  SearchPage,\n  DashboardPage,\n  LoginPage,\n  RegisterPage,\n} from \"./pages\";\nimport { useStore } from \"./services/StoreContext\";\n\nfunction SignedInRoute(props: PropsWithChildren<RouteProps>) {\n  const { isSignedIn } = useStore();\n  if (isSignedIn) {\n    return <Route {...props}>{props.children}</Route>;\n  } else {\n    return <Redirect to=\"/login\" />;\n  }\n}\n\nfunction AdminRoute(props: PropsWithChildren<RouteProps>) {\n  const { isAdmin } = useStore();\n  if (isAdmin) {\n    return <Route {...props}>{props.children}</Route>;\n  } else {\n    return <Redirect to=\"/home\" />;\n  }\n}\n\nexport function BSRoutes() {\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          <Redirect to=\"/home\" />\n        </Route>\n        <Route path=\"/login\" component={LoginPage} />\n        <Route path=\"/register\" component={RegisterPage} />\n        <SignedInRoute path=\"/checkout\" component={CheckoutPage} />\n        <SignedInRoute path=\"/detail/:id\" component={DetailPage} />\n        <SignedInRoute path=\"/home\" component={HomePage} />\n        <SignedInRoute path=\"/search/:keyword?\" component={SearchPage} />\n        <AdminRoute path=\"/dashboard\" component={DashboardPage} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport type DetailPageParams = {\n  id: string;\n};\n\nexport type SearchPageParams = {\n  keyword?: string;\n};\n","import { BSRoutes } from \"./routes\";\n\nimport { BooksProvider } from \"./services/BooksContext\";\nimport { StoreProvider } from \"./services/StoreContext\";\n\nfunction App() {\n  return (\n    <BooksProvider>\n      <StoreProvider>\n        <BSRoutes />\n      </StoreProvider>\n    </BooksProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}