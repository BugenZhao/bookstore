{"version":3,"sources":["services/index.tsx","components/Header.tsx","pages/common/Main.tsx","pages/common/Body.tsx","views/CartView.tsx","views/PaymentView.tsx","views/AddressView.tsx","pages/CheckoutPage.tsx","components/BookCard.tsx","views/BookDetailView.tsx","pages/DetailPage.tsx","views/CarouselView.tsx","views/BooksView.tsx","pages/HomePage.tsx","pages/LoginPage.tsx","pages/SearchPage.tsx","views/BookEditorView.tsx","pages/DashboardPage.tsx","routes.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["StoreContext","createContext","useStore","useContext","ALL_BOOKS","_","_BOOKS","keyBy","value","BooksContext","ADMINS","SearchBox","initial","useState","input","setInput","history","useHistory","className","onSubmit","length","push","type","placeholder","onChange","e","target","Header","active","cart","user","cartCount","keyword","useRouteMatch","params","to","data-bs-toggle","data-bs-target","id","NavUserItem","includes","DashboardButton","setUser","OverlayTrigger","overlay","Tooltip","placement","Button","variant","onClick","Main","py","children","Body","props","CartItem","book","count","name","author","price","CartView","BOOKS","booksMap","countBy","i","toPairs","map","c","sumPrice","b","sum","discount","Math","min","totalPrice","cartItems","toFixed","PaymentContext","PaymentMethod","selected","setSelected","CreditCardForm","htmlFor","required","PaymentView","Provider","AddressContext","AddressItem","address","bgClass","tag","phone","AddressView","CheckoutMain","CheckoutPage","BookCard","withLink","path","src","image","alt","inventory","BookDetailView","addToCart","description","ButtonGroup","size","toString","DetailPage","match","DetailMain","goBack","CarouselView","items","url","Carousel","Item","CarouselItem","fade","Pagination","GalleryContext","total","page","setPage","totalPage","ceil","pages","range","p","Books","setTotal","allBooksIter","filter","values","join","books","drop","take","useEffect","BooksView","HomePage","HomeMain","LoginPage","setCart","userInputRef","useRef","newUser","current","trigger","autoFocus","defaultValue","ref","defaultChecked","SearchPage","SearchMain","BookEditorView","updateBOOKS","rows","cols","first","keys","k","title","columns","getRowId","row","defaultCurrentPage","pageSize","onCommitChanges","added","changed","deleted","bs","forEach","rowAdded","newId","max","rowChanged","showAddCommand","showEditCommand","showDeleteCommand","DashboardPage","DashboardMain","BSRoutes","isSignedIn","isAdmin","console","log","component","App","useLocalStorage","useImmer","concat","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4587cd17.chunk.js","sourcesContent":["import { createContext, useContext } from \"react\";\nimport _ from \"lodash\";\nimport _BOOKS from \"../resources/books.json\";\n\ntype StoreContextType = {\n  cart: string[];\n  addToCart: (id: string) => void;\n  setCart: (newCart: string[]) => void;\n  user: string;\n  setUser: (user: string) => void;\n};\nexport const StoreContext = createContext<StoreContextType>(null!);\nexport function useStore() {\n  return useContext(StoreContext);\n}\n\nexport const ALL_BOOKS = _(_BOOKS).keyBy(\"id\").value();\ntype BooksContextType = {\n  BOOKS: typeof ALL_BOOKS;\n  updateBOOKS: (c: (d: typeof ALL_BOOKS) => void) => void;\n};\nexport const BooksContext = createContext<BooksContextType>(null!);\n\nexport type Book = typeof _BOOKS[0];\n\nexport type SelectContextType<T> = {\n  selected: T;\n  setSelected: (n: T) => void;\n};\n\nexport const ADMINS = [\"Bugen\", \"Admin\"];\n","import { useState } from \"react\";\nimport { Button, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport { Link, useHistory, useRouteMatch } from \"react-router-dom\";\nimport { SearchPageParams } from \"../routes\";\nimport { ADMINS, useStore } from \"../services\";\n\nfunction SearchBox({ initial = \"\" }) {\n  const [input, setInput] = useState(initial);\n  const history = useHistory();\n\n  return (\n    <form\n      className=\"d-flex mb-2 mb-lg-0\"\n      onSubmit={() => {\n        if (input.length > 0) {\n          history.push(`/search/${input}`);\n        }\n      }}\n    >\n      <input\n        className=\"form-control me-2\"\n        type=\"search\"\n        placeholder=\"Search Books...\"\n        value={input}\n        onChange={(e) => setInput(e.target.value)}\n      />\n      <button className=\"btn btn-outline-secondary\" type=\"submit\">\n        Search\n      </button>\n    </form>\n  );\n}\n\nexport function Header({ active }: { active: string }) {\n  const { cart, user } = useStore();\n  const cartCount = cart.length;\n  const keyword = useRouteMatch<SearchPageParams>().params.keyword ?? \"\";\n\n  return (\n    <header>\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-white fixed-top shadow-sm\">\n        <div className=\"container\">\n          <Link className=\"navbar-brand fw-bolder\" to=\"/home\">\n            Book Store\n          </Link>\n          <button\n            className=\"navbar-toggler\"\n            type=\"button\"\n            data-bs-toggle=\"collapse\"\n            data-bs-target=\"#navbarSupportedContent\"\n          >\n            <span className=\"navbar-toggler-icon\"></span>\n          </button>\n          <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ${\n                    active === \"home\" ||\n                    active === \"detail\" ||\n                    active === \"search\"\n                      ? \"active\"\n                      : \"\"\n                  }`}\n                  to=\"/home\"\n                >\n                  Books\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link d-flex align-items-center ${\n                    active === \"cart\" ? \"active\" : \"\"\n                  }`}\n                  to=\"/checkout\"\n                >\n                  <span className=\"me-1\">My Cart</span>\n                  <span\n                    className={`badge bg-${\n                      cartCount === 0 ? \"secondary\" : \"danger\"\n                    } rounded-pill`}\n                  >\n                    {cartCount}\n                  </span>\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ${active === \"orders\" ? \"active\" : \"\"}`}\n                  to=\"#\"\n                >\n                  My Orders\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <NavUserItem />\n              </li>\n            </ul>\n            <SearchBox initial={keyword}></SearchBox>\n\n            {ADMINS.includes(user) ? <DashboardButton active={active} /> : null}\n          </div>\n        </div>\n      </nav>\n    </header>\n  );\n}\n\nfunction NavUserItem() {\n  const { user, setUser } = useStore();\n  const history = useHistory();\n\n  return (\n    <OverlayTrigger\n      overlay={<Tooltip id=\"signout-tooltip\">Sign out</Tooltip>}\n      placement=\"right\"\n    >\n      <Button\n        variant=\"link\"\n        className=\"nav-link\"\n        onClick={() => {\n          setUser(\"\");\n          history.push(\"/login\");\n        }}\n      >\n        <span>Hi, </span>\n        <span className=\"fw-bold\">{user}</span>\n      </Button>\n    </OverlayTrigger>\n  );\n}\n\nfunction DashboardButton({ active }: { active: string }) {\n  return (\n    <div className=\"ms-2 d-flex\">\n      {active === \"dashboard\" ? (\n        <Link className=\"btn btn-success w-100\" to=\"/home\">\n          Book Store\n        </Link>\n      ) : (\n        <Link className=\"btn btn-primary w-100\" to=\"/dashboard\">\n          Dashboard\n        </Link>\n      )}\n    </div>\n  );\n}\n","import { PropsWithChildren } from \"react\";\n\nexport function Main({\n  py = 4,\n  children,\n}: PropsWithChildren<{\n  py?: number;\n}>) {\n  return <main className={`py-${py} container`}>{children}</main>;\n}\n","import { PropsWithChildren } from \"react\";\n\nexport function Body(props: PropsWithChildren<{}>) {\n  return <div className=\"store-home\">{props.children}</div>;\n}\n","import { useContext } from \"react\";\nimport _ from \"lodash\";\nimport { Book, BooksContext, useStore } from \"../services\";\nimport { Link } from \"react-router-dom\";\n\nfunction CartItem({ book, count }: { book: Book; count: number }) {\n  return (\n    <li className=\"list-group-item d-flex justify-content-between lh-sm\">\n      <div>\n        <h6 className=\"my-0\">\n          <Link to={`/detail/${book.id}`} className=\"text-decoration-none\">\n            {book.name}\n          </Link>\n        </h6>\n        <small className=\"text-muted\">{book.author}</small>\n      </div>\n      <div>\n        <span className=\"text-muted\">¥{book.price}</span>\n        {count > 1 ? <span> x{count}</span> : null}\n      </div>\n    </li>\n  );\n}\n\nexport function CartView() {\n  const { cart } = useStore();\n  const { BOOKS } = useContext(BooksContext);\n\n  const booksMap = _(cart)\n    .countBy((i) => i)\n    .toPairs()\n    .map(([i, c]) => [BOOKS[i], c] as const);\n\n  const sumPrice = booksMap.map(([b, c]) => b.price * c).sum();\n  const discount = Math.min(100.0, sumPrice * 0.3);\n  const totalPrice = sumPrice - discount;\n\n  const cartItems = booksMap\n    .map(([b, c]) => <CartItem book={b} count={c} key={b.id} />)\n    .value();\n\n  return (\n    <div>\n      <h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n        <span className=\"text-muted\">Your cart</span>\n        <span className=\"badge bg-secondary rounded-pill\">{cart.length}</span>\n      </h4>\n      <ul className=\"list-group mb-3\">\n        {cartItems}\n        <li className=\"list-group-item d-flex justify-content-between lh-sm\">\n          <span>Discount</span>\n          <span className=\"text-danger fw-bold\"> -¥{discount.toFixed(2)}</span>\n        </li>\n        <li className=\"list-group-item d-flex justify-content-between\">\n          <span>Total</span>\n          <span className=\"fw-bold\">¥{totalPrice.toFixed(2)}</span>\n        </li>\n      </ul>\n    </div>\n  );\n}\n","import { createContext, PropsWithChildren, useContext, useState } from \"react\";\nimport { SelectContextType } from \"../services\";\n\nconst PaymentContext = createContext<SelectContextType<string>>(null!);\n\nfunction PaymentMethod({\n  name,\n  children,\n}: PropsWithChildren<{\n  name: string;\n}>) {\n  const { selected, setSelected } = useContext(PaymentContext);\n\n  return (\n    <button\n      onClick={() => setSelected(name)}\n      className={`list-group-item list-group-item-action ${\n        selected === name ? \"active\" : \"\"\n      }`}\n    >\n      <div className=\"d-flex w-100 justify-content-between align-items-center\">\n        <span>{name}</span>\n        {children}\n      </div>\n    </button>\n  );\n}\n\nfunction CreditCardForm() {\n  return (\n    <div className=\"col\">\n      <div className=\"row gy-2\">\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-name\" className=\"form-label\">\n            Name on card\n          </label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"cc-name\"\n            placeholder=\"\"\n            required={true}\n          />\n        </div>\n\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-number\" className=\"form-label\">\n            Card number\n          </label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"cc-number\"\n            placeholder=\"\"\n            required={true}\n          />\n        </div>\n\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-expiration\" className=\"form-label\">\n            Expiration\n          </label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"cc-expiration\"\n            placeholder=\"\"\n            required={true}\n          />\n        </div>\n\n        <div className=\"col-md-6\">\n          <label htmlFor=\"cc-cvv\" className=\"form-label\">\n            CVV\n          </label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"cc-cvv\"\n            placeholder=\"\"\n            required={true}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function PaymentView() {\n  const [selected, setSelected] = useState(\"Credit card\");\n\n  return (\n    <PaymentContext.Provider value={{ selected, setSelected }}>\n      <div>\n        <h4 className=\"mb-3\">Payment</h4>\n        <div className=\"row gy-2\">\n          <div className=\"col-lg-5 col-xxl-4\">\n            <div className=\"list-group\">\n              <PaymentMethod name=\"PayPal\" />\n              <PaymentMethod name=\"WeChat Pay\">\n                <span className=\"badge bg-success rounded-pill\">\n                  Recommended\n                </span>\n              </PaymentMethod>\n              <PaymentMethod name=\"Alipay\" />\n              <PaymentMethod name=\"Credit card\">\n                <span className=\"badge bg-secondary rounded-pill\">\n                  Last used\n                </span>\n              </PaymentMethod>\n            </div>\n          </div>\n\n          {selected === \"Credit card\" ? (\n            <CreditCardForm />\n          ) : (\n            <div className=\"col\">\n              You'll be redirected to {selected} after clicking \"Checkout\".\n            </div>\n          )}\n        </div>\n      </div>\n    </PaymentContext.Provider>\n  );\n}\n","import { createContext, useContext, useState } from \"react\";\nimport { SelectContextType } from \"../services\";\n\nconst AddressContext = createContext<SelectContextType<number>>(null!);\n\ntype Address = {\n  id: number;\n  name: string;\n  tag: string;\n  phone: string;\n  address: string;\n};\n\nfunction AddressItem({ address }: { address: Address }) {\n  const bgClass = address.tag === \"Default\" ? \"bg-secondary\" : \"bg-success\";\n  const { selected, setSelected } = useContext(AddressContext);\n\n  return (\n    <button\n      onClick={() => setSelected(address.id)}\n      className={`list-group-item list-group-item-action ${\n        selected === address.id ? \"active\" : \"\"\n      }`}\n    >\n      <div className=\"d-flex w-100 justify-content-between align-items-center\">\n        <h5 className=\"mb-1\">{address.name}</h5>\n        <span className={`badge ${bgClass} rounded-pill`}>{address.tag}</span>\n      </div>\n      <p className=\"mb-0 small\">{address.phone}</p>\n      <p className=\"mb-0\">{address.address}</p>\n    </button>\n  );\n}\n\nexport function AddressView() {\n  const [selected, setSelected] = useState(0);\n\n  return (\n    <AddressContext.Provider value={{ selected, setSelected }}>\n      <div>\n        <h4 className=\"mb-3\">Shipping Address</h4>\n        <div>\n          <div className=\"list-group\">\n            <AddressItem\n              address={{\n                id: 0,\n                name: \"Bugen Zhao\",\n                tag: \"Default\",\n                phone: \"+86 155 2121 2121\",\n                address: \"1234 Main St., Shanghai, China\",\n              }}\n            />\n            <AddressItem\n              address={{\n                id: 1,\n                name: \"Bugen Zhao\",\n                tag: \"Home\",\n                phone: \"+86 155 2121 2121\",\n                address: \"4321 Home St., Shanghai, China\",\n              }}\n            />\n            <AddressItem\n              address={{\n                id: 2,\n                name: \"Fuken Chao\",\n                tag: \"School\",\n                phone: \"+86 188 1234 5678\",\n                address: \"9876 School St., Shanghai, China\",\n              }}\n            />\n\n            <button className=\"list-group-item list-group-item-action\">\n              <span className=\"text-muted\">Add a new address...</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </AddressContext.Provider>\n  );\n}\n","import { Header } from \"../components/Header\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { CartView } from \"../views/CartView\";\nimport { PaymentView } from \"../views/PaymentView\";\nimport { AddressView } from \"../views/AddressView\";\n\nfunction CheckoutMain() {\n  return (\n    <div>\n      <div className=\"row\">\n        <div className=\"col-md-5 col-lg-4 order-md-last\">\n          <CartView />\n        </div>\n        <div className=\"col-md-7 col-lg-8\">\n          <AddressView />\n          <hr className=\"my-4\" />\n          <PaymentView />\n          <hr className=\"my-4\" />\n          <div className=\"d-flex justify-content-end\">\n            <button\n              className=\"btn btn-primary btn-lg col-12 col-lg-3\"\n              type=\"submit\"\n            >\n              Checkout\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function CheckoutPage() {\n  return (\n    <Body>\n      <Header active=\"cart\" />\n      <Main py={5}>\n        <CheckoutMain />\n      </Main>\n    </Body>\n  );\n}\n","import { Link } from \"react-router-dom\";\nimport { Book } from \"../services\";\n\nexport function BookCard({\n  book,\n  withLink,\n}: {\n  book: Book;\n  withLink: boolean;\n}) {\n  const path = `/detail/${book.id}`;\n\n  return (\n    <div className=\"card shadow-sm\">\n      <img src={book.image} alt=\"\" className=\"card-img-top\" />\n      {withLink ? (\n        <Link to={path} className=\"stretched-link\">\n          <span className=\"visually-hidden\">Details</span>\n        </Link>\n      ) : null}\n      <div className=\"card-body\">\n        <h5 className=\"card-title text-truncate\">{book.name}</h5>\n        <div className=\"d-flex justify-content-between align-items-center\">\n          <h6 className=\"card-subtitle text-danger\">¥{book.price}</h6>\n          <small className=\"card-subtitle text-muted\">{book.inventory}+</small>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { ButtonGroup, Button } from \"react-bootstrap\";\nimport { useHistory } from \"react-router-dom\";\nimport { Book, useStore } from \"../services\";\n\nexport function BookDetailView({ book }: { book: Book }) {\n  const { addToCart } = useStore();\n  const history = useHistory();\n\n  return (\n    <div>\n      <h1 className=\"h4 my-3\">{book.name}</h1>\n      <div className=\"mb-3\">\n        <dl className=\"row\">\n          <dt className=\"col-sm-3\">Author</dt>\n          <dd className=\"col-sm-9\">{book.author}</dd>\n\n          <dt className=\"col-sm-3\">Press</dt>\n          <dd className=\"col-sm-9\">Unknown Press</dd>\n\n          <dt className=\"col-sm-3\">Category</dt>\n          <dd className=\"col-sm-9\">{book.type}</dd>\n\n          <dt className=\"col-sm-3\">Stock</dt>\n          <dd className=\"col-sm-9\">{book.inventory}+</dd>\n\n          <dt className=\"col-sm-3\">Price</dt>\n          <dd className=\"col-sm-9 text-danger fw-bold\">¥{book.price}</dd>\n\n          <dt className=\"col-sm-3\">Introduction</dt>\n          <dd className=\"col-sm-9\">{book.description}</dd>\n        </dl>\n        <div className=\"my-3\">\n          <div className=\"d-flex justify-content-end\">\n            <ButtonGroup className=\"col-12 col-xl-6 col-lg-8\" size=\"lg\">\n              <Button\n                variant=\"outline-danger\"\n                className=\"w-100\"\n                onClick={() => {\n                  addToCart(book.id.toString());\n                }}\n              >\n                Add to Cart\n              </Button>\n              <Button\n                variant=\"outline-danger\"\n                className=\"w-100\"\n                onClick={() => {\n                  history.push(\"/checkout\");\n                }}\n              >\n                Checkout\n              </Button>\n            </ButtonGroup>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Link, RouteComponentProps, useHistory } from \"react-router-dom\";\nimport { BookCard } from \"../components/BookCard\";\nimport { Header } from \"../components/Header\";\nimport { BookDetailView } from \"../views/BookDetailView\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { useContext } from \"react\";\nimport { BooksContext } from \"../services\";\n\nexport function DetailPage(\n  props: RouteComponentProps<{\n    id: string;\n  }>\n) {\n  const id = props.match.params.id;\n\n  return (\n    <Body>\n      <Header active=\"detail\" />\n      <Main py={5}>\n        <DetailMain id={id} />\n      </Main>\n    </Body>\n  );\n}\n\nfunction DetailMain({ id }: { id: string }) {\n  const { BOOKS } = useContext(BooksContext);\n  const book = BOOKS[id];\n  const history = useHistory();\n\n  return (\n    <div>\n      <nav>\n        <ol className=\"breadcrumb h6\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"#\" className=\"\" onClick={() => history.goBack()}>\n              Books\n            </Link>\n          </li>\n          <li className=\"breadcrumb-item active\">{book.name}</li>\n        </ol>\n      </nav>\n      <div className=\"row\">\n        <div className=\"col-md-4\">\n          <BookCard book={book} withLink={false} />\n        </div>\n        <div className=\"col-md-8\">\n          <BookDetailView book={book} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Carousel } from \"react-bootstrap\";\n\nfunction CarouselItem(url: string) {\n  return (\n    <Carousel.Item key={url}>\n      <img className=\"d-block w-100\" src={url} alt={url} />\n    </Carousel.Item>\n  );\n}\n\nexport function CarouselView() {\n  const items = [\n    \"static/book1.jpg\",\n    \"static/book2.jpg\",\n    \"static/book3.jpg\",\n    \"static/book4.jpg\",\n  ].map((url) => CarouselItem(url));\n\n  return (\n    <Carousel className=\"mb-4\" fade={true}>\n      {items}\n    </Carousel>\n  );\n}\n","import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useRouteMatch } from \"react-router-dom\";\nimport _ from \"lodash\";\nimport { BookCard } from \"../components/BookCard\";\nimport { BooksContext } from \"../services\";\nimport { SearchPageParams } from \"../routes\";\n\nconst PER_PAGE = 12;\n\nfunction Pagination() {\n  const { total, page, setPage } = useContext(GalleryContext);\n  const totalPage = Math.ceil(total / PER_PAGE);\n\n  const pages = _(_.range(1, totalPage + 1))\n    .map((p) => (\n      <li className={`page-item ${p === page ? \"active\" : \"\"}`} key={p}>\n        <button className=\"page-link\" onClick={() => setPage(p)}>\n          {p}\n        </button>\n      </li>\n    ))\n    .value();\n\n  return (\n    <div className=\"py-5\" id=\"footer\">\n      <nav>\n        <ul className=\"pagination justify-content-center\">\n          <li className={`page-item ${page === 1 ? \"disabled\" : \"\"}`}>\n            <button className=\"page-link\" onClick={() => setPage(page - 1)}>\n              Previous\n            </button>\n          </li>\n          {pages}\n          <li className={`page-item ${page === totalPage ? \"disabled\" : \"\"}`}>\n            <button className=\"page-link\" onClick={() => setPage(page + 1)}>\n              Next\n            </button>\n          </li>\n        </ul>\n      </nav>\n    </div>\n  );\n}\n\nfunction Books() {\n  const { BOOKS } = useContext(BooksContext);\n  const { setTotal, page } = useContext(GalleryContext);\n  const keyword = useRouteMatch<SearchPageParams>().params.keyword ?? \"\";\n\n  const allBooksIter = _(BOOKS)\n    .filter((book) => _(book).values().join().includes(keyword))\n    .map((book) => (\n      <div key={`book${book.id}`} className=\"col\">\n        <BookCard book={book} withLink={true} />\n      </div>\n    ));\n\n  const books = allBooksIter\n    .drop((page - 1) * PER_PAGE)\n    .take(PER_PAGE)\n    .value();\n\n  useEffect(() => setTotal(allBooksIter.size()));\n\n  return (\n    <div\n      className=\"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3\"\n      id=\"books\"\n    >\n      {books}\n    </div>\n  );\n}\n\ntype GalleryContextType = {\n  total: number;\n  setTotal: (n: number) => void;\n  page: number;\n  setPage: (n: number) => void;\n};\n\nconst GalleryContext = createContext<GalleryContextType>(null!);\n\nexport function BooksView() {\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n\n  return (\n    <GalleryContext.Provider value={{ total, setTotal, page, setPage }}>\n      <div>\n        <Books></Books>\n        <Pagination />\n      </div>\n    </GalleryContext.Provider>\n  );\n}\n","import { Header } from \"../components/Header\";\nimport { CarouselView } from \"../views/CarouselView\";\nimport { BooksView } from \"../views/BooksView\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\n\nexport function HomePage() {\n  return (\n    <Body>\n      <Header active=\"home\" />\n      <Main>\n        <HomeMain />\n      </Main>\n    </Body>\n  );\n}\n\nfunction HomeMain() {\n  return (\n    <div>\n      <CarouselView />\n      <BooksView />\n    </div>\n  );\n}\n","import { useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { ADMINS, useStore } from \"../services\";\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\n\nexport function LoginPage() {\n  const { user, setUser, setCart } = useStore();\n  const userInputRef = useRef<HTMLInputElement>(null!);\n  const history = useHistory();\n\n  return (\n    <main className=\"form-signin\">\n      <form\n        onSubmit={() => {\n          const newUser = userInputRef.current.value;\n          if (user !== newUser) {\n            setCart([]);\n          }\n          setUser(newUser);\n          history.push(\"/home\");\n        }}\n      >\n        <h1 className=\"h1 mb-3 fw-bold\">Sign in</h1>\n        <OverlayTrigger\n          placement=\"left\"\n          trigger=\"focus\"\n          overlay={\n            <Tooltip id=\"user-tooltip\">\n              Sign in as <strong>{ADMINS.join(\" or \")}</strong> to obtain the admin permissions.\n            </Tooltip>\n          }\n        >\n          <input\n            className=\"form-control\"\n            placeholder=\"Username\"\n            required={true}\n            autoFocus={true}\n            defaultValue={user === \"\" ? \"Guest\" : user}\n            ref={userInputRef}\n          />\n        </OverlayTrigger>\n\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          placeholder=\"Password\"\n          required={true}\n          defaultValue=\"password\"\n        />\n        <div className=\"mb-3 form-check form-switch\">\n          <label>\n            <input\n              type=\"checkbox\"\n              id=\"rememberMeCheck\"\n              className=\"form-check-input\"\n              defaultChecked={true}\n            />\n            <label htmlFor=\"rememberMeCheck\" className=\"form-check-label\">\n              Remember me\n            </label>\n          </label>\n        </div>\n        <button className=\"btn btn-dark w-100 btn-lg\" type=\"submit\">\n          Sign in\n        </button>\n      </form>\n    </main>\n  );\n}\n","import { Header } from \"../components/Header\";\nimport { BooksView } from \"../views/BooksView\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { useRouteMatch } from \"react-router\";\nimport { SearchPageParams } from \"../routes\";\n\nexport function SearchPage() {\n  return (\n    <Body>\n      <Header active=\"search\" />\n      <Main>\n        <SearchMain />\n      </Main>\n    </Body>\n  );\n}\n\nfunction SearchMain() {\n  const keyword = useRouteMatch<SearchPageParams>().params.keyword ?? \"\";\n\n  return (\n    <div>\n      <div className=\"py-5\">\n        <span className=\"h1\">Search Results for \"{keyword}\"</span>\n      </div>\n      <BooksView />\n    </div>\n  );\n}\n","import _ from \"lodash\";\nimport {\n  EditingState,\n  PagingState,\n  IntegratedPaging,\n  ChangeSet,\n} from \"@devexpress/dx-react-grid\";\nimport {\n  Grid,\n  Table,\n  TableHeaderRow,\n  TableEditRow,\n  TableEditColumn,\n  PagingPanel,\n} from \"@devexpress/dx-react-grid-bootstrap4\";\nimport \"@devexpress/dx-react-grid-bootstrap4/dist/dx-react-grid-bootstrap4.css\";\n\nimport { useContext } from \"react\";\nimport { BooksContext, useStore } from \"../services\";\n\nexport function BookEditorView() {\n  const { BOOKS, updateBOOKS } = useContext(BooksContext);\n  const { cart, setCart } = useStore();\n\n  const rows = _.values(BOOKS);\n  const cols = _(_.first(rows))\n    .keys()\n    .filter((k) => k !== \"id\")\n    .map((k) => {\n      return { name: k, title: k };\n    })\n    .value();\n\n  function onCommitChanges({ added, changed, deleted }: ChangeSet) {\n    if (added) {\n      // [row]\n      updateBOOKS((bs) => {\n        _(added).forEach((rowAdded) => {\n          const newId = _(BOOKS).keys().max() ?? 0 + 1;\n          bs[newId] = { ...rowAdded, id: newId };\n        });\n      });\n    }\n\n    if (changed) {\n      // {id: row}\n      updateBOOKS((bs) => {\n        _(changed)\n          .toPairs()\n          .forEach(([id, rowChanged]) => {\n            bs[id] = { ...bs[id], ...rowChanged };\n          });\n      });\n    }\n    \n    if (deleted) {\n      // [rowIdx]\n      updateBOOKS((bs) => {\n        _(deleted).forEach((id) => {\n          delete bs[id];\n        });\n      });\n\n      // cleanup the cart\n      setCart(\n        _(cart)\n          .filter((id) => !deleted.includes(id))\n          .value()\n      );\n    }\n  }\n\n  return (\n    <div className=\"card\">\n      <Grid rows={rows} columns={cols} getRowId={(row) => row.id}>\n        <PagingState defaultCurrentPage={0} pageSize={20} />\n        <IntegratedPaging />\n        <EditingState onCommitChanges={onCommitChanges} />\n        <Table />\n        <TableHeaderRow />\n        <TableEditRow />\n        <TableEditColumn showAddCommand showEditCommand showDeleteCommand />\n        <PagingPanel />\n      </Grid>\n    </div>\n  );\n}\n","import { Header } from \"../components/Header\";\nimport { Main } from \"./common/Main\";\nimport { Body } from \"./common/Body\";\nimport { BookEditorView } from \"../views/BookEditorView\";\n\nexport function DashboardPage() {\n  return (\n    <Body>\n      <Header active=\"dashboard\" />\n      <Main>\n        <DashboardMain />\n      </Main>\n    </Body>\n  );\n}\n\nfunction DashboardMain() {\n  return (\n    <div>\n      <span className=\"h1\">Dashboard</span>\n      <div className=\"py-4\">\n        <BookEditorView />\n      </div>\n    </div>\n  );\n}\n","import {\n  Route,\n  Switch,\n  HashRouter as Router,\n  Redirect,\n} from \"react-router-dom\";\nimport {\n  CheckoutPage,\n  DetailPage,\n  HomePage,\n  SearchPage,\n  LoginPage,\n  DashboardPage,\n} from \"./pages\";\nimport { ADMINS, useStore } from \"./services\";\n\nexport function BSRoutes() {\n  const { user } = useStore();\n  const isSignedIn = user !== \"\";\n  const isAdmin = ADMINS.includes(user);\n\n  console.log({ isSignedIn, isAdmin, user });\n\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/login\" component={LoginPage} />\n        {isSignedIn ? (\n          <>\n            <Route path=\"/checkout\" component={CheckoutPage} />\n            <Route path=\"/detail/:id\" component={DetailPage} />\n            <Route path=\"/home\" component={HomePage} />\n            <Route path=\"/search/:keyword?\" component={SearchPage} />\n            {isAdmin ? (\n              <Route path=\"/dashboard\" component={DashboardPage} />\n            ) : null}\n            <Route>\n              <Redirect to=\"/home\" />\n            </Route>\n          </>\n        ) : (\n          <Route>\n            <Redirect to=\"/login\" />\n          </Route>\n        )}\n      </Switch>\n    </Router>\n  );\n}\n\nexport type DetailPageParams = {\n  id: string;\n};\n\nexport type SearchPageParams = {\n  keyword?: string;\n};\n","import { useState } from \"react\";\nimport useLocalStorage from \"react-use-localstorage\";\nimport { useImmer } from \"use-immer\";\nimport { BSRoutes } from \"./routes\";\n\nimport { ALL_BOOKS, BooksContext, StoreContext } from \"./services\";\n\nfunction App() {\n  const [cart, setCart] = useState([] as string[]);\n  const addToCart = (id: string) => {\n    setCart(cart.concat([id]));\n  };\n  const [user, setUser] = useLocalStorage(\"bz-user\", \"\");\n\n  const [BOOKS, updateBOOKS] = useImmer(ALL_BOOKS);\n\n  return (\n    <BooksContext.Provider value={{ BOOKS, updateBOOKS }}>\n      <StoreContext.Provider\n        value={{ cart, addToCart, setCart, user, setUser }}\n      >\n        <BSRoutes />\n      </StoreContext.Provider>\n    </BooksContext.Provider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}