(this["webpackJsonpbookstore-frontend"]=this["webpackJsonpbookstore-frontend"]||[]).push([[0],{140:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c.n(s),n=c(17),r=c.n(n),i=c(15),l=c(19),o=c(16),d=c(10),j=c.n(d),b=c(18),u=c(13),m=c(31),h=c(161),O=c(146),x=c(101),v=c(147),p=c(158),f=c(148),g=c(160),N=c(102),k=c(149),y=c(1),w=Object(s.createContext)(void 0);function C(){return Object(s.useContext)(w)}function S(e){var t=Object(s.useState)(!1),c=Object(u.a)(t,2),a=c[0],n=c[1];return Object(y.jsx)(w.Provider,{value:{signedOut:a,setSignedOut:n},children:e.children})}var P=c(107),I="/api";function F(e){var t=function(){var e=Object(b.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((c=e.sent).ok){e.next=5;break}throw c;case 5:return e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=I+e;return Object(P.a)(c,t)}var B,L={"Content-type":"application/json; charset=UTF-8"};function T(e,t){return fetch(I+e,{method:"POST",body:t,headers:L})}function A(e,t){return fetch(I+e,{method:"DELETE",body:t,headers:L})}function D(e){return T("/users/login",JSON.stringify(e))}function J(e){return T("/users/register",JSON.stringify(e))}function q(){var e=F("/users/check"),t=e.data&&!e.error?e.data.user_type===B.admin:void 0;return Object(i.a)({isAdmin:t},e)}!function(e){e[e.admin=0]="admin",e[e.normal=1]="normal"}(B||(B={}));var E=c(24),M=c.n(E);function U(){var e,t,c,s,a,n,r=F("/cart/"),l=r.data&&!r.error?M()(r.data.books).map((function(e){return e.count})).sum():0;return Object(i.a)({books:null!==(e=r.error||null===(t=r.data)||void 0===t?void 0:t.books)&&void 0!==e?e:[],discount:null!==(c=r.error||null===(s=r.data)||void 0===s?void 0:s.discount)&&void 0!==c?c:0,total:null!==(a=r.error||null===(n=r.data)||void 0===n?void 0:n.total)&&void 0!==a?a:0,cartCount:l},r)}function _(e){return t="/cart/".concat(e),fetch(I+t,{method:"PUT",body:c,headers:L});var t,c}function H(e){var t,c,s=e.active,a=U().cartCount,n=null!==(t=q().isAdmin)&&void 0!==t&&t,r=null!==(c=Object(l.h)().params.keyword)&&void 0!==c?c:"";return Object(y.jsx)(h.a,{bg:"white",expand:"lg",className:"shadow-sm fixed-top",children:Object(y.jsxs)(O.a,{children:[Object(y.jsx)(h.a.Brand,{className:"fw-bolder",as:o.b,to:"/home",children:"Book Store"}),Object(y.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(y.jsxs)(h.a.Collapse,{id:"basic-navbar-nav",children:[Object(y.jsxs)(x.a,{className:"me-auto",children:[Object(y.jsx)(x.a.Link,{as:o.b,to:"/home",active:"home"===s||"detail"===s||"search"===s,children:"Books"}),Object(y.jsx)(x.a.Link,{as:o.b,to:"/checkout",active:"cart"===s,children:Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("span",{className:"me-1",children:"My Cart"}),Object(y.jsx)(m.a,{children:Object(y.jsx)(v.a,{bg:0===a?"secondary":"danger",pill:!0,children:a})})]})}),Object(y.jsx)(x.a.Link,{as:o.b,to:"/orders",active:"orders"===s,children:"My Orders"}),Object(y.jsx)(z,{})]}),Object(y.jsx)(R,{initial:r}),n?Object(y.jsx)(G,{active:s}):null]})]})})}function z(){var e,t=C().setSignedOut,c=Object(l.g)(),s=q(),a=s.data,n=s.revalidate;return Object(y.jsx)(p.a,{overlay:Object(y.jsx)(f.a,{id:"signout-tooltip",children:"Click to sign out"}),placement:"auto",children:Object(y.jsxs)(x.a.Link,{onClick:Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("/users/logout");case 2:return e.next=4,n();case 4:t(!0),c.push("/login");case 6:case"end":return e.stop()}}),e)}))),children:[Object(y.jsx)("span",{children:"Hi, "}),Object(y.jsx)("span",{className:"fw-bold",children:null!==(e=null===a||void 0===a?void 0:a.username)&&void 0!==e?e:"???"})]})})}function R(e){var t=e.initial,c=void 0===t?"":t,a=Object(s.useRef)(null),n=Object(l.g)();return Object(y.jsxs)(g.a,{className:"d-flex mb-2 mb-lg-0",onSubmit:function(){var e=a.current.value;e.length>0&&n.push("/search/".concat(e))},children:[Object(y.jsx)(N.a,{className:"form-control me-2",type:"search",placeholder:"Search Books...",defaultValue:c,ref:a}),Object(y.jsx)(k.a,{variant:"outline-secondary",type:"submit",children:"Search"})]})}function G(e){var t=e.active;return Object(y.jsx)("div",{className:"ms-lg-2 d-flex",children:"dashboard"===t?Object(y.jsx)(k.a,{as:o.b,to:"/home",variant:"success",className:"w-100",children:"Book Store"}):Object(y.jsx)(k.a,{as:o.b,to:"/dashboard",variant:"primary",className:"w-100",children:"Dashboard"})})}function V(e){var t=e.py,c=void 0===t?4:t,s=e.children;return Object(y.jsx)("main",{className:"py-".concat(c," container"),children:s})}function K(e){return Object(y.jsx)("div",{className:"store-home",children:e.children})}var Y=c(164),Z=c(150),W=c(103),Q=c(151);function X(e){var t=e.book,c=e.count,s="/detail/".concat(t.id),a=U().revalidate;return Object(y.jsx)(Y.a.Item,{as:o.b,to:s,style:{color:"inherit",textDecoration:"inherit"},action:!0,children:Object(y.jsxs)(Z.a,{className:"d-flex justify-content-between",children:[Object(y.jsx)(W.a,{xs:3,children:Object(y.jsx)(Q.a,{src:t.image,fluid:!0})}),Object(y.jsxs)(W.a,{className:"d-flex align-items-center",children:[Object(y.jsxs)("div",{className:"me-auto",children:[Object(y.jsx)("h6",{className:"mb-0",children:t.name}),Object(y.jsx)("small",{className:"text-muted",children:t.author})]}),Object(y.jsxs)("div",{className:"me-3",children:[Object(y.jsxs)("span",{className:"h5",children:["\xa5",t.price]}),c>1?Object(y.jsxs)("span",{className:"text-muted",children:[" x",c]}):null]}),Object(y.jsx)(v.a,{pill:!0,as:k.a,variant:"danger",onClick:function(){var e=Object(b.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,s=t.id.toString(),A("/cart/".concat(s));case 3:return e.next=5,a();case 5:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"\u2014"})]})]})})}function $(e){var t=e.title,c=e.value,s="Discount"===t?"text-danger":"fw-bold",a="Discount"===t?"-\xa5":"\xa5";return Object(y.jsx)(Y.a.Item,{children:Object(y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(y.jsx)("div",{children:Object(y.jsx)("span",{className:"h6",children:t})}),Object(y.jsx)("div",{children:Object(y.jsxs)("span",{className:"h5 ".concat(s),children:[a,c.toFixed(2)]})})]})})}function ee(){var e=U(),t=e.books,c=e.cartCount,s=e.discount,a=e.total,n=e.revalidate,r=M()(t).map((function(e){return Object(y.jsx)(X,{book:e.book,count:e.count},e.book.id)})).value();return Object(y.jsxs)("div",{children:[Object(y.jsxs)("h4",{className:"d-flex align-items-center mb-3",children:[Object(y.jsx)("span",{className:"text-muted me-2",children:"My cart"}),Object(y.jsx)(v.a,{pill:!0,bg:"secondary",className:"me-auto",children:c}),c>0?Object(y.jsx)(v.a,{pill:!0,as:k.a,variant:"danger",onClick:Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("/cart/");case 2:return e.next=4,n();case 4:case"end":return e.stop()}}),e)}))),children:"Clear"}):null]}),Object(y.jsxs)("ul",{className:"list-group mb-3",children:[r,Object(y.jsx)($,{title:"Discount",value:s}),Object(y.jsx)($,{title:"Total",value:a})]})]})}var te=Object(s.createContext)(null);function ce(e){var t=e.name,c=e.children,a=Object(s.useContext)(te),n=a.selected,r=a.setSelected;return Object(y.jsx)("button",{onClick:function(){return r(t)},className:"list-group-item list-group-item-action ".concat(n===t?"active":""),children:Object(y.jsxs)("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[Object(y.jsx)("span",{children:t}),c]})})}function se(){return Object(y.jsx)("div",{className:"col",children:Object(y.jsxs)("div",{className:"row gy-2",children:[Object(y.jsxs)("div",{className:"col-md-6",children:[Object(y.jsx)("label",{htmlFor:"cc-name",className:"form-label",children:"Name on card"}),Object(y.jsx)("input",{type:"text",className:"form-control",id:"cc-name",placeholder:"",required:!0})]}),Object(y.jsxs)("div",{className:"col-md-6",children:[Object(y.jsx)("label",{htmlFor:"cc-number",className:"form-label",children:"Card number"}),Object(y.jsx)("input",{type:"text",className:"form-control",id:"cc-number",placeholder:"",required:!0})]}),Object(y.jsxs)("div",{className:"col-md-6",children:[Object(y.jsx)("label",{htmlFor:"cc-expiration",className:"form-label",children:"Expiration"}),Object(y.jsx)("input",{type:"text",className:"form-control",id:"cc-expiration",placeholder:"",required:!0})]}),Object(y.jsxs)("div",{className:"col-md-6",children:[Object(y.jsx)("label",{htmlFor:"cc-cvv",className:"form-label",children:"CVV"}),Object(y.jsx)("input",{type:"text",className:"form-control",id:"cc-cvv",placeholder:"",required:!0})]})]})})}function ae(){var e=Object(s.useState)("Credit card"),t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(y.jsx)(te.Provider,{value:{selected:c,setSelected:a},children:Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{className:"mb-3",children:"Payment"}),Object(y.jsxs)("div",{className:"row gy-2",children:[Object(y.jsx)("div",{className:"col-lg-5 col-xxl-4",children:Object(y.jsxs)("div",{className:"list-group",children:[Object(y.jsx)(ce,{name:"PayPal"}),Object(y.jsx)(ce,{name:"WeChat Pay",children:Object(y.jsx)("span",{className:"badge bg-success rounded-pill",children:"Recommended"})}),Object(y.jsx)(ce,{name:"Alipay"}),Object(y.jsx)(ce,{name:"Credit card",children:Object(y.jsx)("span",{className:"badge bg-secondary rounded-pill",children:"Last used"})})]})}),"Credit card"===c?Object(y.jsx)(se,{}):Object(y.jsxs)("div",{className:"col",children:["You'll be redirected to ",c,' after clicking "Checkout".']})]})]})})}var ne=c(159),re=c(55),ie=Object(s.createContext)(null);function le(e){var t=e.address,c="Default"===t.tag?"bg-secondary":"bg-success",a=Object(s.useContext)(ie),n=a.selected,r=a.setSelected;return Object(y.jsxs)("button",{onClick:function(){return r(t.id)},className:"list-group-item list-group-item-action ".concat(n===t.id?"active":""),children:[Object(y.jsxs)("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[Object(y.jsx)("h5",{className:"mb-1",children:t.name}),Object(y.jsx)("span",{className:"badge ".concat(c," rounded-pill"),children:t.tag})]}),Object(y.jsx)("p",{className:"mb-0 small",children:t.phone}),Object(y.jsx)("p",{className:"mb-0",children:t.address})]})}function oe(){var e=Object(s.useContext)(ie),t=e.modalShow,c=e.setModalShow,a=Object(re.a)(),n=a.register,r=a.handleSubmit;return Object(y.jsxs)(ne.a,{show:t,size:"lg",onHide:function(){return c(!1)},backdrop:"static",centered:!0,children:[Object(y.jsx)(ne.a.Header,{closeButton:!0,children:Object(y.jsx)(ne.a.Title,{children:"Add a New Address"})}),Object(y.jsx)(ne.a.Body,{children:Object(y.jsxs)(g.a,{onSubmit:r((function(e){alert(JSON.stringify(e)),c(!1)})),id:"add-new-address-form",children:[Object(y.jsxs)(g.a.Group,{as:Z.a,className:"mb-3",children:[Object(y.jsx)(g.a.Label,{column:!0,sm:3,children:"Name"}),Object(y.jsx)(W.a,{sm:9,children:Object(y.jsx)(g.a.Control,Object(i.a)({placeholder:"Enter full name",required:!0},n("name")))})]}),Object(y.jsxs)(g.a.Group,{as:Z.a,className:"mb-3",children:[Object(y.jsx)(g.a.Label,{column:!0,sm:3,children:"Phone Number"}),Object(y.jsx)(W.a,{sm:9,children:Object(y.jsx)(g.a.Control,Object(i.a)({placeholder:"Enter phone number",required:!0},n("phone")))})]}),Object(y.jsxs)(g.a.Group,{as:Z.a,className:"mb-3",children:[Object(y.jsx)(g.a.Label,{column:!0,sm:3,children:"Address"}),Object(y.jsx)(W.a,{sm:9,children:Object(y.jsx)(g.a.Control,Object(i.a)({as:"textarea",placeholder:"Enter address",required:!0},n("address")))})]}),Object(y.jsx)(g.a.Group,{className:"mb-3",children:Object(y.jsx)(g.a.Check,{type:"checkbox",label:"Set as default",id:"set-as-default"})})]})}),Object(y.jsx)(ne.a.Footer,{children:Object(y.jsx)(k.a,{variant:"primary",type:"submit",form:"add-new-address-form",children:"Confirm"})})]})}function de(){var e=Object(s.useContext)(ie).setModalShow;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("button",{className:"list-group-item list-group-item-action",onClick:function(){return e(!0)},children:Object(y.jsx)("span",{className:"text-muted",children:"Add a new address..."})})})}function je(){var e=Object(s.useState)(0),t=Object(u.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)(!1),r=Object(u.a)(n,2),i=r[0],l=r[1];return Object(y.jsx)(ie.Provider,{value:{selected:c,setSelected:a,modalShow:i,setModalShow:l},children:Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{className:"mb-3",children:"Shipping Address"}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"list-group",children:[Object(y.jsx)(le,{address:{id:0,name:"Bugen Zhao",tag:"Default",phone:"+86 155 2121 2121",address:"1234 Main St., Minhang, Shanghai, China"}}),Object(y.jsx)(le,{address:{id:1,name:"Alice Cook",tag:"Home",phone:"+1 802 812 3456",address:"4321 Home St., Cupertino, CA, United States"}}),Object(y.jsx)(le,{address:{id:2,name:"Dave Jobs",tag:"School",phone:"+86 188 1234 5678",address:"9876 School St., Shanghai, China"}}),Object(y.jsx)(de,{}),Object(y.jsx)(oe,{})]})})]})})}function be(){var e=U().revalidate,t=Object(s.useState)(!1),c=Object(u.a)(t,2),a=c[0],n=c[1],r=Object(s.useState)(!1),i=Object(u.a)(r,2),l=i[0],d=i[1];return Object(y.jsxs)("div",{children:[Object(y.jsxs)(ne.a,{show:a,onHide:function(){n(!1),d(!1)},children:[Object(y.jsx)(ne.a.Header,{closeButton:!0,children:Object(y.jsx)(ne.a.Title,{children:"Checkout Success"})}),Object(y.jsxs)(ne.a.Body,{children:["Go to ",Object(y.jsx)(o.b,{to:"/orders",children:"My Orders"})," to check the order."]})]}),Object(y.jsxs)("div",{className:"row",children:[Object(y.jsx)("div",{className:"col-md-6 col-lg-5 order-md-last",children:Object(y.jsx)(ee,{})}),Object(y.jsxs)("div",{className:"col-md-6 col-lg-7",children:[Object(y.jsx)(je,{}),Object(y.jsx)("hr",{className:"my-4"}),Object(y.jsx)(ae,{}),Object(y.jsx)("hr",{className:"my-4"}),Object(y.jsx)("div",{className:"d-flex justify-content-end",children:Object(y.jsx)("button",{className:"btn btn-primary btn-lg col-12 col-lg-3",type:"submit",disabled:l,onClick:Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.next=3,T("/cart/checkout");case 3:return t.next=5,e();case 5:n(!0);case 6:case"end":return t.stop()}}),t)}))),children:l?"Processing...":"Checkout"})})]})]})]})}function ue(){return Object(y.jsxs)(K,{children:[Object(y.jsx)(H,{active:"cart"}),Object(y.jsx)(V,{py:5,children:Object(y.jsx)(m.b,{children:Object(y.jsx)(be,{})})})]})}var me=c(163);function he(e){var t=e.book,c=e.withLink,s=void 0===c||c,a="/detail/".concat(t.id);return Object(y.jsxs)(me.a,{children:[s?Object(y.jsx)(me.a.Link,{className:"stretched-link",as:o.b,to:a}):null,Object(y.jsx)(me.a.Img,{variant:"top",src:t.image}),Object(y.jsxs)(me.a.Body,{children:[Object(y.jsx)(me.a.Title,{className:"text-truncate",children:t.name}),Object(y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(y.jsxs)(me.a.Subtitle,{className:"text-danger",as:"h6",children:["\xa5",t.price]}),Object(y.jsxs)(me.a.Subtitle,{className:"text-muted",as:"small",children:[t.inventory,"+"]})]})]})]})}var Oe=c(152);function xe(e){var t=e.book,c=U().revalidate;return Object(y.jsxs)("div",{className:"d-flex flex-column justify-content-between",style:{height:"100%"},children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{className:"h2 my-3",children:t.name}),Object(y.jsx)("div",{className:"mb-3",children:Object(y.jsxs)("dl",{className:"row",children:[Object(y.jsx)("dt",{className:"col-sm-3",children:"Author"}),Object(y.jsx)("dd",{className:"col-sm-9",children:t.author}),Object(y.jsx)("dt",{className:"col-sm-3",children:"Press"}),Object(y.jsx)("dd",{className:"col-sm-9",children:"Unknown Press"}),Object(y.jsx)("dt",{className:"col-sm-3",children:"ISBN"}),Object(y.jsx)("dd",{className:"col-sm-9",children:t.isbn}),Object(y.jsx)("dt",{className:"col-sm-3",children:"Category"}),Object(y.jsx)("dd",{className:"col-sm-9",children:t.type}),Object(y.jsx)("dt",{className:"col-sm-3",children:"Stock"}),Object(y.jsxs)("dd",{className:"col-sm-9",children:[t.inventory,"+"]}),Object(y.jsx)("dt",{className:"col-sm-3",children:"Price"}),Object(y.jsxs)("dd",{className:"col-sm-9 text-danger fw-bold",children:["\xa5",t.price]}),Object(y.jsx)("dt",{className:"col-sm-3",children:"Introduction"}),Object(y.jsx)("dd",{className:"col-sm-9",children:t.description})]})})]}),Object(y.jsx)("div",{className:"my-3",children:Object(y.jsx)("div",{className:"d-flex justify-content-end",children:Object(y.jsxs)(Oe.a,{className:"col-12 col-xl-6 col-lg-8",size:"lg",children:[Object(y.jsx)(k.a,{variant:"outline-danger",className:"w-100",onClick:Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t.id.toString());case 2:return e.next=4,c();case 4:case"end":return e.stop()}}),e)}))),children:"Add to Cart"}),Object(y.jsx)(k.a,{variant:"outline-danger",className:"w-100",as:o.b,to:"/checkout",children:"Checkout"})]})})})]})}var ve=c(153);function pe(){var e=F("/books/");return Object(i.a)({books:e.error?void 0:e.data},e)}function fe(e){var t=e.match.params.id;return Object(y.jsxs)(K,{children:[Object(y.jsx)(H,{active:"detail"}),Object(y.jsx)(V,{py:5,children:Object(y.jsx)(ge,{id:t})})]})}function ge(e){var t=function(e){var t=F("/books/".concat(e));return Object(i.a)({book:t.error?void 0:t.data},t)}(e.id).book;return t?Object(y.jsxs)("div",{children:[Object(y.jsx)(Ne,{name:t.name}),Object(y.jsx)(m.b,{children:Object(y.jsxs)(Z.a,{children:[Object(y.jsx)("div",{className:"col-md-5 col-lg-4 align-self-center",children:Object(y.jsx)(he,{book:t,withLink:!1})}),Object(y.jsx)("div",{className:"col-md-7 col-lg-8",children:Object(y.jsx)(xe,{book:t})})]})})]}):Object(y.jsxs)("div",{children:[Object(y.jsx)(Ne,{}),Object(y.jsx)(Z.a,{className:"justify-content-center mt-5",children:Object(y.jsx)(ve.a,{animation:"border",variant:"primary"})})]})}function Ne(e){var t=e.name,c=Object(l.g)();return Object(y.jsx)("nav",{children:Object(y.jsxs)("ol",{className:"breadcrumb h6",children:[Object(y.jsx)("li",{className:"breadcrumb-item",children:Object(y.jsx)(o.b,{to:"#",className:"",onClick:function(){return c.goBack()},children:"Books"})}),t?Object(y.jsx)("li",{className:"breadcrumb-item active",children:t}):Object(y.jsx)("li",{className:"breadcrumb-item",children:"..."})]})})}var ke=c(162);function ye(){var e=function(){var e,t=F("/carousels/");return Object(i.a)({carousels:null!==(e=t.error?void 0:t.data)&&void 0!==e?e:[]},t)}().carousels.map((function(e){return function(e){return Object(y.jsx)(ke.a.Item,{children:Object(y.jsx)("img",{className:"d-block w-100",src:e,alt:e})},e)}(e)}));return Object(y.jsx)(m.b,{triggerOnce:!0,children:Object(y.jsx)(ke.a,{className:"mb-4",fade:!0,children:e})})}function we(){var e=Object(s.useContext)(Se),t=e.total,c=e.page,a=e.setPage,n=Math.ceil(t/12),r=M()(M.a.range(1,n+1)).map((function(e){return Object(y.jsx)("li",{className:"page-item ".concat(e===c?"active":""),children:Object(y.jsx)("button",{className:"page-link",onClick:function(){return a(e)},children:e})},e)})).value();return Object(y.jsx)("div",{className:"py-5",id:"footer",children:Object(y.jsx)("nav",{children:Object(y.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(y.jsx)("li",{className:"page-item ".concat(1===c?"disabled":""),children:Object(y.jsx)("button",{className:"page-link",onClick:function(){return a(c-1)},children:"Previous"})}),r,Object(y.jsx)("li",{className:"page-item ".concat(c===n?"disabled":""),children:Object(y.jsx)("button",{className:"page-link",onClick:function(){return a(c+1)},children:"Next"})})]})})})}function Ce(){var e,t=Object(s.useContext)(Se),c=t.setTotal,a=t.page,n=null!==(e=Object(l.h)().params.keyword)&&void 0!==e?e:"",r=pe().books,i=M()(r).filter((function(e){return M()(e).values().join().includes(n)}));if(Object(s.useEffect)((function(){return c(i.size())})),!r)return Object(y.jsx)(Z.a,{className:"justify-content-center mt-5",children:Object(y.jsx)(ve.a,{animation:"border",variant:"primary"})});var o=i.map((function(e){return Object(y.jsx)("div",{className:"col",children:Object(y.jsx)(he,{book:e,withLink:!0})},"book".concat(e.id))})).drop(12*(a-1)).take(12).value();return Object(y.jsx)("div",{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3",id:"books",children:Object(y.jsx)(m.b,{cascade:!0,damping:.025,triggerOnce:!0,children:o})})}var Se=Object(s.createContext)(null);function Pe(){var e=Object(s.useState)(0),t=Object(u.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)(1),r=Object(u.a)(n,2),i=r[0],l=r[1];return Object(y.jsx)(Se.Provider,{value:{total:c,setTotal:a,page:i,setPage:l},children:Object(y.jsxs)("div",{children:[Object(y.jsx)(Ce,{}),Object(y.jsx)(we,{})]})})}function Ie(){return Object(y.jsxs)(K,{children:[Object(y.jsx)(H,{active:"home"}),Object(y.jsx)(V,{children:Object(y.jsx)(Fe,{})})]})}function Fe(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(ye,{}),Object(y.jsx)(Pe,{})]})}var Be=c(154);function Le(e){var t=e.isSignIn,c=function(e){return e?"Sign in":"Sign up"},s=c(t),a=c(!t),n=t?"/register":"/login";return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("h1",{className:"mb-3",children:[Object(y.jsx)("span",{className:"h1 fw-bold",children:s}),Object(y.jsx)("span",{className:"h4",children:" / "}),Object(y.jsx)(o.b,{className:"h5 fw-bold text-muted",to:n,children:a})]})})}function Te(e){var t=e.isSignIn,c=e.children,s=e.onSubmit,a=e.isProcessing;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("main",{className:"form-signin",children:Object(y.jsxs)(m.b,{children:[Object(y.jsx)(Le,{isSignIn:t}),Object(y.jsxs)("form",{onSubmit:s,children:[c,Object(y.jsxs)(k.a,{className:"w-100 mt-3",variant:"dark",size:"lg",type:"submit",disabled:a,children:[a?"Signing ":"Sign ",t?"in":"up",a?"...":""]})]})]})})})}function Ae(){var e=C(),t=e.signedOut,c=e.setSignedOut,a=q().revalidate,n=Object(l.g)(),r=Object(s.useState)(!1),o=Object(u.a)(r,2),d=o[0],m=o[1],h=Object(s.useState)(!1),O=Object(u.a)(h,2),x=O[0],v=O[1],f=Object(s.useState)(!1),N=Object(u.a)(f,2),k=N[0],w=N[1],S=Object(re.a)({defaultValues:{username:"thunderboy",password:"reins1409"}}),P=S.register,I=S.handleSubmit;return Object(s.useEffect)((function(){var e=setTimeout((function(){c(!1),m(!1)}),3e3);return function(){clearTimeout(e),c(!1)}}),[c,d]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Be.a,{show:t,variant:"primary",className:"text-center h5",children:"You have signed out."}),Object(y.jsx)(Be.a,{show:d,variant:"danger",className:"text-center h5",children:"Your account has been banned by administrators."}),Object(y.jsxs)(Te,{isSignIn:!0,onSubmit:I(function(){var e=Object(b.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("banned"!==t.username.toLowerCase()){e.next=4;break}m(!0),e.next=12;break;case 4:return v(!0),e.next=7,D(t);case 7:return s=e.sent,e.next=10,a();case 10:v(!1),s.ok?(c(!1),n.push("/home")):w(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),isProcessing:x,children:[Object(y.jsx)(p.a,{placement:"bottom-end",trigger:"focus",delay:300,overlay:Object(y.jsx)("div",{}),children:Object(y.jsx)(g.a.Control,Object(i.a)({className:"input-first",placeholder:"Username",autoComplete:"username",required:!0,autoFocus:!0,isInvalid:k},P("username")))}),Object(y.jsx)(g.a.Control,Object(i.a)({className:"input-last",placeholder:"Password",type:"password",required:!0,isInvalid:k},P("password"))),k?Object(y.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please try again."}):null,Object(y.jsx)(g.a.Switch,{className:"mt-3",label:"Remember me",defaultChecked:!0})]})]})}function De(){return Object(y.jsxs)(K,{children:[Object(y.jsx)(H,{active:"search"}),Object(y.jsx)(V,{children:Object(y.jsx)(Je,{})})]})}function Je(){var e,t=null!==(e=Object(l.h)().params.keyword)&&void 0!==e?e:"";return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"py-5",children:Object(y.jsxs)("span",{className:"h1",children:['Search Results for "',t,'"']})}),Object(y.jsx)(Pe,{})]})}c(125);var qe=c(9),Ee=c(40);function Me(e){var t=e.rows,c=e.cols,s=e.onCommitChanges,a=e.booleanCols,n=e.children;return Object(y.jsx)("div",{className:"card",children:Object(y.jsxs)(Ee.a,{rows:t,columns:c,getRowId:function(e){return e.id},children:[Object(y.jsx)(qe.n,{}),Object(y.jsx)(qe.i,{}),Object(y.jsx)(qe.l,{defaultCurrentPage:0,pageSize:20}),Object(y.jsx)(qe.j,{}),a?Object(y.jsx)(He,{for:a}):null,n,Object(y.jsx)(qe.d,{onCommitChanges:s}),Object(y.jsx)(Ee.d,{}),Object(y.jsx)(Ee.g,{}),Object(y.jsx)(Ee.f,{}),Object(y.jsx)(Ee.e,{showAddCommand:!0,showEditCommand:!0,showDeleteCommand:!0}),Object(y.jsx)(Ee.h,{}),Object(y.jsx)(Ee.c,{}),Object(y.jsx)(Ee.b,{})]})})}var Ue=function(e){var t=e.value;return Object(y.jsx)(g.a.Check,{type:"checkbox",defaultChecked:t,disabled:!0})},_e=function(e){var t=e.value,c=e.onValueChange;return Object(y.jsx)(g.a.Check,{type:"checkbox",defaultChecked:t,onChange:function(e){return c(e.target.checked)}})},He=function(e){var t=e.for;return Object(y.jsx)(qe.b,{formatterComponent:Ue,editorComponent:_e,for:t})},ze=c(106),Re=c.n(ze);function Ge(){var e=pe().books,t=M.a.values(e),c=M()(M.a.first(t)).keys().map((function(e){return{name:e,title:Re()(e)}})).value();return Object(y.jsx)(Me,{rows:t,cols:c,onCommitChanges:function(e){e.added,e.changed,e.deleted}})}function Ve(){var e=function(){var e=F("/users/");return Object(i.a)({users:e.error?void 0:e.data},e)}().users,t=M.a.values(e).map((function(e){return Object(i.a)({id:e.user_id,admin:e.user_type===B.admin},e)}));return Object(y.jsx)(Me,{rows:t,cols:[{name:"user_id",title:"User ID"},{name:"username",title:"Username"},{name:"admin",title:"Admin"}],booleanCols:["admin"],onCommitChanges:function(){}})}var Ke=c(155),Ye=c(156);function Ze(){return Object(y.jsxs)(K,{children:[Object(y.jsx)(H,{active:"dashboard"}),Object(y.jsx)(V,{children:Object(y.jsx)(Qe,{})})]})}function We(){var e=Object(s.useState)(!1),t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(y.jsx)(k.a,{size:"lg",variant:"outline-danger",className:"align-self-center",onClick:function(){a(!c)},children:c?"Click again to reset":"Reset all books"})}function Qe(){var e=Object(s.useState)("books"),t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsx)("span",{className:"h1",children:"Dashboard"}),"books"===c?Object(y.jsx)(We,{}):null]}),Object(y.jsx)("div",{className:"py-4",children:Object(y.jsxs)(Ke.a,{activeKey:c,onSelect:function(e){return a(null!==e&&void 0!==e?e:void 0)},className:"mb-3",children:[Object(y.jsx)(Ye.a,{eventKey:"books",title:"Books",children:Object(y.jsx)(Ge,{})}),Object(y.jsx)(Ye.a,{eventKey:"users",title:"Users",children:Object(y.jsx)(Ve,{})})]})})]})}function Xe(){var e,t,c=C().setSignedOut,a=q().revalidate,n=Object(l.g)(),r=Object(s.useState)(!1),o=Object(u.a)(r,2),d=o[0],m=o[1],h=Object(s.useState)(!1),O=Object(u.a)(h,2),x=O[0],v=O[1],p=Object(re.a)(),f=p.register,N=p.handleSubmit,k=p.watch,w=p.formState.errors,S=k("password");return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(Te,{isSignIn:!1,onSubmit:N(function(){var e=Object(b.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,J({username:t.username,password:t.password});case 3:return s=e.sent,e.next=6,a();case 6:m(!1),s.ok?(c(!1),n.push("/home")):v(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),isProcessing:d,children:[Object(y.jsx)(g.a.Control,Object(i.a)({className:"input-first",placeholder:"Username",autoComplete:"username",required:!0,isInvalid:x},f("username"))),Object(y.jsx)(g.a.Control,Object(i.a)({className:"input-mid",placeholder:"Password",type:"password",autoComplete:"new-password",required:!0,isInvalid:!!w.password},f("password",{minLength:{value:4,message:"Password must have at least 4 characters."}}))),Object(y.jsx)(g.a.Control,Object(i.a)({className:"input-last",placeholder:"Confirm Password",type:"password",autoComplete:"new-password",required:!0,isInvalid:!!w.confirmPassword},f("confirmPassword",{validate:function(e){return e===S||"The passwords do not match."}}))),Object(y.jsx)(g.a.Control.Feedback,{type:"invalid",children:null===(e=w.password)||void 0===e?void 0:e.message}),Object(y.jsx)(g.a.Control.Feedback,{type:"invalid",children:null===(t=w.confirmPassword)||void 0===t?void 0:t.message}),x?Object(y.jsx)(g.a.Control.Feedback,{type:"invalid",children:"Please try again."}):null,Object(y.jsx)(g.a.Check,{type:"checkbox",className:"mt-3",label:"Agree to terms and privacy policy",id:"accept-privacy-policy",defaultChecked:!0})]})})}var $e,et=c(157);function tt(){return Object(y.jsxs)(K,{children:[Object(y.jsx)(H,{active:"orders"}),Object(y.jsx)(V,{children:Object(y.jsx)(st,{})})]})}function ct(e){var t=e.order,c=t.cart.books.map((function(e){return Object(y.jsx)(Z.a,{children:Object(y.jsxs)(o.b,{to:"/detail/".concat(e.book.id),className:"d-flex nav-link",children:[Object(y.jsx)("span",{className:"me-auto",children:e.book.name}),Object(y.jsxs)("span",{className:"text-muted",children:["x",e.count]})]})})}));return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"align-middle",children:t.id}),Object(y.jsx)("td",{className:"align-middle",children:t.datetime}),Object(y.jsx)("td",{className:"align-middle w-25",children:c}),Object(y.jsxs)("td",{className:"align-middle",children:["\xa5",t.cart.total]}),Object(y.jsx)("td",{className:"align-middle",children:t.consignee}),Object(y.jsx)("td",{className:"align-middle",children:t.status})]})}function st(){var e=function(){var e={id:0x72e226548ae1d,datetime:"2021-05-01 09:41:05",cart:{books:[{book:{id:1,isbn:"1",name:"Java\u6838\u5fc3\u6280\u672f\u5377II",type:"\u7f16\u7a0b",author:"\u51efS.\u970d\u65af\u7279\u66fc",price:95.2,description:"\u672c\u4e66\u662fJava\u9886\u57df\u6709\u5f71\u54cd\u529b\u548c\u4ef7\u503c\u7684\u8457\u4f5c\u4e4b\u4e00\uff0c\u7531\u62e5\u670920\u591a\u5e74\u6559\u5b66\u4e0e\u7814\u7a76\u7ecf\u9a8c\u7684Java\u6280\u672f\u4e13\u5bb6\u64b0\u5199\uff08\u83b7Jolt\u5927\u5956\uff09\uff0c\u4e0e\u300aJava\u7f16\u7a0b\u601d\u60f3\u300b\u9f50\u540d\uff0c10\u4f59\u5e74\u5168\u7403\u7545\u9500\u4e0d\u8870\uff0c\u5e7f\u53d7\u597d\u8bc4\u3002\u7b2c10\u7248\u6839\u636eJavaSE8\u5168\u9762\u66f4\u65b0\uff0c\u540c\u65f6\u4fee\u6b63\u4e86\u7b2c9\u7248\u4e2d\u7684\u4e0d\u8db3\uff0c\u7cfb\u7edf\u5168\u9762\u8bb2\u89e3\u4e86Java\u8bed\u8a00\u7684\u6838\u5fc3\u6982\u5ff5\u3001\u8bed\u6cd5\u3001\u91cd\u8981\u7279\u6027\u548c\u5f00\u53d1\u65b9\u6cd5\uff0c\u5305\u542b\u5927\u91cf\u6848\u4f8b\uff0c\u5b9e\u8df5\u6027\u5f3a\u3002",inventory:1e3,image:"http://img3m9.ddimg.cn/12/36/1546133799-1_w_1.jpg"},count:1},{book:{id:4,isbn:"4",name:"\u5c0f\u738b\u5b50",type:"\u513f\u7ae5\u6587\u5b66",author:"\u5723-\u57c3\u514b\u82cf\u4f69\u91cc",price:8.89,description:"\u8c46\u74e39.7\u9ad8\u5206\u63a8\u8350\uff01\u65c5\u6cd5\u7ffb\u8bd1\u5bb6\u6885\u5b50\u6db5\u4e4b\u5973\u6885\u601d\u7e41\u6cd5\u6587\u76f4\u8bd1\uff0c\u8212\u6717\u5927\u5f00\u672c\uff0c\u592e\u7f8e\u6559\u6388\u9ad8\u7cbe\u5ea6\u8fd8\u539f\u539f\u4f5c\u63d2\u753b\u3002\u9996\u6b21\u6536\u5f55\u5168\u7403\u821e\u53f0\u5267\u3001\u97f3\u4e50\u4f1a\u3001\u7535\u5f71\u3001\u52a8\u753b\u7247\u7b49\u5bf9\u300a\u5c0f\u738b\u5b50\u300b\u7684\u7cbe\u5f69\u8be0\u91ca\uff0c\u901a\u6653\u540d\u4f5c\u7684\u524d\u4e16\u4eca\u751f\u3002",inventory:1e3,image:"http://img3m9.ddimg.cn/75/6/25067469-1_u_2.jpg"},count:3}],discount:36.561,total:85.309},consignee:"Bugen Zhao",status:$e.delivered};return[e,e]}().map((function(e){return Object(y.jsx)(ct,{order:e})}));return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"h1 mb-4",children:"My Orders"}),Object(y.jsxs)(et.a,{responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"#"}),Object(y.jsx)("th",{children:"Datetime"}),Object(y.jsx)("th",{children:"Items"}),Object(y.jsx)("th",{children:"Total Price"}),Object(y.jsx)("th",{children:"Consignee"}),Object(y.jsx)("th",{children:"Status"})]})}),Object(y.jsx)("tbody",{children:e})]})]})}function at(e){return q().error?Object(y.jsx)(l.a,{to:"/login"}):Object(y.jsx)(l.b,Object(i.a)(Object(i.a)({},e),{},{children:e.children}))}function nt(e){var t;return null===(t=q().isAdmin)||void 0===t||t?Object(y.jsx)(l.b,Object(i.a)(Object(i.a)({},e),{},{children:e.children})):Object(y.jsx)(l.a,{to:"/home"})}function rt(){return Object(y.jsx)(o.a,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/",children:Object(y.jsx)(l.a,{to:"/home"})}),Object(y.jsx)(l.b,{path:"/login",component:Ae}),Object(y.jsx)(l.b,{path:"/register",component:Xe}),Object(y.jsx)(at,{path:"/checkout",component:ue}),Object(y.jsx)(at,{path:"/detail/:id",component:fe}),Object(y.jsx)(at,{path:"/home",component:Ie}),Object(y.jsx)(at,{path:"/search/:keyword?",component:De}),Object(y.jsx)(at,{path:"/orders",component:tt}),Object(y.jsx)(nt,{path:"/dashboard",component:Ze})]})})}!function(e){e[e.submitted=0]="submitted",e[e.shipped=1]="shipped",e[e.delivered=2]="delivered",e[e.cancelled=3]="cancelled"}($e||($e={}));var it=function(){return Object(y.jsx)(S,{children:Object(y.jsx)(rt,{})})},lt=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,165)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),s(e),a(e),n(e),r(e)}))};c(139);r.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(it,{})}),document.getElementById("root")),lt()}},[[140,1,2]]]);
//# sourceMappingURL=main.35840e7f.chunk.js.map